I" n<p>Javaçš„åºåˆ—åŒ–æä¾›äº†ä¸€ç§ä¿å­˜å¯¹è±¡çŠ¶æ€çš„æœºåˆ¶ï¼Œä¹‹æ‰€ä»¥è¦ç”¨åˆ°åºåˆ—åŒ–æ˜¯å› ä¸ºæœ‰æ—¶æˆ‘ä»¬ä¼šåœ¨å¯¹è±¡çš„ç”Ÿå‘½æœŸç»“æŸåéœ€è¦æŠŠå¯¹è±¡çŠ¶æ€ä¿å­˜ä¸‹æ¥ï¼Œé€šå¸¸æ˜¯å­˜æ”¾åˆ°å¤–éƒ¨çš„åª’ä»‹ä¸Šï¼Œæ¯”å¦‚æ–‡ä»¶ï¼Œç£ç›˜æˆ–ç½‘ç»œä¸Šã€‚å¹¶ä¸”åœ¨éœ€è¦æ—¶èƒ½å¤Ÿé€šè¿‡ä¸€ç§æœºåˆ¶æ¥æ¢å¤ã€‚åºåˆ—åŒ–èƒ½å¤Ÿåœ¨ä¸åŒçš„JVMä¹‹é—´å…±äº«æ•°æ®ã€‚<br /></p>

<p>å®ç°ç±»çš„åºåˆ—åŒ–åœ¨è¯­æ³•ä¸Šéå¸¸ç®€å•ï¼Œåªéœ€è¦å®ç°Serializableæ¥å£å³å¯ã€‚Serializableæ¥å£æ²¡æœ‰éœ€è¦å®ç°çš„æ–¹æ³•ï¼ˆè¿™æ˜¯ä¸€ä¸ªâ€æ ‡è®°æ¥å£-tagging interfaceâ€)ï¼Œåªæ˜¯æ ‡æ˜è¯¥ç±»çš„å¯¹è±¡éœ€è¦åºåˆ—åŒ–ã€‚</p>

<p>é€šå¸¸æˆ‘ä»¬åœ¨æ„å»ºjavabeançš„æ—¶å€™ï¼Œå®šä¹‰Beanæ—¶è¦å®ç°è¿™ä¸ªæ¥å£ï¼Œå› ä¸ºBeançš„å±æ€§çŠ¶æ€ä¸€èˆ¬éƒ½æ˜¯éœ€è¦ä¿å­˜çš„ã€‚<br /></p>
<h2 id="å…³äºåºåˆ—åŒ–">å…³äºåºåˆ—åŒ–</h2>
<p>éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š<br /></p>
<ol>
  <li>åºåˆ—åŒ–ä¿å­˜çš„æ˜¯å¯¹è±¡çš„çŠ¶æ€ã€‚çŠ¶æ€åŒ…æ‹¬å¯¹è±¡çš„éé™æ€æˆå‘˜å˜é‡ï¼ˆåŒ…æ‹¬å£°æ˜ä¸ºprivateçš„å˜é‡ï¼‰ï¼Œä¸èƒ½ä¿å­˜ä»»ä½•çš„<strong>æˆå‘˜æ–¹æ³•</strong>å’Œ<strong>é™æ€çš„æˆå‘˜å˜é‡</strong>ã€‚</li>
  <li>å½“ä¸€ä¸ªçˆ¶ç±»å®ç°åºåˆ—åŒ–æ—¶,<strong>å­ç±»è‡ªåŠ¨åºåˆ—åŒ–</strong>,ä¸éœ€è¦æ˜¾å¼å®ç°Serializableæ¥å£ã€‚</li>
  <li>å½“ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹å˜é‡å¼•ç”¨å…¶ä»–å¯¹è±¡,åºåˆ—åŒ–è¯¥å¯¹è±¡æ—¶ä¹ŸæŠŠ<strong>å¼•ç”¨å¯¹è±¡åºåˆ—åŒ–</strong>ã€‚</li>
  <li>åºåˆ—åŒ–çš„å¯¹è±¡åŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ‰€æœ‰é›†åˆç±»ä»¥åŠå…¶ä»–è®¸å¤šä¸œè¥¿ï¼Œè¿˜æœ‰å¯¹è±¡ã€‚ä½†æ˜¯<strong>å¹¶éæ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥åºåˆ—åŒ–</strong>ã€‚</li>
  <li>å¯¹è±¡åºåˆ—åŒ–ä¸ä»…ä¿å­˜äº†å¯¹è±¡çš„çŠ¶æ€ï¼Œè€Œä¸”è¿˜èƒ½<strong>ä¿å­˜å¯¹è±¡å†…åŒ…å«çš„æ‰€æœ‰å¼•ç”¨çš„å¯¹è±¡çŠ¶æ€</strong>ï¼Œä¸€ç›´è¿½è¸ªçŸ¥é“æ‰€æœ‰çš„å¼•ç”¨çš„å¯¹è±¡è¢«ä¿å­˜ã€‚</li>
  <li>ä½¿ç”¨<strong><em>transient</em></strong>å…³é”®å­—ä¿®é¥°çš„çš„å˜é‡ï¼Œåœ¨åºåˆ—åŒ–å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œè¯¥å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚å¸¸ç”¨äºå½“æŸäº›å˜é‡ä¸æƒ³è¢«åºåˆ—åŒ–ï¼ŒåŒæ˜¯åˆä¸é€‚åˆä½¿ç”¨staticå…³é”®å­—å£°æ˜æ—¶ã€‚</li>
</ol>

<h2 id="å…³äº-serialversionuid">å…³äº serialVersionUID</h2>
<p>åºåˆ—åŒ–è¿è¡Œæ—¶ä½¿ç”¨ä¸€ä¸ªç§°ä¸ºserialVersionUIDçš„ç‰ˆæœ¬å·ä¸æ¯ä¸ªå¯åºåˆ—åŒ–ç±»ç›¸å…³è”ï¼Œè¯¥åºåˆ—å·åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ç”¨äºéªŒè¯åºåˆ—åŒ–å¯¹è±¡çš„å‘é€è€…å’Œæ¥æ”¶è€…æ˜¯å¦ä¸ºè¯¥å¯¹è±¡åŠ è½½äº†ä¸åºåˆ—åŒ–å…¼å®¹çš„ç±»ã€‚å¦‚æœæ¥æ”¶è€…åŠ è½½çš„è¯¥å¯¹è±¡çš„ç±»çš„serialVersionUIDä¸å¯¹åº”çš„å‘é€è€…çš„ç±»çš„ç‰ˆæœ¬å·ä¸åŒï¼Œåˆ™ååºåˆ—åŒ–å°†ä¼šå¯¼è‡´InvalidClassExceptionã€‚å¯åºåˆ—åŒ–ç±»å¯ä»¥é€šè¿‡å£°æ˜åä¸º <code class="language-plaintext highlighter-rouge">serialVersionUID</code>çš„å­—æ®µï¼ˆè¯¥å­—æ®µå¿…é¡»å®šä¹‰ä¸º <strong>static final long</strong>ï¼‰æ˜¾å¼å£°æ˜å…¶è‡ªå·±çš„serialVersionUID.å»ºè®®åœ¨ä¸€ä¸ªå¯åºåˆ—åŒ–ç±»ä¸­æ˜¾ç¤ºçš„å®šä¹‰serialVersionUIDã€‚å› ä¸ºserialVersionUIDçš„å–å€¼æ˜¯Javaè¿è¡Œæ—¶ç¯å¢ƒæ ¹æ®ç±»çš„å†…éƒ¨ç»†èŠ‚è‡ªåŠ¨ç”Ÿæˆçš„ã€‚å¦‚æœå¯¹ç±»çš„æºä»£ç ä½œäº†ä¿®æ”¹ï¼Œå†é‡æ–°ç¼–è¯‘ï¼Œæ–°ç”Ÿæˆçš„ç±»æ–‡ä»¶çš„serialVersionUIDçš„å–å€¼æœ‰å¯èƒ½ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚è€Œä¸”ä¸åŒçš„Javaç¼–è¯‘å™¨ä¹‹é—´ä¼šæœ‰å·®å¼‚ã€‚
å¯ä»¥ç”¨åœ¨å¦‚ä¸‹çš„åœºåˆ:<br /></p>
<ol>
  <li>åœ¨æŸäº›åœºåˆï¼Œå¸Œæœ›ç±»çš„ä¸åŒç‰ˆæœ¬å¯¹åºåˆ—åŒ–å…¼å®¹ï¼Œå› æ­¤éœ€è¦ç¡®ä¿ç±»çš„ä¸åŒç‰ˆæœ¬å…·æœ‰ç›¸åŒçš„serialVersionUIDï¼›</li>
  <li>åœ¨æŸäº›åœºåˆï¼Œä¸å¸Œæœ›ç±»çš„ä¸åŒç‰ˆæœ¬å¯¹åºåˆ—åŒ–å…¼å®¹ï¼Œå› æ­¤éœ€è¦ç¡®ä¿ç±»çš„ä¸åŒç‰ˆæœ¬å…·æœ‰ä¸åŒçš„serialVersionUID<br /></li>
</ol>

<p>å‚è€ƒä»£ç å¦‚ä¸‹ï¼Œæ”¹ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ï¼š<br />
é¦–å…ˆå®šä¹‰ä¸€ä¸ªç±»å®ç°Serializableæ¥å£ã€‚<br />
DemoInstance.java<br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">Serializable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DemoInstance</span> <span class="kd">implements</span> <span class="nc">Serializable</span><span class="o">{</span>

   <span class="cm">/**
    * å®šä¹‰ä¸€ä¸ªæ˜ç¡®çš„ serialVersionUID è€Œä¸æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨äº§ç”Ÿ, å£°æ˜ä¸º static final long ç±»å‹ 
   */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">a</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="n">b</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">c</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getA</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setA</span><span class="o">(</span><span class="nc">String</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getB</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setB</span><span class="o">(</span><span class="nc">String</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getC</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">c</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setC</span><span class="o">(</span><span class="nc">String</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<p>åœ¨main()ä¸­å®ç°è¯¥ç±»å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚<br />
App.java<br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">Serializable</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.ObjectInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.ObjectOutputStream</span><span class="o">;</span>

<span class="cm">/**
 * example of serializable
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="cm">/* å£°æ˜ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å®ç°äº†serializableæ¥å£ */</span>
        <span class="nc">DemoInstance</span> <span class="n">demoObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DemoInstance</span><span class="o">();</span>
        <span class="nc">DemoInstance</span> <span class="n">demoReadObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DemoInstance</span><span class="o">();</span>

        <span class="n">demoObj</span><span class="o">.</span><span class="na">setA</span><span class="o">(</span><span class="s">"I am private member."</span><span class="o">);</span>
        <span class="n">demoObj</span><span class="o">.</span><span class="na">setB</span><span class="o">(</span><span class="s">"I am protected member."</span><span class="o">);</span>
        <span class="n">demoObj</span><span class="o">.</span><span class="na">setC</span><span class="o">(</span><span class="s">"I am public member."</span><span class="o">);</span>

        <span class="n">demoReadObj</span><span class="o">.</span><span class="na">setA</span><span class="o">(</span><span class="s">"I am null!"</span><span class="o">);</span>
        <span class="n">demoReadObj</span><span class="o">.</span><span class="na">setB</span><span class="o">(</span><span class="s">"I am null!"</span><span class="o">);</span>
        <span class="n">demoReadObj</span><span class="o">.</span><span class="na">setC</span><span class="o">(</span><span class="s">"I am null!"</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="cm">/*é¦–å…ˆå£°æ˜ä¸€ä¸ªFileOutputStreamçš„å¯¹è±¡ï¼Œç”¨äºæ“ä½œè¦å†™å…¥çš„æ–‡ä»¶*/</span>
            <span class="nc">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"example_Serializable.txt"</span><span class="o">);</span>
            <span class="cm">/* å£°æ˜ä¸€ä¸ªObjectOutputStream å¯¹è±¡ï¼Œå°†è¦å†™å…¥çš„æ–‡ä»¶æµä¸è¦å­˜çš„å¯¹è±¡å…³è” */</span>
            <span class="nc">ObjectOutputStream</span> <span class="n">oos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectOutputStream</span><span class="o">(</span><span class="n">fos</span><span class="o">);</span>
            <span class="cm">/* å†™å…¥è¦ä¿å­˜çš„å¯¹è±¡ */</span>
            <span class="n">oos</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">demoObj</span><span class="o">);</span>
            <span class="n">oos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="cm">/* é¦–å…ˆå£°æ˜ä¸€ä¸ªFileInputStreamçš„å¯¹è±¡ï¼Œç”¨äºæ“ä½œè¦å†™å…¥çš„æ–‡ä»¶ */</span>
            <span class="nc">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"example_Serializable.txt"</span><span class="o">);</span>
            <span class="cm">/* å£°æ˜ä¸€ä¸ªObjectInputStream å¯¹è±¡ï¼Œå°†è¦è¯»å…¥çš„æ–‡ä»¶æµä¸è¦å­˜çš„å¯¹è±¡å…³è” */</span>
            <span class="nc">ObjectInputStream</span> <span class="n">ois</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectInputStream</span><span class="o">(</span><span class="n">fis</span><span class="o">);</span>
            <span class="n">demoReadObj</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DemoInstance</span><span class="o">)</span> <span class="n">ois</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
            <span class="n">ois</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>    

            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"A:"</span><span class="o">+</span><span class="n">demoReadObj</span><span class="o">.</span><span class="na">getA</span><span class="o">()</span>
            <span class="o">+</span><span class="s">"\nB:"</span><span class="o">+</span><span class="n">demoReadObj</span><span class="o">.</span><span class="na">getB</span><span class="o">()+</span><span class="s">"\nC:"</span><span class="o">+</span><span class="n">demoReadObj</span><span class="o">.</span><span class="na">getC</span><span class="o">());</span>


        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ä»¥ä¸Šä»£ç å®ç°äº†å¯¹è±¡çš„åºåˆ—åŒ–ï¼Œæ³¨æ„æ­¤æ—¶å¦‚æœå°†ä¿å­˜çš„æ–‡ä»¶ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ä¼šçœ‹åˆ°ä¹±ç ã€‚<br />
è¿™æ˜¯å› ä¸ºåºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½æ˜¯åŸºäºäºŒè¿›åˆ¶æµçš„ï¼Œå°†å¯¹è±¡ä¿å­˜çš„ä¿¡æ¯è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­˜å‚¨åœ¨äº†æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æŸ¥çœ‹çš„è¯å½“ç„¶æ˜¯ä¼šå‡ºç°ä¹±ç çš„ã€‚åªæœ‰é€šè¿‡ååºåˆ—åŒ–æ‰èƒ½å°†å­˜å‚¨çš„äºŒè¿›åˆ¶è¯»å–å‡ºæ¥ã€‚<br /></p>

<p>ååºåˆ—åŒ–è¯»å–çš„ä»£ç å¦‚ä¸‹ã€‚<br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">            <span class="cm">/* é¦–å…ˆå£°æ˜ä¸€ä¸ªFileInputStreamçš„å¯¹è±¡ï¼Œç”¨äºæ“ä½œè¦å†™å…¥çš„æ–‡ä»¶ */</span>
            <span class="nc">FileInputStream</span> <span class="n">fis</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"example_Serializable.txt"</span><span class="o">);</span>
            <span class="cm">/* å£°æ˜ä¸€ä¸ªObjectInputStream å¯¹è±¡ï¼Œå°†è¦è¯»å…¥çš„æ–‡ä»¶æµä¸è¦å­˜çš„å¯¹è±¡å…³è” */</span>
            <span class="nc">ObjectInputStream</span> <span class="n">ois</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectInputStream</span><span class="o">(</span><span class="n">fis</span><span class="o">);</span>
            <span class="n">demoReadObj</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DemoInstance</span><span class="o">)</span> <span class="n">ois</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
            <span class="n">ois</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>   </code></pre></figure>

<p>ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚<br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nl">A:</span><span class="no">I</span> <span class="n">am</span> <span class="kd">private</span> <span class="n">member</span><span class="o">.</span>
<span class="nl">B:</span><span class="no">I</span> <span class="n">am</span> <span class="kd">protected</span> <span class="n">member</span><span class="o">.</span>
<span class="nl">C:</span><span class="no">I</span> <span class="n">am</span> <span class="kd">public</span> <span class="n">member</span><span class="o">.</span></code></pre></figure>

<p>ä»¥ä¸Šæ˜¯åºåˆ—åŒ–çš„åŸºæœ¬æ­¥éª¤ï¼Œä¸‹é¢æˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªDemoInstanceçš„å­ç±»ï¼Œè¯¥ç±»æ²¡æœ‰ç›´æ¥å®ç°Serializableæ¥å£ï¼ŒåŒæ—¶åœ¨è¯¥ç±»ä¸­è¿˜å¼•ç”¨äº†å¦å¤–ä¸€ä¸ªæ²¡æœ‰å®ç°Serializableæ¥å£çš„å®ä½“ç±»ã€‚<br />
SubDemoInstance.java <br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">Serializable</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SubDemoInstance</span> <span class="kd">extends</span> <span class="nc">DemoInstance</span> <span class="o">{</span>

    <span class="cm">/**
     * å®šä¹‰ä¸€ä¸ªæ˜ç¡®çš„ serialVersionUID è€Œä¸æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨äº§ç”Ÿ, å£°æ˜ä¸º static final long ç±»å‹
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">2L</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">state</span><span class="o">;</span>
    <span class="cm">/* å¼•ç”¨ä¸€ä¸ªæ²¡æœ‰åºåˆ—åŒ–çš„å¯¹è±¡ */</span>
    <span class="kd">private</span> <span class="nc">ClassWithoutSerial</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ClassWithoutSerial</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPara</span><span class="o">(</span><span class="nc">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">this</span><span class="o">.</span><span class="na">obj</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPara</span><span class="o">(</span><span class="nc">ClassWithoutSerial</span> <span class="n">obj</span><span class="o">,</span> <span class="nc">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">obj</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="n">state</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getDeclare</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDeclare</span><span class="o">(</span><span class="nc">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">ClassWithoutSerial</span> <span class="nf">getObj</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setObj</span><span class="o">(</span><span class="nc">ClassWithoutSerial</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">;</span>
    <span class="o">}</span>
    
<span class="o">}</span></code></pre></figure>

<p>ClassWithoutSerial.java <br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">Serializable</span><span class="o">;</span>

<span class="cm">/* ç±»æ²¡æœ‰å®ç°Serializaleæ¥å£ */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClassWithoutSerial</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">state</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getState</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setState</span><span class="o">(</span><span class="nc">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">ClassWithoutSerial</span><span class="o">(</span><span class="nc">String</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">state</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nf">ClassWithoutSerial</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<p>å®ç°åºåˆ—åŒ–å’Œå‘åºåˆ—åŒ–çš„ä»£ç ã€‚ <br /></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">            <span class="nc">SubDemoInstance</span> <span class="n">subDemoInstance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SubDemoInstance</span><span class="o">();</span>

            <span class="n">subDemoInstance</span><span class="o">.</span><span class="na">setA</span><span class="o">(</span><span class="s">"I am private member in subclass."</span><span class="o">);</span>
            <span class="n">subDemoInstance</span><span class="o">.</span><span class="na">setB</span><span class="o">(</span><span class="s">"I am protected member in subclass."</span><span class="o">);</span>
            <span class="n">subDemoInstance</span><span class="o">.</span><span class="na">setC</span><span class="o">(</span><span class="s">"I am public member in subclass."</span><span class="o">);</span>
            <span class="n">subDemoInstance</span><span class="o">.</span><span class="na">setDeclare</span><span class="o">(</span><span class="s">"I am member in subclass"</span><span class="o">);</span>
            <span class="n">subDemoInstance</span><span class="o">.</span><span class="na">setPara</span><span class="o">(</span><span class="n">cws</span><span class="o">,</span><span class="s">"I am be called by subclass."</span><span class="o">);</span>
            
            <span class="cm">/*Serialize
             é¦–å…ˆå£°æ˜ä¸€ä¸ªFileOutputStreamçš„å¯¹è±¡ï¼Œç”¨äºæ“ä½œè¦å†™å…¥çš„æ–‡ä»¶ */</span>
            <span class="nc">FileOutputStream</span> <span class="n">fosi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"example_Serializable.txt"</span><span class="o">);</span>
            <span class="cm">/* å£°æ˜ä¸€ä¸ªObjectOutputStream å¯¹è±¡ï¼Œå°†è¦å†™å…¥çš„æ–‡ä»¶æµä¸è¦å­˜çš„å¯¹è±¡å…³è” */</span>
            <span class="nc">ObjectOutputStream</span> <span class="n">oosi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectOutputStream</span><span class="o">(</span><span class="n">fosi</span><span class="o">);</span>
            <span class="cm">/* å†™å…¥è¦ä¿å­˜çš„å¯¹è±¡ */</span>
            <span class="n">oosi</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">subDemoInstance</span><span class="o">);</span>
            <span class="n">oosi</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="cm">/*de-serialize
              é¦–å…ˆå£°æ˜ä¸€ä¸ªFileInputStreamçš„å¯¹è±¡ï¼Œç”¨äºæ“ä½œè¦å†™å…¥çš„æ–‡ä»¶ */</span>
            <span class="nc">FileInputStream</span> <span class="n">fisi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"example_Serializable.txt"</span><span class="o">);</span>
            <span class="cm">/* å£°æ˜ä¸€ä¸ªObjectInputStream å¯¹è±¡ï¼Œå°†è¦è¯»å…¥çš„æ–‡ä»¶æµä¸è¦å­˜çš„å¯¹è±¡å…³è” */</span>
            <span class="nc">ObjectInputStream</span> <span class="n">oisi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectInputStream</span><span class="o">(</span><span class="n">fisi</span><span class="o">);</span>
            <span class="nc">SubDemoInstance</span> <span class="n">readSubDemo</span> <span class="o">=</span>  <span class="k">new</span> <span class="nc">SubDemoInstance</span><span class="o">();</span>
            <span class="n">readSubDemo</span> <span class="o">=</span> <span class="o">(</span><span class="nc">SubDemoInstance</span><span class="o">)</span> <span class="n">oisi</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
            <span class="n">oisi</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"A:"</span> <span class="o">+</span> <span class="n">readSubDemo</span><span class="o">.</span><span class="na">getA</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\nB:"</span> <span class="o">+</span> 
            <span class="n">readSubDemo</span><span class="o">.</span><span class="na">getB</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\nC:"</span> <span class="o">+</span> <span class="n">readSubDemo</span><span class="o">.</span><span class="na">getC</span><span class="o">()</span>
            <span class="o">+</span><span class="s">"\nSubClass:"</span><span class="o">+</span><span class="n">readSubDemo</span><span class="o">.</span><span class="na">getDeclare</span><span class="o">()</span>
            <span class="o">+</span><span class="s">"others:"</span><span class="o">+</span><span class="n">readSubDemo</span><span class="o">.</span><span class="na">getObj</span><span class="o">().</span><span class="na">getState</span><span class="o">());</span></code></pre></figure>

<p>æ‰§è¡Œåä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ã€‚<br /></p>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">A:I am private member.
B:I am protected member.
C:I am public member.
java.io.NotSerializableException: Serializable.ClassWithoutSerial
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
    at Serializable.App.main(App.java:61)</code></pre></figure>

<p>å¯ä»¥çœ‹åˆ°é”™è¯¯ä¸ºClassWithoutSerialæ²¡æœ‰åºåˆ—åŒ–å´æ²¡æ‰§è¡Œäº†åºåˆ—åŒ–çš„æ“ä½œã€‚ç¨ä½œä¿®æ”¹ä½¿å¾—ç±»ClassWithoutSerialå®ç°Serializableæ¥å£ï¼Œç»“æœå¦‚ä¸‹ã€‚<br /></p>

<figure class="highlight"><pre><code class="language-plaintext" data-lang="plaintext">A:I am private member in subclass.
B:I am protected member in subclass.
C:I am public member in subclass.
SubClass:I am member in subclass
others:I am be called by subclass.</code></pre></figure>

<p>ç”±æ­¤å¯è§ï¼Œåºåˆ—åŒ–ç±»çš„å­ç±»å¯ä»¥ä¸å¿…å®ç°åºåˆ—åŒ–ï¼Œä½†æ˜¯å…¶å†…éƒ¨å¼•ç”¨çš„ç±»å¯¹è±¡å¿…é¡»å®ç°åºåˆ—åŒ–ã€‚</p>
:ET