<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="keywords"  content="Ëë£Âàö, DavidDong, David, Ëë£ÂàöÁöÑÂçöÂÆ¢, David Dong's Blog, ÂçöÂÆ¢, ‰∏™‰∫∫ÁΩëÁ´ô, ‰∫íËÅîÁΩë, Web, ÊâãÊú∫, ‰∫∫Êú∫Êé•Âè£, Touch, FingerprintÔºåGithub Pages TEE Java Python C Android">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>A quick way to fix the Gitalk Error: Validation Failed | David Dong‚Äôs Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="A quick way to fix the Gitalk Error: Validation Failed" />
<meta name="author" content="david.dong" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Teach how to fix the ‚Äúvalidation failed‚Äù error when using Gitalk." />
<meta property="og:description" content="Teach how to fix the ‚Äúvalidation failed‚Äù error when using Gitalk." />
<link rel="canonical" href="http://localhost:4000/blog/2021/03/08/Web-gitalk-fixing.html" />
<meta property="og:url" content="http://localhost:4000/blog/2021/03/08/Web-gitalk-fixing.html" />
<meta property="og:site_name" content="David Dong‚Äôs Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-08T10:27:13+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="A quick way to fix the Gitalk Error: Validation Failed" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"david.dong"},"dateModified":"2021-03-08T10:27:13+08:00","datePublished":"2021-03-08T10:27:13+08:00","description":"Teach how to fix the ‚Äúvalidation failed‚Äù error when using Gitalk.","headline":"A quick way to fix the Gitalk Error: Validation Failed","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2021/03/08/Web-gitalk-fixing.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/logo.png"},"name":"david.dong"},"url":"http://localhost:4000/blog/2021/03/08/Web-gitalk-fixing.html"}</script>
<!-- End Jekyll SEO tag -->



<meta property="article:tag" content="Blog">


<link href="https://fonts.font.im/css?family=Poppins:400,900|Raleway|Roboto:400,900|Roboto+Mono&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://rsms.me/">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="icon" href="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/favicon.ico">

	<!-- default stylesheet monokai.sublime ! -->
	
	<link href="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/css/syntax/syntax.monokai.sublime.css" rel="stylesheet"/>
	

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.0/dist/jquery.min.js"></script>

</head><body>
    <main class="container">
      <section class="about condensed">
	    <div class="about-header condensed">
			<div class="about-title">
				<a href="/blog/index.html">
				  <img src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/avatar-11.png" alt="David Dong"/>
				</a>
				<div class = "title-meta">
					<h2 id="title">
					  <a href="/blog/index.html">David Dong</a>
					</h2>
					<p class = "tagline-small">Java/C/C#/Python</p>
				</div>
			</div>
			<p class="tagline">Java/C/C#/Python</p>
		</div>
		<!--put dark mode button here -->
		<div class = "about-footer condensed">
		  <!--put rss/code link here -->
			<div class="icon-box-container about-footer condensed"><div class = "icon-box" style = "padding-right:0px">
					<a id="dark-mode-toggle" class="togglemode dark-mode" onclick="toggleDarkMode()">
						<span id = "mode">Dark Mode</span>
					</a>
				</div>
				<!-- toggle dark/light display mode, should loading darkmode.js here for avoiding flicker when switching -->
				<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/js/darkmode.js"></script>
				<script type="text/javascript">
				$('.dark-mode').on('click',function(){
					$('.dark-mode').toggleClass('light-mode');
					if (document.getElementById("mode").innerHTML=="Light Mode")
						document.getElementById("mode").innerHTML="Dark Mode";
					else 
						document.getElementById("mode").innerHTML="Light Mode";
				})
				</script><div class = "icon-box">
					<a class="icon-rss" href="/rss.xml">
						<span>Subscribe</span>
					</a>
				</div><div class = "icon-box">
					<a class="icon-file-code" href="https://github.com/gangdong/gangdong.github.io">
						<span>Source Code</span>
					</a>
				</div></div>
		</div>
		
	    <!--show contact me -->
		<div class = "about-footer condensed social-container">
	    <p class = "contact about-footer condensed">CONTACT ME</p>
		<!-- put social link here -->
	      <ul class="social about-footer condensed" >
		   <a href="https://rainbow-ux.github.io/traveler-blog.github.io">
              <li>
                <i class="icon-picture"></i>
              </li>
           </a><a href="https://github.com/gangdong">
              <li>
                <i class="icon-github-circled"></i>
              </li>
            </a><a href="https://www.linkedin.com/in/Âàö-Ëë£-25208ba0/">
              <li>
                <i class="icon-linkedin-squared"></i>
              </li>
            </a><a href="mailto:dqdongg@hotmail.com">
              <li>
                <i class="icon-mail" style = "font-size: 27px"></i>
              </li>
            </a></ul>
		<!--put timestamp here -->
		<p class ="timestamp about-footer condensed">&copy; 2024</p>
		</div>
	  <!-- about box end here -->
      </section>
	  
      <section class="content">
        


<!-- add menu bar here! -->
<div class="post-container">
	<div  class = "menu-meta condensed">
		<!--put top menu here, display @ big screen (> $mobileW) -->
		<div  class = "menu-logo">BLOG</div>
		<div  class = "menu">
			<a href="/blog/index.html">
				<li class="icon-home">Home</li>
			</a><a href="/archive">
				<li class="icon-archive">Archives</li>
			</a><a href="/category">
				<li class="icon-tags">Categories</li>
			</a><a href="/about">
				<li class="icon-help-circled">About</li>
			</a>
		</div>
		<!--put hide menu button here, display @ small screen (< $mobileW) -->
		<div class = "menu-btn-box"><a class="menu-btn"></a></div>
		<!--put hide menu here, display @ small screen (< $mobileW) -->
		<div class="context-menu">
			<ul >
				<li>
					<a class="icon-home" href="/blog/index.html">Home</a>
				</li><li>
					<a class="icon-archive" href="/archive">Archives</a>
				</li><li>
					<a class="icon-tags" href="/category">Categories</a>
				</li><li>
					<a class="icon-help-circled" href="/about">About</a>
				</li>
			</ul>
		</div>
	</div>
</div>
<script type="text/javascript">
$('.menu-btn').on('click',function(e){
		
	e.stopPropagation();
	var tag = $('.context-menu');		
	$(tag).toggleClass('context-menu-show');
			
	var flag = true;
	/* hide the context-menu when other element is clicked */
	$(document).bind('click',function(e){
		var target = $(e.target);
		if(target.closest(tag).length == 0 && flag == true){
			$(tag).toggleClass('context-menu-show');
			flag = false;
		}
	});
})
</script><div class="post-container" style = "margin-bottom:1rem">
	<div class="posts-labelgroup" id="posts-labelgroup">
		<h1 id="posts-label">POST</h1>
	</div>  
	<!-- post title -->
	<h2 class="post-title-body">A quick way to fix the Gitalk Error: Validation Failed</h2>
	<div class="post-meta">
		<div class="post-date icon-calendar" style = "padding-left:0px;font-size:14px">Mar 8, 2021</div>
		
		<!-- sidebar button for displaying/hiding sidebar -->
		<div class = "sidebar-btn-box"><a class="btn"></a></div>
		
	</div>
</div>
  <!-- post content here! -->
  <!-- set fix width box to put content! -->
<div class="post-viewer-container">
	<div class="post post-fix-width">
		<p>I‚Äôve met an error <code class="language-plaintext highlighter-rouge">Validation Failed (422)</code> when using Gitalk in my blog. This article records how I fixed this error. If you are in trouble with this issue and you are looking for a solution, reading this article may help you.</p>

<p>I posted a new article in my blog and found the Gitalk report on such an issue. My Gitalk has been working for a long time before this issue occurs. I‚Äôve checked that the Gitalk for my other posts works normally and only the new post has the issue, which means the issue should be a standalone problem that is related to the post self.</p>

<p>By searching google - <a href="https://github.com/gitalk/gitalk/issues/102">gitalk issue #102</a> I understood the problem is that the length of my new post‚Äôs URL is excessive long <code class="language-plaintext highlighter-rouge">(&gt; 50 characters)</code>.</p>

<p>For each post, Gitalk created a Github issue under my blog project‚Äôs repository to track the comment thread of the post. The issue‚Äôs id is used to generate the issue‚Äôs label which is used by Gitalk to identify the comment thread.</p>

<p><img src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/image/web-gitalk-fix-01.PNG" alt="example" title="example" class="center-image" /></p>

<p>However, the problem here is that label length is restricted to maximum of 50 characters ( Not sure if it is a hidden rule or a BUG here üòï ).</p>

<p>In my Gitalk configuration, the issue id is set to</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">id: </span><span class="p">{</span> <span class="p">{</span><span class="n">page</span><span class="p">.</span><span class="nf">url</span><span class="p">}</span> <span class="p">},</span></code></pre></figure>

<p>So if the <code class="language-plaintext highlighter-rouge">page.url</code> is too long and is beyond the restriction, the issue‚Äôs label cannot be created and the <code class="language-plaintext highlighter-rouge">Validation Failed</code> error will be thrown out.</p>

<p>The root cause is clear now, let me fix it.    <br /></p>

<p>The straightforward way is to use a shorter URL to avoid this issue. But I don‚Äôt like this restriction that blocking me write a post. To convert the URL to a fixed-length string looks like a better solution. Why not try the hash function? The interesting thing is that I found there has already been the same solution online <a href="https://blog.csdn.net/death05/article/details/83618887">-&gt; issue fix</a>, which uses the <code class="language-plaintext highlighter-rouge">MD5</code> method. This method not only unifies the URL length but also differentiates them.</p>

<p>It is good!</p>

<p>There is a workable <code class="language-plaintext highlighter-rouge">MD5</code> library - <a href="https://github.com/blueimp/JavaScript-MD5">JavaScript-MD5</a> on Github, I folk it, and the rest thing is quite simple.</p>

<p>I added the below code snippet for loading the <code class="language-plaintext highlighter-rouge">JavaScript-MD5</code> library in my <code class="language-plaintext highlighter-rouge">comments.html</code></p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/js/md5.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure>

<p>and reset the Gitalk id to</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="ss">id: </span><span class="n">md5</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="nf">pathname</span><span class="p">),</span></code></pre></figure>

<p>Committed the update.</p>

<p>I reopened the page and the error was gone, by checking the Gitalk issue‚Äôs label, it has been converted to MD5 code.</p>

<p><img src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/image/web-gitalk-fix-02.PNG" alt="example" title="example" class="center-image" /></p>

<p>This means the solution is working now! üòä</p>


	</div>
	<!-- put sidebar! -->
	
	<div class = "sidebar-container">
	    
	    <div class = "sidebar-about-box" id = "sidebar">
		    
				<p class = "sidebar-title">About This Article</p>
			
			
				
					<P class = "sidebar-about-content sidebar-font-big">Teach how to fix the "validation failed" error when using Gitalk.</P>
				
				
					<P class = "icon-link sidebar-about-content sidebar-font-medium" style = "margin-top:30px">Author: <a href="https://github.com/gangdong">david.dong</a></P>
				
					<P class = "icon-clock sidebar-about-content sidebar-font-medium">5 mins to read</P>
					<P class = "icon-book-1 sidebar-about-content sidebar-font-medium">1957 words</P>
				
					<P class = "icon-th-list sidebar-about-content sidebar-font-medium">Key Words: Gitalk/</P>
				
				
				    <P class = "icon-hashtag sidebar-about-content sidebar-font-medium">Tags: 
					
					<a href="/category#Blog">Blog&nbsp;</a>
					
					</P>
				
			
		</div>
		
		
	</div>
	 
</div>
<!-- no sidebar, use flex width box! -->
<br>
<div class="post-container">
    <!-- post categories box! here  -->
    
   <div class="post-categories-meta">
		<div class="post-categories-box post-categories-box-hide"><a href="/category#Blog">Blog</a></div>
	</div>
  
  
  <div class = "share-box-meta">
  <!-- Go to www.addthis.com/dashboard to customize your tools -->
	
	<div class="addthis_inline_share_toolbox share-box"><span style ="padding: 2px">Share:</span></div>
	
	<!-- Put post veiw statistic here! -->
	<div class = "post-view">
	
		<span class = "icon-eye tooltip"><p class = "tooltiptext" style = "left:0%; margin-left: 0px">Viewers</p><span id="busuanzi_value_page_pv"></span></span>
		
	</div>
  </div>
  
  <!-- Related posts start here! -->
		
		<h1 id="posts-label">You may also like</h1>
		
	  <div class = "related-posts-box">
		<ul>
			
			<li><a href="/blog/github/web/2021/05/04/Blog-github-action.html">CI platform migration: from Travis CI to GitHub Actions</a></li>
			
			<li><a href="/blog/web/2021/04/10/Blog-speeding-up-loadtime.html">Speeding up my blog loadtime</a></li>
			
			<li><a href="/blog/github/2020/04/01/Blog-travisci.html">Use Travis CI to build and deploy project automatically on Github</a></li>
			
			<li><a href="/blog/2019/03/20/Blog-mathjax.html">Display mathematics formula in blog with MathJax</a></li>
			
			<li><a href="/blog/web/2019/02/23/Blog-Template.html">ÂÖ≥‰∫éÊú¨ÂçöÂÆ¢Ê®°Êùø‰ΩøÁî®‰∏äÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò</a></li>
			
		</ul>
	  </div>
	  
	
  <!-- Page navigation start here! -->
   <h1 id="posts-label">further reading</h1>
  
  <div class = "separator"></div>
  <div class="navigation-meta"><div class="navigation-bar">
	 
	 <a href="/android/fingerprint/2021/02/04/Fingerprint-build-ta.html"><span>Previous Post</span><br>Build TA images on different TEE</a>
	 
    </div><div class="navigation-bar"> 
	 
     <a href="/c%23/2021/03/09/Csharp-thread.html"><span>Next Post</span><br>C# Á∫øÁ®ã</a>
	 
    </div></div><br>
  <!-- comment box starts here! -->
    <!-- disqus start  --><!-- Gitalk start  -->
  <!-- Link Gitalk support file  -->
  <section class="gitalk">
  <div id="gitalk_thread"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script type="text/javascript" src="/assets/js/md5.min.js"></script>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
   var gitalk = new Gitalk({
   // gitalk parameters
   clientID: '5e24fc307693a6df3bc5',
   clientSecret: '28c9c17e1174c705c42e9bdc92f87cadcc4ec8b8',
   repo: 'gangdong.github.io',
   owner: 'gangdong',
   admin: ['gangdong'],
   id: md5(location.pathname),
   title: 'comments'
    });
   gitalk.render('gitalk-container');
  </script>
  </section>
  <!-- Gitalk end -->
  <br/><br/><br/><div class = "footer">¬© 2012-2021 David Dong. All rights reserved.</div>
  
  <br>
</div>

<!-- Go to www.addthis.com/dashboard to customize your tools -->
<script async type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-604f502a8198c9c9&domready=1"></script>


<!-- sidebar button, toggle display/hide sidebar -->
<script type="text/javascript">
        $('.btn').on('click',function(){
            $('.btn').toggleClass('btnc');
            $('.sidebar-container').toggleClass('sidebar-container-hide');
        })
</script>

      </section>
    </main><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MXGF3F8QN"></script>
      <script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-3MXGF3F8QN');
	</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body>
</html>
