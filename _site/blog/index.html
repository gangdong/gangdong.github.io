<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="keywords"  content="è‘£åˆš, DavidDong, David, è‘£åˆšçš„åšå®¢, David Dong's Blog, åšå®¢, ä¸ªäººç½‘ç«™, äº’è”ç½‘, Web, æ‰‹æœº, äººæœºæ¥å£, Touch, Fingerprintï¼ŒGithub Pages TEE Java Python C Android">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Home | David Dongâ€™s Blog</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Home" />
<meta name="author" content="David Dong" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is David Dongâ€™s blog. Itâ€™s about program and design, life and sharing. Letâ€™s explore more together. Davidï¼ŒSoftwareï¼ŒDeveloper.Designer å…³äºç¨‹åºä¸è®¾è®¡ - ç”Ÿæ´»ä¸åˆ†äº« è¿™é‡Œæ˜¯è‘£åˆš çš„ä¸ªäººåšå®¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ›´å¤šã€‚" />
<meta property="og:description" content="This is David Dongâ€™s blog. Itâ€™s about program and design, life and sharing. Letâ€™s explore more together. Davidï¼ŒSoftwareï¼ŒDeveloper.Designer å…³äºç¨‹åºä¸è®¾è®¡ - ç”Ÿæ´»ä¸åˆ†äº« è¿™é‡Œæ˜¯è‘£åˆš çš„ä¸ªäººåšå®¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ›´å¤šã€‚" />
<link rel="canonical" href="http://localhost:4000/blog/" />
<meta property="og:url" content="http://localhost:4000/blog/" />
<meta property="og:site_name" content="David Dongâ€™s Blog" />
<meta property="og:type" content="website" />
<link rel="next" href="http://localhost:4000/blog/page2/" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Home" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"David Dong"},"description":"This is David Dongâ€™s blog. Itâ€™s about program and design, life and sharing. Letâ€™s explore more together. Davidï¼ŒSoftwareï¼ŒDeveloper.Designer å…³äºç¨‹åºä¸è®¾è®¡ - ç”Ÿæ´»ä¸åˆ†äº« è¿™é‡Œæ˜¯è‘£åˆš çš„ä¸ªäººåšå®¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢æ›´å¤šã€‚","headline":"Home","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/logo.png"},"name":"David Dong"},"url":"http://localhost:4000/blog/"}</script>
<!-- End Jekyll SEO tag -->


<link href="https://fonts.font.im/css?family=Poppins:400,900|Raleway|Roboto:400,900|Roboto+Mono&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://rsms.me/">
<link rel="stylesheet" href="https://rsms.me/inter/inter.css">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="icon" href="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/favicon.ico">

	<!-- default stylesheet monokai.sublime ! -->
	
	<link href="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/css/syntax/syntax.monokai.sublime.css" rel="stylesheet"/>
	

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.0/dist/jquery.min.js"></script>

</head><body>
    <main class="container">
      <section class="about ">
	    <div class="about-header ">
			<div class="about-title">
				<a href="/blog/index.html">
				  <img src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/avatar-11.png" alt="David Dong"/>
				</a>
				<div class = "title-meta">
					<h2 id="title">
					  <a href="/blog/index.html">David Dong</a>
					</h2>
					<p class = "tagline-small">Java/C/C#/Python</p>
				</div>
			</div>
			<p class="tagline">Java/C/C#/Python</p>
		</div>
		<!--put dark mode button here -->
		<div class = "about-footer ">
		  <!--put rss/code link here -->
			<div class="icon-box-container about-footer "><div class = "icon-box" style = "padding-right:0px">
					<a id="dark-mode-toggle" class="togglemode dark-mode" onclick="toggleDarkMode()">
						<span id = "mode">Dark Mode</span>
					</a>
				</div>
				<!-- toggle dark/light display mode, should loading darkmode.js here for avoiding flicker when switching -->
				<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/js/darkmode.js"></script>
				<script type="text/javascript">
				$('.dark-mode').on('click',function(){
					$('.dark-mode').toggleClass('light-mode');
					if (document.getElementById("mode").innerHTML=="Light Mode")
						document.getElementById("mode").innerHTML="Dark Mode";
					else 
						document.getElementById("mode").innerHTML="Light Mode";
				})
				</script><div class = "icon-box">
					<a class="icon-rss" href="/rss.xml">
						<span>Subscribe</span>
					</a>
				</div><div class = "icon-box">
					<a class="icon-file-code" href="https://github.com/gangdong/gangdong.github.io">
						<span>Source Code</span>
					</a>
				</div></div>
		</div>
		
	    <!--show contact me -->
		<div class = "about-footer  social-container">
	    <p class = "contact about-footer ">CONTACT ME</p>
		<!-- put social link here -->
	      <ul class="social about-footer " >
		   <a href="https://rainbow-ux.github.io/traveler-blog.github.io">
              <li>
                <i class="icon-picture"></i>
              </li>
           </a><a href="https://github.com/gangdong">
              <li>
                <i class="icon-github-circled"></i>
              </li>
            </a><a href="https://www.linkedin.com/in/åˆš-è‘£-25208ba0/">
              <li>
                <i class="icon-linkedin-squared"></i>
              </li>
            </a><a href="mailto:dqdongg@hotmail.com">
              <li>
                <i class="icon-mail" style = "font-size: 27px"></i>
              </li>
            </a></ul>
		<!--put timestamp here -->
		<p class ="timestamp about-footer ">&copy; 2024</p>
		</div>
	  <!-- about box end here -->
      </section>
	  
      <section class="content">
        <div class="post-container">
	<div  class = "menu-meta ">
		<!--put top menu here, display @ big screen (> $mobileW) -->
		<div  class = "menu-logo">BLOG</div>
		<div  class = "menu">
			<a href="/blog/index.html">
				<li class="icon-home">Home</li>
			</a><a href="/archive">
				<li class="icon-archive">Archives</li>
			</a><a href="/category">
				<li class="icon-tags">Categories</li>
			</a><a href="/about">
				<li class="icon-help-circled">About</li>
			</a>
		</div>
		<!--put hide menu button here, display @ small screen (< $mobileW) -->
		<div class = "menu-btn-box"><a class="menu-btn"></a></div>
		<!--put hide menu here, display @ small screen (< $mobileW) -->
		<div class="context-menu">
			<ul >
				<li>
					<a class="icon-home" href="/blog/index.html">Home</a>
				</li><li>
					<a class="icon-archive" href="/archive">Archives</a>
				</li><li>
					<a class="icon-tags" href="/category">Categories</a>
				</li><li>
					<a class="icon-help-circled" href="/about">About</a>
				</li>
			</ul>
		</div>
	</div>
</div>
<script type="text/javascript">
$('.menu-btn').on('click',function(e){
		
	e.stopPropagation();
	var tag = $('.context-menu');		
	$(tag).toggleClass('context-menu-show');
			
	var flag = true;
	/* hide the context-menu when other element is clicked */
	$(document).bind('click',function(e){
		var target = $(e.target);
		if(target.closest(tag).length == 0 && flag == true){
			$(tag).toggleClass('context-menu-show');
			flag = false;
		}
	});
})
</script><div class= "post-container">
    <!-- Put search box here -->
    <li class="posts-labelgroup" id="posts-labelgroup">
      <h1 id="posts-label">posts</h1>
      <div class="search-container">
        <div class="search-section">
          <i class="icon-search"></i>
          <input type="text" name="search" id="searchbar" autocomplete="off" aria-label="search in posts">
        </div>
        <div class="search-results" id="search-results" data-placeholder="No Results" style="display: none;"></div>
      </div>
    </li>
	<!-- Try to look for the pinned article and locked at the first page -->
	
	   <!-- Should look for site.posts instead of paginator.posts -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' --><li class="post-wrapper"><a class="post-link" href="/pinned/2019/02/23/Pinned-Template-english.html">
                <h2 class="post-title">RawPosts - A theme for Jekyll</h2>
              </a>
              <div class="post-meta">
                <ul class="post-categories post-pin-categories-padding"><a class="icon-pin" href="/category#Pinned">Pinned</a></ul>
                <div class="post-date-right-align">
                  <i class="icon-calendar"></i>
                  Feb 23, 2019
				</div>
              </div>
              <div class="post"><p><a href="https://github.com/gangdong/jekyll-theme-rawposts/">RawPosts</a> is a simple, elegant, and clean <a href="https://jekyllrb.com/">Jekyll</a> theme. It is born from the creation of my blog website. It is designed with a fully responsive feature and can be deployed on Github Pages. I open-sourced this theme on Github with an MIT license, so it is free for use.</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-clock readingtime">11 mins read</span>
			<span class="icon-book-1 readingtime" > 4191 words</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/pinned/2019/02/23/Pinned-Template-english.html">
				
				<span class="icon-angle-double-right">Continue reading&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li>
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->
		  <!-- Found tag == 'Pinned' -->

	<!-- This loops through the paginated posts --><li class="post-wrapper"><a class="post-link" href="/rust/2024/02/15/Rust-startup-trait.html">
          <h2 class="post-title">Rust startup - trait</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Rust">Rust</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Feb 15, 2024
		  </div>
		</div>
		
        <div class="post"><p>Is Rust an object-oriented programming language? I searched for the answer to this question on different AI assistants.</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-clock readingtime">6 mins read</span>
			<span class="icon-book-1 readingtime" > 2126 words</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/rust/2024/02/15/Rust-startup-trait.html">
				
				<span class="icon-angle-double-right">Continue reading&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/rust/2024/02/14/Rust-startup-ownership.html">
          <h2 class="post-title">Rust startup - Ownership</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Rust">Rust</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Feb 14, 2024
		  </div>
		</div>
		
        <div class="post"><p>Ownership in Rust refers to a set of rules that govern how memory is managed. At any given time, each value in Rust has a variable that is known as its owner. There can be only one owner at a time. When the owner goes out of scope, the value is dropped and its memory is deallocated.</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-clock readingtime">16 mins read</span>
			<span class="icon-book-1 readingtime" > 6005 words</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/rust/2024/02/14/Rust-startup-ownership.html">
				
				<span class="icon-angle-double-right">Continue reading&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/rust/2024/02/10/Rust-startup.html">
          <h2 class="post-title">Rust startup - environment setup</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Rust">Rust</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Feb 10, 2024
		  </div>
		</div>
		
        <div class="post"><p>Rust is hot, Iâ€™ve heard a lot of people talking about the Rust language, and itâ€™s powered me enough to learn more about it!</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-clock readingtime">13 mins read</span>
			<span class="icon-book-1 readingtime" > 4861 words</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/rust/2024/02/10/Rust-startup.html">
				
				<span class="icon-angle-double-right">Continue reading&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/others/2023/02/04/Others-chatgpt.html">
          <h2 class="post-title">What it&#39;s like to use ChatGPT</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Others">Others</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Feb 4, 2023
		  </div>
		</div>
		
        <div class="post"><p>ChatGPT is very hot recently, I also registered an account and experienced it myself. ğŸ˜‰</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-clock readingtime">14 mins read</span>
			<span class="icon-book-1 readingtime" > 5211 words</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/others/2023/02/04/Others-chatgpt.html">
				
				<span class="icon-angle-double-right">Continue reading&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/git/2022/08/11/gerrit.createchangeid.html">
          <h2 class="post-title">About gerrit.createChangeId</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Git">Git</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Aug 11, 2022
		  </div>
		</div>
		
        <div class="post"><p><code class="language-plaintext highlighter-rouge">git config --bool --get gerrit.createChangeId</code> is a command used in the Git version control system to retrieve the value of the configuration option <code class="language-plaintext highlighter-rouge">gerrit.createChangeId</code>.</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-clock readingtime">3 mins read</span>
			<span class="icon-book-1 readingtime" > 938 words</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/git/2022/08/11/gerrit.createchangeid.html">
				
				<span class="icon-angle-double-right">Continue reading&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/git/2022/07/22/git-change-id.html">
          <h2 class="post-title">Keep old change-id when do git commit</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Git">Git</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Jul 22, 2022
		  </div>
		</div>
		
        <div class="post"><p>When I use <code class="language-plaintext highlighter-rouge">git commit --amend</code> command, it will generate a new change-id. But I want to use the previous change-id and donâ€™t want to generate a new one. How should I keep the old change-id and keep only one change-id?</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-clock readingtime">3 mins read</span>
			<span class="icon-book-1 readingtime" > 1046 words</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/git/2022/07/22/git-change-id.html">
				
				<span class="icon-angle-double-right">Continue reading&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/git/2022/07/01/Git-hooks.html">
          <h2 class="post-title">Git hook é…ç½®ä¸ä½¿ç”¨</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Git">Git</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Jul 1, 2022
		  </div>
		</div>
		
        <div class="post"><p>Hook å°±æ˜¯åœ¨æ‰§è¡ŒæŸä¸ªäº‹ä»¶ä¹‹å‰æˆ–ä¹‹åè¿›è¡Œä¸€äº›å…¶ä»–é¢å¤–çš„æ“ä½œã€‚åœ¨ Git ä¸­ä¹Ÿæœ‰è®¸å¤šçš„äº‹ä»¶ï¼ˆcommitã€push ç­‰ç­‰ï¼‰ï¼Œæ¯ä¸ªäº‹ä»¶ä¹Ÿæ˜¯å¯¹åº”äº†æœ‰ä¸åŒçš„é’©å­çš„ï¼ˆå¦‚ commit å‰ï¼Œcommit åï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™äº›é’©å­è¿™é‡Œé…ç½®ä¸€äº›è‡ªå·±éœ€è¦æ‰§è¡Œçš„æ“ä½œæ¥å®ç°å„ç§å„æ ·çš„éœ€æ±‚ã€‚</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-hourglass readingtime">é˜…è¯»æ—¶é—´ï¼š3 mins</span>
			<span class="icon-book readingtime">å­—æ•°ï¼š939</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/git/2022/07/01/Git-hooks.html">
				
				<span class="icon-angle-double-right">é˜…è¯»å…¨æ–‡&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/windows/2022/06/18/Windows-message-handler.html">
          <h2 class="post-title">Windows æ¶ˆæ¯å¤„ç†æœºåˆ¶</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Windows">Windows</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Jun 18, 2022
		  </div>
		</div>
		
        <div class="post"><p>Windows32 ç¨‹åºæ˜¯ç”±æ¶ˆæ¯äº‹ä»¶é©±åŠ¨çš„ã€‚ä¸€ä¸ªæ¶ˆæ¯ï¼Œæ˜¯ç³»ç»Ÿå®šä¹‰çš„ä¸€ä¸ª 32 ä½çš„å€¼ï¼Œå®ƒå”¯ä¸€çš„å®šä¹‰äº†ä¸€ä¸ªäº‹ä»¶ï¼Œå‘ Windows å‘å‡ºä¸€ä¸ªé€šçŸ¥ï¼Œå‘Šè¯‰åº”ç”¨ç¨‹åºæŸä¸ªäº‹æƒ…å‘ç”Ÿäº†ã€‚</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-hourglass readingtime">é˜…è¯»æ—¶é—´ï¼š5 mins</span>
			<span class="icon-book readingtime">å­—æ•°ï¼š1954</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/windows/2022/06/18/Windows-message-handler.html">
				
				<span class="icon-angle-double-right">é˜…è¯»å…¨æ–‡&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/java/2022/04/22/Java-threadSynchronization.html">
          <h2 class="post-title">æµ…è°ˆ Java çº¿ç¨‹åŒæ­¥æŠ€æœ¯</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Java">Java</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Apr 22, 2022
		  </div>
		</div>
		
        <div class="post"><p>Java é‡Œå®ç°çº¿ç¨‹é—´çš„åŒæ­¥æœ‰å¤šç§æ–¹æ³•ï¼Œæ¯”å¦‚ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">synchronized</code> å…³é”®å­—ï¼Œ<code class="language-plaintext highlighter-rouge">wait</code> å’Œ <code class="language-plaintext highlighter-rouge">notify</code>ï¼Œ<code class="language-plaintext highlighter-rouge">volatile</code> å˜é‡ï¼Œé‡å…¥é”ï¼Œå±€éƒ¨å˜é‡ï¼Œé˜»å¡é˜Ÿåˆ—æˆ–è€…åŸå­ç±»å‹å˜é‡ç­‰ã€‚</p>

<h2 id="synchronized">synchronized</h2>

<p>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">synchronized</code> å…³é”®å­—ï¼šè¿™æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒå¯ä»¥ä¿®é¥°ä»£ç å—æˆ–è€…æ–¹æ³•ï¼Œä½¿å¾—åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®è¢«ä¿®é¥°çš„ä»£ç ã€‚ä¾‹å¦‚ ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SynchronizedDemo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹</span>
        <span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="c1">//è°ƒç”¨åŒæ­¥æ–¹æ³•</span>
                <span class="n">syncMethod</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="s">"t1"</span><span class="o">);</span>

        <span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="c1">//è°ƒç”¨åŒæ­¥æ–¹æ³•</span>
                <span class="n">syncMethod</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="s">"t2"</span><span class="o">);</span>

        <span class="c1">//å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">//å®šä¹‰ä¸€ä¸ªåŒæ­¥æ–¹æ³•</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">syncMethod</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"å¼€å§‹æ‰§è¡Œ"</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"ç»“æŸæ‰§è¡Œ"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="wait-å’Œ-notify">wait å’Œ notify</h2>

<p>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">wait</code> å’Œ <code class="language-plaintext highlighter-rouge">notify</code> ï¼šè¿™æ˜¯ä¸€ç§åŸºäºå¯¹è±¡ç›‘è§†å™¨çš„æœºåˆ¶ï¼Œå®ƒå¯ä»¥è®©ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„é€šçŸ¥ï¼Œä»è€Œå®ç°åä½œã€‚ä¾‹å¦‚ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">WaitNotifyDemo</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Object</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">();</span> <span class="c1">//å®šä¹‰ä¸€ä¸ªé”å¯¹è±¡</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹</span>
        <span class="nc">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="kd">synchronized</span> <span class="o">(</span><span class="n">lock</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//è·å–é”å¯¹è±¡</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"t1å¼€å§‹æ‰§è¡Œ"</span><span class="o">);</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="n">lock</span><span class="o">.</span><span class="na">wait</span><span class="o">();</span> <span class="c1">//é‡Šæ”¾é”å¹¶ç­‰å¾…é€šçŸ¥</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"t1æ”¶åˆ°é€šçŸ¥"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"t1ç»“æŸæ‰§è¡Œ"</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="s">"t1"</span><span class="o">);</span>

        <span class="nc">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="kd">synchronized</span> <span class="o">(</span><span class="n">lock</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//è·å–é”å¯¹è±¡</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"t2å¼€å§‹æ‰§è¡Œ"</span><span class="o">);</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span> <span class="c1">//æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                    <span class="o">}</span>
                    <span class="n">lock</span><span class="o">.</span><span class="na">notify</span><span class="o">();</span> <span class="c1">//å”¤é†’ç­‰å¾…çš„çº¿ç¨‹</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"t2å‘é€é€šçŸ¥"</span><span class="o">);</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"t2ç»“æŸæ‰§è¡Œ"</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">},</span> <span class="s">"t2"</span><span class="o">);</span>

        <span class="c1">//å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹</span>
        <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="volatile">volatile</h2>

<p><code class="language-plaintext highlighter-rouge">volatile</code> å˜é‡æ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œå®ƒå¯ä»¥ä¿è¯å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº† <code class="language-plaintext highlighter-rouge">volatile</code> å˜é‡çš„å€¼åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹åˆ°æœ€æ–°çš„å€¼ã€‚<code class="language-plaintext highlighter-rouge"> volatile </code> å˜é‡è¿˜å¯ä»¥é˜²æ­¢ç¼–è¯‘å™¨æˆ–è€…è¿è¡Œæ—¶å¯¹å…¶è¿›è¡Œé‡æ’åºï¼Œä»è€Œä¿è¯å…¶æ“ä½œçš„é¡ºåºæ€§ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">volatile</code> å˜é‡é€‚åˆç”¨äºä»¥ä¸‹å‡ ç§åœºæ™¯ï¼š</p>

<p>çŠ¶æ€æ ‡å¿—ï¼šä¾‹å¦‚ä¸€ä¸ªå¼€å…³å˜é‡ï¼Œç”¨æ¥æ§åˆ¶å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œæµç¨‹ã€‚
å•ä¾‹æ¨¡å¼ï¼šä¾‹å¦‚åŒé‡æ£€æŸ¥é”å®šï¼ˆdouble-checked lockingï¼‰æ¨¡å¼ï¼Œç”¨æ¥ä¿è¯å¯¹è±¡çš„å”¯ä¸€æ€§å’ŒåŠæ—¶æ€§ã€‚
åŸå­æ“ä½œï¼šä¾‹å¦‚ long æˆ– double ç±»å‹çš„èµ‹å€¼æ“ä½œï¼Œåœ¨ Java ä¸­ä¸æ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯å®šä¹‰ä¸º volatile åå¯ä»¥ä¿è¯åŸå­æ€§ã€‚</p>

<p>å‡è®¾æœ‰ä¸€ä¸ª <code class="language-plaintext highlighter-rouge">volatile</code> å˜é‡å«åš stopï¼Œå®ƒç”¨æ¥æ§åˆ¶ä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œæµç¨‹ã€‚å½“ stop ä¸º false æ—¶ï¼Œçº¿ç¨‹ç»§ç»­è¿è¡Œï¼›å½“ stop ä¸º true æ—¶ï¼Œçº¿ç¨‹åœæ­¢è¿è¡Œã€‚ä»£ç å¦‚ä¸‹:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VolatileExample</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="kt">boolean</span> <span class="n">stop</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span> <span class="o">{</span>
        <span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
                <span class="k">while</span> <span class="o">(!</span><span class="n">stop</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// å¦‚æœstopä¸ºtrueï¼Œè·³å‡ºå¾ªç¯</span>
                    <span class="n">i</span><span class="o">++;</span>
                <span class="o">}</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"i="</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span> <span class="c1">// ä¸»çº¿ç¨‹ä¼‘çœ 1ç§’</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// ä¿®æ”¹stopçš„å€¼ä¸ºtrue</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœä¸ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">volatile</code> ä¿®é¥° <code class="language-plaintext highlighter-rouge">stop</code> å˜é‡ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼šä¸»çº¿ç¨‹ä¿®æ”¹äº† stop çš„å€¼ä¸º trueï¼Œä½†æ˜¯å­çº¿ç¨‹æ²¡æœ‰çœ‹åˆ°æœ€æ–°çš„å€¼ï¼Œä»ç„¶è®¤ä¸º stop æ˜¯ falseï¼Œå¯¼è‡´å­çº¿ç¨‹æ— æ³•åœæ­¢ã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼ˆç¼“å­˜ï¼‰ï¼Œå®ƒä»¬ä¼šä»ä¸»å†…å­˜ä¸­å¤åˆ¶å…±äº«å˜é‡çš„å€¼ï¼Œå¹¶åœ¨å·¥ä½œå†…å­˜ä¸­æ“ä½œå…±äº«å˜é‡ã€‚å¦‚æœä¸ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">volatile</code> ä¿®é¥°å…±äº«å˜é‡ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä¿è¯å…¶ä»–çº¿ç¨‹èƒ½å¤ŸåŠæ—¶çœ‹åˆ°æœ€æ–°çš„å€¼ã€‚</p>

<p>ä½†æ˜¯å¦‚æœä½¿ç”¨äº† <code class="language-plaintext highlighter-rouge">volatile</code> ä¿®é¥° <code class="language-plaintext highlighter-rouge">stop</code> å˜é‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯å½“ä¸»çº¿ç¨‹ä¿®æ”¹äº† stop çš„å€¼åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹åˆ°æœ€æ–°çš„å€¼ï¼Œå¹¶æ ¹æ®æœ€æ–°çš„å€¼æ¥æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚è¿™æ˜¯å› ä¸º volatile å…³é”®å­—å¯ä»¥å¼ºåˆ¶è®©ç¼–è¯‘å™¨æ¯æ¬¡éƒ½ä»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡çš„å€¼ï¼Œå¹¶ä¸”ç¦æ­¢å¯¹å…¶è¿›è¡Œé‡æ’åºã€‚</p>

<h2 id="é‡å…¥é”">é‡å…¥é”</h2>

<p>é‡å…¥é”æ˜¯ä¸€ç§å¯ä»¥è¢«åŒä¸€ä¸ªçº¿ç¨‹å¤šæ¬¡è·å–çš„é”ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä¸€ä¸ªçº¿ç¨‹å·²ç»æŒæœ‰äº†é”ï¼Œå®ƒå¯ä»¥å†æ¬¡è¯·æ±‚è·å–é”è€Œä¸ä¼šè¢«é˜»å¡ã€‚é‡å…¥é”å¯ä»¥é¿å…æ­»é”çš„å‘ç”Ÿï¼Œä¹Ÿå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>

<p>Java ä¸­æä¾›äº†ä¸€ä¸ªé‡å…¥é”çš„å®ç°ç±»ï¼š<code class="language-plaintext highlighter-rouge">ReentrantLock</code>ï¼Œå®ƒå®ç°äº† <code class="language-plaintext highlighter-rouge">Lock</code> æ¥å£ï¼Œæä¾›äº†åŠ é”å’Œé‡Šæ”¾é”çš„æ–¹æ³•ã€‚ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">ReentrantLock</code> æ—¶ï¼Œéœ€è¦åœ¨ try-finally å—ä¸­æ‰‹åŠ¨è°ƒç”¨ <code class="language-plaintext highlighter-rouge">lock ()</code> å’Œ <code class="language-plaintext highlighter-rouge">unlock ()</code> æ–¹æ³•æ¥ä¿è¯é”çš„æ­£ç¡®è·å–å’Œé‡Šæ”¾ã€‚</p>

<p>ä¸¾ä¸ªä¾‹å­å§ï¼Œå‡è®¾æœ‰ä¸€ä¸ªé“¶è¡Œè´¦æˆ·ç±» Accountï¼Œå®ƒæœ‰ä¸€ä¸ªä½™é¢å±æ€§ balance å’Œä¸€ä¸ªè½¬è´¦æ–¹æ³• transfer ()ï¼Œä¸ºäº†ä¿è¯è½¬è´¦æ“ä½œçš„åŸå­æ€§å’Œçº¿ç¨‹å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">ReentrantLock</code> æ¥å¯¹ <code class="language-plaintext highlighter-rouge">transfer ()</code> æ–¹æ³•è¿›è¡ŒåŒæ­¥æ§åˆ¶ã€‚
ä»£ç å¦‚ä¸‹ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.concurrent.locks.ReentrantLock</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">balance</span><span class="o">;</span> <span class="c1">// ä½™é¢</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ReentrantLock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ReentrantLock</span><span class="o">();</span> <span class="c1">// é‡å…¥é”</span>

    <span class="kd">public</span> <span class="nf">Account</span><span class="o">(</span><span class="kt">int</span> <span class="n">balance</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">balance</span> <span class="o">=</span> <span class="n">balance</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">transfer</span><span class="o">(</span><span class="nc">Account</span> <span class="n">target</span><span class="o">,</span> <span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span> <span class="c1">// è·å–é”</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">balance</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// å¦‚æœä½™é¢è¶³å¤Ÿ</span>
                <span class="n">balance</span> <span class="o">-=</span> <span class="n">amount</span><span class="o">;</span> <span class="c1">// æ‰£é™¤è½¬å‡ºé‡‘é¢</span>
                <span class="n">target</span><span class="o">.</span><span class="na">balance</span> <span class="o">+=</span> <span class="n">amount</span><span class="o">;</span> <span class="c1">// å¢åŠ è½¬å…¥é‡‘é¢</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span> <span class="c1">// é‡Šæ”¾é”</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœä¸ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">ReentrantLock</code> æ¥å¯¹ <code class="language-plaintext highlighter-rouge">transfer ()</code> æ–¹æ³•è¿›è¡ŒåŒæ­¥æ§åˆ¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼šå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ªè´¦æˆ·å¯¹è±¡æ‰§è¡Œè½¬è´¦æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½™é¢ä¸æ­£ç¡®æˆ–è€…æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚è¿™æ˜¯å› ä¸ºè½¬è´¦æ“ä½œæ¶‰åŠåˆ°å¤šä¸ªå…±äº«å˜é‡ï¼ˆbalance å’Œ target.balanceï¼‰çš„è¯»å†™æ“ä½œï¼Œå¹¶ä¸”è¿™äº›æ“ä½œä¸æ˜¯åŸå­æ€§çš„ã€‚</p>

<p>ä½†æ˜¯å¦‚æœä½¿ç”¨äº† <code class="language-plaintext highlighter-rouge">ReentrantLock</code> æ¥å¯¹ <code class="language-plaintext highlighter-rouge">transfer ()</code> æ–¹æ³•è¿›è¡ŒåŒæ­¥æ§åˆ¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè½¬è´¦æ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½åŒæ—¶æ‰§è¡Œè¯¥æ“ä½œï¼Œå¹¶ä¸”è¯¥æ“ä½œèƒ½å¤Ÿå®Œæ•´åœ°æ‰§è¡Œè€Œä¸ä¼šè¢«æ‰“æ–­ã€‚è¿™æ˜¯å› ä¸º <code class="language-plaintext highlighter-rouge">ReentrantLock</code> å¯ä»¥å®ç°äº’æ–¥è®¿é—®å…±äº«èµ„æºï¼Œå¹¶ä¸”ä¿è¯æ“ä½œçš„é¡ºåºæ€§å’ŒåŸå­æ€§ã€‚</p>

<h2 id="åŸå­ç±»å‹å˜é‡">åŸå­ç±»å‹å˜é‡</h2>

<p>Java é‡Œçš„åŸå­ç±»å‹å˜é‡æ˜¯ä¸€ç§å¯ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¿è¯åŸå­æ€§æ“ä½œçš„å˜é‡ç±»ï¼Œå®ƒä»¬ä½¿ç”¨äº† CASï¼ˆCompare And Swapï¼‰ç®—æ³•æ¥å®ç°æ— é”çš„å¹¶å‘æ§åˆ¶ã€‚</p>

<p>åŸå­ç±»å‹å˜é‡æœ‰ä»¥ä¸‹å‡ ç§åˆ†ç±»ï¼š</p>

<ul>
  <li>æ ‡é‡åŸå­å˜é‡ç±»ï¼šæ”¯æŒå¯¹ intï¼Œlong å’Œ boolean ç­‰åŸºæœ¬æ•°æ®ç±»å‹çš„æ“ä½œï¼Œä¾‹å¦‚ AtomicIntegerï¼ŒAtomicLong å’Œ AtomicBooleanã€‚</li>
  <li>åŸå­æ•°ç»„ç±»ï¼šæ”¯æŒå¯¹ intï¼Œlong å’Œå¼•ç”¨ç±»å‹çš„æ•°ç»„å…ƒç´ è¿›è¡ŒåŸå­æ€§æ›´æ–°ï¼Œä¾‹å¦‚ AtomicIntegerArrayï¼ŒAtomicLongArray å’Œ AtomicReferenceArrayã€‚</li>
  <li>åŸå­å­—æ®µæ›´æ–°ç¨‹åºç±»ï¼šæ”¯æŒä½¿ç”¨åå°„ä»¥åŸå­æ–¹å¼æ›´æ–°ç±»çš„æ˜“å¤±æ€§å­—æ®µï¼Œä¾‹å¦‚ AtomicLongFieldUpdaterï¼ŒAtomicIntegerFieldUpdater å’Œ AtomicReferenceFieldUpdaterã€‚</li>
  <li>åŸå­å¤åˆå˜é‡ç±»ï¼šæ”¯æŒå¯¹å¤šä¸ªå˜é‡è¿›è¡ŒåŸå­æ€§æ›´æ–°ï¼Œä¾‹å¦‚ AtomicStampedReference å’Œ AtomicMarkableReferenceã€‚
ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ AtomicInteger çš„ä¾‹å­ï¼š</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.concurrent.atomic.AtomicInteger</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AtomicCounter</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">AtomicInteger</span> <span class="n">value</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AtomicInteger</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">increment</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">incrementAndGet</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">decrement</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">decrementAndGet</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-hourglass readingtime">é˜…è¯»æ—¶é—´ï¼š11 mins</span>
			<span class="icon-book readingtime">å­—æ•°ï¼š4213</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/java/2022/04/22/Java-threadSynchronization.html">
				
				<span class="icon-angle-double-right">é˜…è¯»å…¨æ–‡&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/java/2022/04/22/Java-ThreadSynchronization.html">
          <h2 class="post-title">æµ…è°ˆ Java çº¿ç¨‹åŒæ­¥æŠ€æœ¯</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Java">Java</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Apr 22, 2022
		  </div>
		</div>
		
        <div class="post"><p>Java é‡Œå®ç°çº¿ç¨‹é—´çš„åŒæ­¥æœ‰å¤šç§æ–¹æ³•ï¼Œæ¯”å¦‚ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">synchronized</code> å…³é”®å­—ï¼Œ<code class="language-plaintext highlighter-rouge">wait</code> å’Œ <code class="language-plaintext highlighter-rouge">notify</code>ï¼Œ<code class="language-plaintext highlighter-rouge">volatile</code> å˜é‡ï¼Œé‡å…¥é”ï¼Œå±€éƒ¨å˜é‡ï¼Œé˜»å¡é˜Ÿåˆ—æˆ–è€…åŸå­ç±»å‹å˜é‡ç­‰ã€‚</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-hourglass readingtime">é˜…è¯»æ—¶é—´ï¼š11 mins</span>
			<span class="icon-book readingtime">å­—æ•°ï¼š4213</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/java/2022/04/22/Java-ThreadSynchronization.html">
				
				<span class="icon-angle-double-right">é˜…è¯»å…¨æ–‡&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/git/2022/03/29/Github-git-command.html">
          <h2 class="post-title">Git commands and usage tips</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Git">Git</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Mar 29, 2022
		  </div>
		</div>
		
        <div class="post"><p><img src="\assets\image\github-git-command-01.jpg" alt="git-command-01" style="zoom:100%;" /></p>

<p>Git is a powerful version control tool. I would even say itâ€™s one of the best. However, being powerful sometimes means being complex in terms of functionality. Git has a lot of commands. The good thing is that you can do everything you want with them, the bad thing is that you need to remember them. Here, Iâ€™ll write down the commands that Iâ€™ll use often to keep better track of them and make them easier to search.ğŸ˜‰</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-hourglass readingtime">é˜…è¯»æ—¶é—´ï¼š16 mins</span>
			<span class="icon-book readingtime">å­—æ•°ï¼š6028</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/git/2022/03/29/Github-git-command.html">
				
				<span class="icon-angle-double-right">é˜…è¯»å…¨æ–‡&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li><li class="post-wrapper"><a class="post-link" href="/others/2022/02/15/Others-online-tools.html">
          <h2 class="post-title">ç”Ÿäº§åŠ›å·¥å…·</h2>
        </a>
		
        <div class="post-meta">
          <ul class="post-categories post-categories-padding"><a href="/category#Others">Others</a></ul>
          <div class="post-date-right-align">
            <i class="icon-calendar"></i>
            Feb 15, 2022
		  </div>
		</div>
		
        <div class="post"><p><img src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/image/others-online-tools-01.jpg" alt="others-online-tools-01" class="center-image" />
â€œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â€ï¼Œä½¿ç”¨ä¸€æ¬¾å¥½çš„å·¥å…·ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬å·¥ä½œä¸­äº‹åŠåŠŸå€ï¼Œæå‡æ•ˆç‡ã€‚è¿™ç¯‡æ–‡ç« è®°å½•äº†æˆ‘æ—¥å¸¸ä½¿ç”¨çš„ä¸€äº›æˆ‘è®¤ä¸ºç›¸å½“ä¸é”™çš„å·¥å…·å’Œè½¯ä»¶ã€‚</p>
</div>



<footer>
    <div class="readingtime-meta">
	    <div class = "readingtime-box">
			
			<span class="icon-hourglass readingtime">é˜…è¯»æ—¶é—´ï¼š17 mins</span>
			<span class="icon-book readingtime">å­—æ•°ï¼š6490</span>
			
		</div>
		<div>
			<a class="readingtime-categories" href="/others/2022/02/15/Others-online-tools.html">
				
				<span class="icon-angle-double-right">é˜…è¯»å…¨æ–‡&nbsp;</span>
				
			</a>
		</div>
	</div>
</footer> </li></div>
  <!-- <p class="feed-subscribe"><svg class="svg-icon orange">
		<use xlink:href="/assets/minima-social-icons.svg#rss"></use>
	</svg><a href="/feed.xml">Subscribe</a></p> --><div class="post-container">
  <!-- put paginator here -->
  <!-- Pagination links -->

<div class="pagination">
  
  <!--do not add button here -->
  

  
    
      <span class="pagination-box pagination-box-hit">1</span>
    

    
      <a class="pagination-box pagination-box-idle" href="/blog/page2/">2</a>
    

    
      <a class="pagination-box pagination-box-idle" href="/blog/page3/">3</a>
    

    
      <a class="pagination-box pagination-box-idle" href="/blog/page4/">4</a>
    

    
      <a class="pagination-box pagination-box-idle" href="/blog/page5/">5</a>
    

    
      <a class="pagination-box pagination-box-idle" href="/blog/page6/">6</a>
    

    
      <a class="pagination-box pagination-box-idle" href="/blog/page7/">7</a>
    

    
      <a class="pagination-box pagination-box-idle" href="/blog/page8/">8</a>
    

  
  
    <a class="pagination-box pagination-box-idle" href="/blog/page2/"> &raquo;</a>
  
</div>

  <!-- put footer here -->
  <div class ="footer" style="margin-top:30px">
    Copyright Â© 2024 David Dong's Blog  |  <a href = "https://github.com/gangdong/gangdong.github.io"> Github Project </a> powered by Jekyll<div>
     <span class="icon-user"> <span class="web-statistics" id="busuanzi_value_site_uv"></span> </span>
   </div></div>
</div>

	<script async src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/js/simple-jekyll-search.min.js"></script>
	<script async src="https://cdn.jsdelivr.net/gh/gangdong/gangdong.github.io@dev/assets/js/search.js"></script>

      </section>
    </main><script async src="https://www.googletagmanager.com/gtag/js?id=G-3MXGF3F8QN"></script>
      <script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-3MXGF3F8QN');
	</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body>
</html>
