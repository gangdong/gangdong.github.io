<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="http://localhost:4000/daviddong.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/daviddong.github.io/" rel="alternate" type="text/html" /><updated>2021-03-30T13:32:29+08:00</updated><id>http://localhost:4000/daviddong.github.io/feed.xml</id><title type="html">David Dongâ€™s Blog</title><subtitle>This is DavidDong's blog. This blog recorded the time of my life and learning from it. Welcome to visit! 
</subtitle><author><name>David Dong</name></author><entry><title type="html">Display mathematics formula in blog with MathJax</title><link href="http://localhost:4000/daviddong.github.io/blog/2021/03/20/Blog-mathjax.html" rel="alternate" type="text/html" title="Display mathematics formula in blog with MathJax" /><published>2021-03-20T11:11:12+08:00</published><updated>2021-03-20T11:11:12+08:00</updated><id>http://localhost:4000/daviddong.github.io/blog/2021/03/20/Blog-mathjax</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/blog/2021/03/20/Blog-mathjax.html">&lt;p&gt;When writing posts, I need to display mathematics formula sometimes. I write posts with Markdown, I donâ€™t want to save the formula into an image and load the image in markdown. It is better write the Latex formula in markdown file directly. MathJax helped me do it. This article will introduce what MathJax is and how to use MathJax.&lt;/p&gt;

&lt;h2 id=&quot;what-is-mathjax&quot;&gt;What is MathJax?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;MathJax is an open-source JavaScript display engine for LaTeX, MathML, and AsciiMath notation that works in all modern browsers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This is the definition of the MathJax in &lt;a href=&quot;https://www.mathjax.org/&quot;&gt;MathJax official website&lt;/a&gt;, more information can be found from there.&lt;/p&gt;

&lt;p&gt;To me, it brought some benefits for writing blog.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;No need plugin support in Jekyll. I donâ€™t have to worry about that it cannot be implemented when deploying the site at Github Pages for security checking.&lt;/li&gt;
  &lt;li&gt;Unlike using bitmaps image to display, it is text editing and transforms the mathematics formula to HTML or SVG, so it is workable for zoom scale and is suitable to display under different size screen.&lt;/li&gt;
  &lt;li&gt;I can write the mathematics formula in markdown with plain text just by following the syntax of LaTex/TeX.&lt;/li&gt;
  &lt;li&gt;Friendly to new user, you can quickly use it even you have no any knowledge about it.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Moreover, looks MathJax has become into the most popular solution for rendering the Latex mathematics formula in the web application.&lt;/p&gt;

&lt;p&gt;At least, I think so.&lt;/p&gt;

&lt;h2 id=&quot;how-to-implement&quot;&gt;How to implement?&lt;/h2&gt;

&lt;h3 id=&quot;including-mathjax-in-a-web-page&quot;&gt;Including MathJax in a web page&lt;/h3&gt;
&lt;p&gt;As I said, one of the benefit of MathJax is that you donâ€™t need to install any plugin to implement it, just introduce a piece of JavaScript code into your pageâ€™s HTML.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I added above snippet into my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default.html&lt;/code&gt;, you can insert it into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;head.html&lt;/code&gt; or any pageâ€™s HTML where you want to use MathJax.&lt;/p&gt;

&lt;h3 id=&quot;configuration&quot;&gt;Configuration&lt;/h3&gt;

&lt;p&gt;Here &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TeX-MML-AM_CHTML&lt;/code&gt; is the configuration for common user case.
For more configuration, can find at &lt;a href=&quot;https://docs.mathjax.org/en/latest/web/configuration.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;MathJax offers a global object named MathJax that contains configuration data for the various components of MathJax.&lt;/p&gt;

&lt;p&gt;For TeX or LaTeX input component , it has two types. One is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;in-line mathematics&lt;/code&gt;(display in paragraph) and the other is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;displayed mathematics&lt;/code&gt;(display as a single paragraph).&lt;/p&gt;

&lt;p&gt;It uses double dollar sign &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$$&lt;/code&gt; as the default math delimiters for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;displayed mathematics&lt;/code&gt;, uses the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(\...\)&lt;/code&gt; as the math delimiters for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;in-line mathematics&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Here as an example, I inserted below code snippet to add single dollar &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$&lt;/code&gt; signs as in-line math delimiters.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/x-mathjax-config&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;MathJax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Hub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tex2jax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;inlineMath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]}});&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It is better place the MathJax object in a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag just before the script that loads MathJax itself.&lt;/p&gt;

&lt;p&gt;So my last code is&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/x-mathjax-config&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;MathJax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Hub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tex2jax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;inlineMath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]}});&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;mathematics-expression-with-mathjax&quot;&gt;Mathematics expression with MathJax&lt;/h3&gt;

&lt;p&gt;I wrote below words as startup.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Hi, there,   &lt;br /&gt;
This is my first MathJax equation.  &lt;br /&gt;
When $a \ne 0$, there are two solutions to&lt;/p&gt;
  &lt;div&gt;$$ax^2 + bx + c = 0$$&lt;/div&gt;
  &lt;p&gt;and they are&lt;/p&gt;
  &lt;div&gt;$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$&lt;/div&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;write-at-the-last&quot;&gt;Write at the last&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;I found importing the MathJax snippet will slow the siteâ€™s loading speed. So I moved the MathJax snippet to the postâ€™s markdown file from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default.html&lt;/code&gt;, only use it when the post need a mathematics expression.&lt;/li&gt;
  &lt;li&gt;I am not familiar with Latex syntax and I will spend some time in learning. It is not a problem! ðŸ˜›&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;text/javascript&quot; async=&quot;&quot; src=&quot;//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML&quot;&gt;
&lt;/script&gt;

&lt;script type=&quot;text/x-mathjax-config&quot;&gt;
  MathJax.Hub.Config({tex2jax: {
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			inlineMath: [['$','$'], ['\\(','\\)']]
		}
	});
&lt;/script&gt;</content><author><name>david.dong</name></author><category term="Blog" /><category term="Blog" /><summary type="html">When writing posts, I need to display mathematics formula sometimes. I write posts with Markdown, I donâ€™t want to save the formula into an image and load the image in markdown. It is better write the Latex formula in markdown file directly. MathJax helped me do it. This article will introduce what MathJax is and how to use MathJax.</summary></entry><entry><title type="html">Display mathematics formula in blog with MathJax</title><link href="http://localhost:4000/daviddong.github.io/blog/2021/03/20/Blog-travisci.html" rel="alternate" type="text/html" title="Display mathematics formula in blog with MathJax" /><published>2021-03-20T11:11:12+08:00</published><updated>2021-03-20T11:11:12+08:00</updated><id>http://localhost:4000/daviddong.github.io/blog/2021/03/20/Blog-travisci</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/blog/2021/03/20/Blog-travisci.html">&lt;p&gt;When writing posts, I need to display mathematics formula sometimes. I write posts with Markdown, I donâ€™t want to save the formula into an image and load the image in markdown. It is better write the Latex formula in markdown file directly. MathJax helped me do it. This article will introduce what MathJax is and how to use MathJax.&lt;/p&gt;

&lt;h2 id=&quot;what-is-mathjax&quot;&gt;What is MathJax?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;MathJax is an open-source JavaScript display engine for LaTeX, MathML, and AsciiMath notation that works in all modern browsers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This is the definition of the MathJax in &lt;a href=&quot;https://www.mathjax.org/&quot;&gt;MathJax official website&lt;/a&gt;, more information can be found from there.&lt;/p&gt;

&lt;p&gt;To me, it brought some benefits for writing blog.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;No need plugin support in Jekyll. I donâ€™t have to worry about that it cannot be implemented when deploying the site at Github Pages for security checking.&lt;/li&gt;
  &lt;li&gt;Unlike using bitmaps image to display, it is text editing and transforms the mathematics formula to HTML or SVG, so it is workable for zoom scale and is suitable to display under different size screen.&lt;/li&gt;
  &lt;li&gt;I can write the mathematics formula in markdown with plain text just by following the syntax of LaTex/TeX.&lt;/li&gt;
  &lt;li&gt;Friendly to new user, you can quickly use it even you have no any knowledge about it.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Moreover, looks MathJax has become into the most popular solution for rendering the Latex mathematics formula in the web application.&lt;/p&gt;

&lt;p&gt;At least, I think so.&lt;/p&gt;

&lt;h2 id=&quot;how-to-implement&quot;&gt;How to implement?&lt;/h2&gt;

&lt;h3 id=&quot;including-mathjax-in-a-web-page&quot;&gt;Including MathJax in a web page&lt;/h3&gt;
&lt;p&gt;As I said, one of the benefit of MathJax is that you donâ€™t need to install any plugin to implement it, just introduce a piece of JavaScript code into your pageâ€™s HTML.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I added above snippet into my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default.html&lt;/code&gt;, you can insert it into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;head.html&lt;/code&gt; or any pageâ€™s HTML where you want to use MathJax.&lt;/p&gt;

&lt;h3 id=&quot;configuration&quot;&gt;Configuration&lt;/h3&gt;

&lt;p&gt;Here &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TeX-MML-AM_CHTML&lt;/code&gt; is the configuration for common user case.
For more configuration, can find at &lt;a href=&quot;https://docs.mathjax.org/en/latest/web/configuration.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;MathJax offers a global object named MathJax that contains configuration data for the various components of MathJax.&lt;/p&gt;

&lt;p&gt;For TeX or LaTeX input component , it has two types. One is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;in-line mathematics&lt;/code&gt;(display in paragraph) and the other is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;displayed mathematics&lt;/code&gt;(display as a single paragraph).&lt;/p&gt;

&lt;p&gt;It uses double dollar sign &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$$&lt;/code&gt; as the default math delimiters for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;displayed mathematics&lt;/code&gt;, uses the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(\...\)&lt;/code&gt; as the math delimiters for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;in-line mathematics&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Here as an example, I inserted below code snippet to add single dollar &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$&lt;/code&gt; signs as in-line math delimiters.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/x-mathjax-config&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;MathJax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Hub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tex2jax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;inlineMath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]}});&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It is better place the MathJax object in a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag just before the script that loads MathJax itself.&lt;/p&gt;

&lt;p&gt;So my last code is&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/x-mathjax-config&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;MathJax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Hub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tex2jax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;inlineMath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]}});&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;mathematics-expression-with-mathjax&quot;&gt;Mathematics expression with MathJax&lt;/h3&gt;

&lt;p&gt;I wrote below words as startup.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Hi, there,   &lt;br /&gt;
This is my first MathJax equation.  &lt;br /&gt;
When $a \ne 0$, there are two solutions to&lt;/p&gt;
  &lt;div&gt;$$ax^2 + bx + c = 0$$&lt;/div&gt;
  &lt;p&gt;and they are&lt;/p&gt;
  &lt;div&gt;$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$&lt;/div&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;write-at-the-last&quot;&gt;Write at the last&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;I found importing the MathJax snippet will slow the siteâ€™s loading speed. So I moved the MathJax snippet to the postâ€™s markdown file from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default.html&lt;/code&gt;, only use it when the post need a mathematics expression.&lt;/li&gt;
  &lt;li&gt;I am not familiar with Latex syntax and I will spend some time in learning. It is not a problem! ðŸ˜›&lt;/li&gt;
&lt;/ul&gt;

&lt;script type=&quot;text/javascript&quot; async=&quot;&quot; src=&quot;//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML&quot;&gt;
&lt;/script&gt;

&lt;script type=&quot;text/x-mathjax-config&quot;&gt;
  MathJax.Hub.Config({tex2jax: {
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			inlineMath: [['$','$'], ['\\(','\\)']]
		}
	});
&lt;/script&gt;</content><author><name>david.dong</name></author><category term="Blog" /><category term="Blog" /><summary type="html">When writing posts, I need to display mathematics formula sometimes. I write posts with Markdown, I donâ€™t want to save the formula into an image and load the image in markdown. It is better write the Latex formula in markdown file directly. MathJax helped me do it. This article will introduce what MathJax is and how to use MathJax.</summary></entry><entry><title type="html">Use jekyll-toc plugin on Github Pages</title><link href="http://localhost:4000/daviddong.github.io/blog/github/2021/03/14/Blog-Jekyll-toc-plugin.html" rel="alternate" type="text/html" title="Use jekyll-toc plugin on Github Pages" /><published>2021-03-14T21:11:16+08:00</published><updated>2021-03-14T21:11:16+08:00</updated><id>http://localhost:4000/daviddong.github.io/blog/github/2021/03/14/Blog-Jekyll-toc-plugin</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/blog/github/2021/03/14/Blog-Jekyll-toc-plugin.html">&lt;p&gt;Today I want to add a auto TOC function to my blog. I used to write TOC manually and it is really boring. I found a good plugin &lt;a href=&quot;https://Github.com/toshimaru/jekyll-toc&quot;&gt;jekyll-toc&lt;/a&gt; in the Github, which can fully meet my requirement.&lt;/p&gt;

&lt;h2 id=&quot;start&quot;&gt;Start&lt;/h2&gt;

&lt;p&gt;The installation is simple, I forked and installed the plugin successfully in 5 minutes.&lt;/p&gt;

&lt;p&gt;After then, I was going to separate the TOC and post contents. I designed a sidebar to show the TOC independently by placing the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{% toc %}&lt;/code&gt; tag into the sidebar.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- put sidebar! --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;post-index-container&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
	{% if page.language == 'chinese' %}
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;li&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class = &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;post-index&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;æ–‡ç« ç›®å½•&lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
	{% else %}
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;li&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class = &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;post-index&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;On this page&lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
	{% endif %}
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;li&amp;gt;&lt;/span&gt;{% toc %}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I built the code locally by Jekyll and reloaded the page.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;

&lt;p&gt;The TOC appeared, this was just what I want!&lt;/p&gt;

&lt;h2 id=&quot;i-got-a-trouble&quot;&gt;I got a trouble&lt;/h2&gt;

&lt;p&gt;Things are going really well so far, it is so easy?&lt;/p&gt;

&lt;p&gt;No, I got a trouble when I committed the change to Github repository. The site was built failed by Github Pages generator.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;The tag &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;toc&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; on line 32 &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/_layouts/post.html&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; is not a recognized Liquid tag.&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;I realized immediately that this plugin wasnâ€™t in the &lt;a href=&quot;https://pages.Github.com/versions/&quot;&gt;whitelist&lt;/a&gt; of Github Pages. I forgot that!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/blog-jekyll-toc-01.PNG&quot; alt=&quot;notification&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I have to use a trick way to skip the restriction. As above bulletin showed, I need to build the site locally and push the generated static files to my Github repository ( &lt;strong&gt;Donâ€™t use Github Pages generator build&lt;/strong&gt;).&lt;/p&gt;

&lt;h2 id=&quot;use-master-branch&quot;&gt;Use Master branch&lt;/h2&gt;

&lt;p&gt;Followed above information I checked the root path in my Github Pages, it was &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;master&lt;/code&gt; branch.&lt;/p&gt;

&lt;p&gt;So I added the site file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site/&lt;/code&gt; to the master branch and pushed to origin repository.&lt;/p&gt;

&lt;p&gt;I referred two articles&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; here.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;git add _site/
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;add static site file&quot;&lt;/span&gt;
git push origin master&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;However, it didnâ€™t work!&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;use-gh-pages-branch&quot;&gt;Use gh-pages branch&lt;/h2&gt;

&lt;p&gt;There should be something wrong with above procedure.&lt;/p&gt;

&lt;p&gt;I went back to google search for another solution.&lt;/p&gt;

&lt;p&gt;Thanks to these two articles&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;I made it clear when I build the site by Github Pages generator, it actually creates a new branch &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt; under master branch, in where it stores the static site files for external accessing. Therefore I need to create the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt; branch and place my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_site\&lt;/code&gt; to there.&lt;/p&gt;

&lt;p&gt;I changed the command as below.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; gh-pages
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; _site/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
git add _site
git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;add site files&quot;&lt;/span&gt;
git push origin gh-pages&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/blog-jekyll-toc-02.PNG&quot; alt=&quot;master-root&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;It worked this time!&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/blog-jekyll-toc-04.PNG&quot; alt=&quot;toc@sidebar&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;If you want to deploy your personal website on Github Pages with the unsupported plugins, you will need to build you site locally and create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gh-pages&lt;/code&gt; branch and upload your site file to this branch. One important point is that you should use the branch as the root, which means placing the site file into the directory directly instead of a sub-directory.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/blog-jekyll-toc-03.PNG&quot; alt=&quot;master-root&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;&quot;&gt;https://mccxj.Github.io/blog/20130127_jekyll-plugin-with-git-branch.html&lt;/a&gt; &lt;a href=&quot;&quot;&gt;https://www.cnblogs.com/ihardcoder/p/4479356.html&lt;/a&gt;Â &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.it1352.com/798173.html&quot;&gt;https://www.it1352.com/798173.html&lt;/a&gt; &lt;a href=&quot;https://www.it1352.com/798173.html&quot;&gt;https://www.cnblogs.com/pengshuo/p/5368035.html&lt;/a&gt;,Â &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name>david.dong</name></author><category term="Blog" /><category term="Github" /><category term="Blog" /><category term="Github" /><summary type="html">Today I want to add a auto TOC function to my blog. I used to write TOC manually and it is really boring. I found a good plugin jekyll-toc in the Github, which can fully meet my requirement.</summary></entry><entry><title type="html">A quick way to fix the Gitalk Error: Validation Failed</title><link href="http://localhost:4000/daviddong.github.io/blog/2021/03/08/Web-gitalk-fixing.html" rel="alternate" type="text/html" title="A quick way to fix the Gitalk Error: Validation Failed" /><published>2021-03-08T10:27:13+08:00</published><updated>2021-03-08T10:27:13+08:00</updated><id>http://localhost:4000/daviddong.github.io/blog/2021/03/08/Web-gitalk-fixing</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/blog/2021/03/08/Web-gitalk-fixing.html">&lt;p&gt;Iâ€™ve met an error &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Validation Failed (422)&lt;/code&gt; when using Gitalk in my blog.&lt;/p&gt;

&lt;p&gt;I posted a new article in my blog and found the Gitalk report such issue. My Gitalk has been working for a long time before this issue occurs. Iâ€™ve checked that the Gitalk for my other posts works normal and only the new post has issue, which means the issue should be a standalone problem that related to the post self.&lt;/p&gt;

&lt;p&gt;By searching google &lt;a href=&quot;https://github.com/gitalk/gitalk/issues/102&quot;&gt;gitalk issue #102&lt;/a&gt; I understood the problem is that the length of my new postâ€™s URL is excessive long &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(&amp;gt; 50 characters)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;For every post, the Gitalk will create an issue under your blog project repository in Github to track the comment thread. The issue id is used to form the issueâ€™s label and Gitalk uses the label to identify comment thread.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/web-gitalk-fix-01.PNG&quot; alt=&quot;example&quot; title=&quot;example&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;However the problem here is that label length is restricted to maximum 50 characters ( Not sure if it is a hidden rule or a BUG here ðŸ˜• ).&lt;/p&gt;

&lt;p&gt;In my Gitalk configuration, the issue id is set to&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;page&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;So if the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;page.url&lt;/code&gt; is too long and is beyond the restriction, the issueâ€™s label cannot be created and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Validation Failed&lt;/code&gt; error will be threw out.&lt;/p&gt;

&lt;p&gt;Since limitation is clear now, letâ€™s fix it.    &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;The straightforward way is to use a shorter URL to avoid this issue. But I donâ€™t like this restriction that blocking I write post. To convert the URL to a fixed length string looks like a better solution. Why not try hash function? The interesting thing is that I found there has already been a same solution online &lt;a href=&quot;https://blog.csdn.net/death05/article/details/83618887&quot;&gt;-&amp;gt; issue fix&lt;/a&gt;, which use the &lt;strong&gt;MD5&lt;/strong&gt; method. This method not only unifies the URL length but also differentiates them.&lt;/p&gt;

&lt;p&gt;It is good!&lt;/p&gt;

&lt;p&gt;There is workable &lt;a href=&quot;https://github.com/blueimp/JavaScript-MD5&quot;&gt;JavaScript-MD5&lt;/a&gt; lib on the Github, I folk it and the rest thing is quite simple.&lt;/p&gt;

&lt;p&gt;I add the &lt;strong&gt;MD5 JS&lt;/strong&gt; calling in my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;comments.html&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/daviddong.github.io/assets/js/md5.min.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;and reset the Gitalk id to&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;md5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Commit the change.&lt;/p&gt;

&lt;p&gt;I reopen the page and the error is gone, by checking the Gitalk issue label, it has been converted to MD5 code.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/web-gitalk-fix-02.PNG&quot; alt=&quot;example&quot; title=&quot;example&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Which means the solution is working now! ðŸ˜Š&lt;/p&gt;</content><author><name>david.dong</name></author><category term="Blog" /><category term="Blog" /><summary type="html">Iâ€™ve met an error Validation Failed (422) when using Gitalk in my blog.</summary></entry><entry><title type="html">Build TA images on different TEE</title><link href="http://localhost:4000/daviddong.github.io/android/fingerprint/2021/02/04/Fingerprint-build-ta.html" rel="alternate" type="text/html" title="Build TA images on different TEE" /><published>2021-02-04T12:21:47+08:00</published><updated>2021-02-04T12:21:47+08:00</updated><id>http://localhost:4000/daviddong.github.io/android/fingerprint/2021/02/04/Fingerprint-build-ta</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/android/fingerprint/2021/02/04/Fingerprint-build-ta.html">&lt;p&gt;This article will give a introduction on how to build TA images on different TrustZone.&lt;/p&gt;

&lt;h2 id=&quot;1-about-tee&quot;&gt;&lt;span id=&quot;1&quot;&gt;1. About TEE&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;Nowadays, any security related application must run on the TEE. TEE (Trusted Execution Environment) is able to provide a absolute-safe environment for any user security requirement. Fingerprint application as one kind of biometric authentication, it is a trusted application and must run on the TEE. Here I will take Fingerprint application as an example to introduce how to build the trusted application (TA) image.&lt;/p&gt;

&lt;p&gt;Before start, I want to use below diagram for presenting a short description on how TEE works on fingerprint application.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/fingerprint-build-ta-01.png&quot; alt=&quot;fingerprint-tee&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The main control flow, handling the various use cases, is implemented in REE (Fingerprint HAL). Images from the sensor are captured on the TEE side and managed by fingerprint library, which also coordinates data flow towards the submodules implementing various algorithms for image processing and biometric processing. Enrolled fingerprint templates are managed in a RAM database in Fingerprint TA, and encrypted before passed to REE side for persistent storage. when authentication occurred, the matcher algorithm in the TEE side will work and give the matching result to REE. The communication channel - SPI transmission is physical in TEE and normally works by calling TEE API.&lt;/p&gt;

&lt;p&gt;The software module working on TEE side are normally built into a binary file, which runs on the TEE OS as an executable application (Trusted Application). Different TEE OS can support different number of Trusted Application (TA).&lt;/p&gt;

&lt;p&gt;There are multiple commercial TEE OS on the Android platform supported by the third-part companies, some popular ones among them are QSEE, ISEE, Trusty. The following content will introduce how the fingerprint TA image is built out on these TEE OS.&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;
&lt;h2 id=&quot;2-qsee-5&quot;&gt;&lt;span id=&quot;2&quot;&gt;2. QSEE 5&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;QSEE is one TEE OS supported by Qualcomm. In android market, system running with Qualcomm platform uses the QSEE Trustzone. QSEE provides a set of SDK that help the developer to develop the TEE application and generate the image file (TA image).&lt;/p&gt;

&lt;h3 id=&quot;21-sdk-&quot;&gt;&lt;span id=&quot;2.1&quot;&gt;2.1 SDK &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;To build the TA image, we need to use QSEE SDK, which can be got from Qualcomm or ODMs. Here I use QSEE5 SDK and put it to below location in my unbuntu.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tz_qsee5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;22-code-&quot;&gt;&lt;span id=&quot;2.2&quot;&gt;2.2 Code &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Next we need to put the source code of Fingerprint TA into place that the SDK can find it and make.
In QSEE, normally there is specific location in the SDK file tree for storing the TA code.  &lt;br /&gt;
It is at path:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tz_qsee5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ssg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;securemsm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trustzone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;qsapps&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;23-build-&quot;&gt;&lt;span id=&quot;2.3&quot;&gt;2.3 Build &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;We executes the build command to make the TA code and generate the TA image.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tz_qsee5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;py&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;TZ&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;XF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CHIPSET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sdm845&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cbt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;$(FPC_CONFIG_TZ_IMAGE_NAME)&quot;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build_flags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Build process
&lt;img src=&quot;/daviddong.github.io/assets/image/fingerprint-build-ta-02.png&quot; alt=&quot;fingerprint-tee&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;24-image-&quot;&gt;&lt;span id=&quot;2.4&quot;&gt;2.4 Image &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;TA images are generated at path:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tz_qsee5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;PIL_IMAGES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SPLITBINS_WAXAANAA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;
The TA images are&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b00&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b01&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b02&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b03&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b04&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b05&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b06&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b07&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fpctzappfingerprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mdt&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h2 id=&quot;3-isee-&quot;&gt;&lt;span id=&quot;3&quot;&gt;3. ISEE &lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;There is no property TEE OS under MTK platform. It adopts the way of integrating the TEE environment of a third party. The common TEE manufacturers ISEE.&lt;/p&gt;

&lt;h3 id=&quot;31-sdk-&quot;&gt;&lt;span id=&quot;2.1&quot;&gt;3.1 SDK &lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;For ISEE SDK, it can find more details on this link &lt;a href=&quot;https://www.beanpodtech.com/%e4%b8%bb%e8%a6%81%e4%ba%a7%e5%93%81/isee-sdk/&quot;&gt;ã€ŒISEE SDKã€&lt;/a&gt;
I put the SDK into below location.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isee_sdk_270&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;32-code-&quot;&gt;&lt;span id=&quot;3.2&quot;&gt;3.2 Code &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Put the TA source code to below path&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platforms&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mt6797&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vendor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fingerprints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;33-build-&quot;&gt;&lt;span id=&quot;3.3&quot;&gt;3.3 Build &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Run command&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isee_sdk_270&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setenv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sh&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platforms&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mt6797&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vendor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fingerprints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fingerprint_ta&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;secure&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isee&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Build process
&lt;img src=&quot;/daviddong.github.io/assets/image/fingerprint-build-ta-03.png&quot; alt=&quot;fingerprint-tee&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;34-image-&quot;&gt;&lt;span id=&quot;3.4&quot;&gt;3.4 image &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;TA image is generated at path&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platforms&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mt6797&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vendor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fingerprints&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fingerprint_ta&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;secure&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isee&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7778&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c03fc30c4dd0a319ea29643d4d4b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ta&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It uses the UUID of the TA as the TA name, which is UUID.ta&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h2 id=&quot;4-trusty-&quot;&gt;&lt;span id=&quot;4&quot;&gt;4. Trusty &lt;/span&gt;&lt;/h2&gt;

&lt;p&gt;Trusty TEE is originated and supported by Google, which is integrated into the android as a secure Operating System (OS) that provides a Trusted Execution Environment (TEE).
For more details about Trusty, please refer to  &lt;a href=&quot;https://source.android.com/security/trusty&quot;&gt;ã€ŒTrusty TEEã€&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;41-sdk-&quot;&gt;&lt;span id=&quot;4.1&quot;&gt;4.1 SDK &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Find a location in your local device.
For example, I put the trusty SDK here.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trusty_sdk&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;42-code-&quot;&gt;&lt;span id=&quot;4.2&quot;&gt;4.2 Code &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Copy the TA source code to the SDK folder.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trusty_sdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;demo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;43-build-&quot;&gt;&lt;span id=&quot;4.3&quot;&gt;4.3 Build &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Run command&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trusty_sdk&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;app/demo/fpctzapp:TA&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Build process
&lt;img src=&quot;/daviddong.github.io/assets/image/fingerprint-build-ta-04.png&quot; alt=&quot;fingerprint-tee&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;44-image-&quot;&gt;&lt;span id=&quot;4.4&quot;&gt;4.4 image &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;The TA image is generated at below location after compiling completed.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trusty_sdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_tasks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;demo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fpctzapp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fpctzapp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;elf&lt;/span&gt;
&lt;span class=&quot;sr&quot;&gt;/home/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;david&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;devtools&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trusty_sdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_tasks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;demo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fpctzapp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fpctzapp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;elf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fpctzapp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;syms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;elf&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;It uses the TA name that defined at the configuration as the image name, which is TA_Name.elf. 
Such as fpctzapp.elf. The TA_Name.syms.elf is the image file that containing the symbols table which can be used for debugging purpose.&lt;/p&gt;</content><author><name>david.dong</name></author><category term="Android" /><category term="Fingerprint" /><category term="Android" /><category term="Fingerprint" /><summary type="html">This article will give a introduction on how to build TA images on different TrustZone.</summary></entry><entry><title type="html">Some useful knowledge for Fingerprint Application on Trusty TEE</title><link href="http://localhost:4000/daviddong.github.io/android/fingerprint/2020/12/02/Fingerprint-Trusty.html" rel="alternate" type="text/html" title="Some useful knowledge for Fingerprint Application on Trusty TEE" /><published>2020-12-02T22:24:12+08:00</published><updated>2020-12-02T22:24:12+08:00</updated><id>http://localhost:4000/daviddong.github.io/android/fingerprint/2020/12/02/Fingerprint-Trusty</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/android/fingerprint/2020/12/02/Fingerprint-Trusty.html">&lt;p&gt;I have completed a Android platform fingerprint application on Trusty TEE recently for my work. This page will try to give some useful information, which is a summary of my work and might be helpful for somebody who want to bring up fingerprint application on Trusty TEE.&lt;/p&gt;

&lt;h2 id=&quot;1-trusty-tee&quot;&gt;&lt;span id=&quot;1&quot;&gt;1. Trusty TEE&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;As one of the biometric authentication on Android platform, fingerprint implementation must meet android security specifications. Android uses a separated secure Operating System (OS) to guarantee the security of biometric application - we call it TEE (Trusted Execution Environment), Which runs on the same processor as the Android OS and is isolated from the rest of the system by both hardware and software. They run parallel to each other but secure OS has access to the full power of a deviceâ€™s main processor and memory but is completely isolated.&lt;/p&gt;

&lt;p&gt;There are multiple commercial TEE OS on the Android platform supported by the third-part companies, Such as QSEE, ISEE, TBase and so on. Trusty is one of them and unlike them Trusty TEE is supported by Google. Trusty TEE is trying to provide the users a reliable and free open source alternative for their Trusted Execution Environment.&lt;/p&gt;

&lt;p&gt;Google official documents provides more information about
&lt;a href=&quot;https://source.android.com/security/trusty&quot;&gt;ã€ŒTrusty TEEã€&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;2-memory-restriction&quot;&gt;&lt;span id=&quot;2&quot;&gt;2. Memory restriction&lt;/span&gt;&lt;/h2&gt;
&lt;h3 id=&quot;21-memory&quot;&gt;&lt;span id=&quot;2.1&quot;&gt;2.1 Memory&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;The total memory that Trusty TEE can provide is 32M, suggests allocate 10M memory (heap + stack + ta image) for fingerprint to use. For example, using 6M heap and 3M stack.&lt;/p&gt;
&lt;h3 id=&quot;22-buffer&quot;&gt;&lt;span id=&quot;2.2&quot;&gt;2.2 Buffer&lt;/span&gt;&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;a. The communication between CA and TA is limited in size, and the overall size is limited to 128KB, including message header. Therefore, the buffer size &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TAC_SHARED_BUFFER_SIZE&lt;/code&gt; should be less than 128K.&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;#define TAC_SHARED_BUFFER_SIZE 1024 * 120 //should not be greater than 128k&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;b. Accordingly, the actual data size that can be used for effective transmission between CA and TA is limited to&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;union&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ta_target_commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;/* ISEE may need extra room for their own header */
#if defined(ISEE)
#define MAX_CHUNK ((SECURE_BUFFER_MAX_SIZE) - (MAX_COMMAND_SIZE) - 64)
#elif defined(TOS)
#define MAX_CHUNK ((SECURE_BUFFER_MAX_SIZE) - (MAX_COMMAND_SIZE) - 4)
#else
#define MAX_CHUNK ((SECURE_BUFFER_MAX_SIZE) - (MAX_COMMAND_SIZE))
#endif&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;ul&gt;
  &lt;li&gt;c. When the data to be transferred is greater than the maximum limit, consider transferring in batches.&lt;/li&gt;
  &lt;li&gt;d. Change the size of heap and stack in the manifest file.&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;n&quot;&gt;trusty_app_manifest_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TRUSTY_APP_MANIFEST_ATTRS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trusty_app_manifest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
 
        &lt;span class=&quot;cm&quot;&gt;/* UUID : {4304bef6-36e5-4d90-94b0-1ea4cd51d40b} */&lt;/span&gt;
       &lt;span class=&quot;cm&quot;&gt;/* { 0x4304bef6, 0x36e5, 0x4d90,
        { 0x94, 0xb0, 0x1e, 0xa4, 0xcd, 0x51, 0xd4, 0x0b } }, */&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4304bef6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x36e5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4d91&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x94&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xb0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xa4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xcd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x51&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xd4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0c&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
 
     &lt;span class=&quot;cm&quot;&gt;/* optional configuration options here */&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/*apply 6M heap and 3M stack*/&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;TRUSTY_APP_CONFIG_MIN_HEAP_SIZE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;TRUSTY_APP_CONFIG_MIN_STACK_SIZE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;3-tee-communication&quot;&gt;&lt;span id=&quot;3&quot;&gt;3. TEE Communication&lt;/span&gt;&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Adopt the dynamic TA mechanism which will load TA and run TAâ€™s main function when CA calls function &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;connect()&lt;/code&gt;. When CA calls &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;disconnect()&lt;/code&gt; the TA process exits. Therefore, in a life cycle, there is no  need to connect or disconnect each IPC communication.&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;There are many IPC communications between CA and TA. Every time IPC communication, the buffer received and sent by CA needs to be reallocated. The same buffer should not be used by IPC multiple times. In our code this method has already been implemented.&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;Trusty TEE provides 2 ports for communication, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secure port&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;non-secure port&lt;/code&gt;. &lt;br /&gt;
 &lt;strong&gt;Secure port&lt;/strong&gt; - for other TA app access.&lt;br /&gt;
 &lt;strong&gt;Non secure port&lt;/strong&gt; - for CA access TA app.&lt;br /&gt;
 For fingerprint, it needs to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;non-secure port&lt;/code&gt; and if has payment requirement, needs to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;secure port&lt;/code&gt;.&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;Should define the same port name between CA and TA, An example that we are using â€œcom.android.trusty.fpctzappâ€.&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;Should use unique uuid to differentiate with other fingerprint vendor.&lt;br /&gt;&lt;/li&gt;
  &lt;li&gt;About IPC: the Trusty APIs use&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;n&quot;&gt;send_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;get_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;read_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;put_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;to send/retrieve message between CA and TA, the calling sequence should be correct. One lesson learn in my software bring up is that the communication was failed after executed one time successful communication. The communication was hang up after then and TA wasnâ€™t able to get the message from CA. The failure was due to missing the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;put_msg()&lt;/code&gt; calling after executed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;read_msg()&lt;/code&gt;.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handle_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tzapp_chan_ctx_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;handle_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;cm&quot;&gt;/* get message info */&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ipc_msg_info_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;uint8_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ERR_NO_MSG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NO_ERROR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* no new messages */&lt;/span&gt;
 
&lt;span class=&quot;c1&quot;&gt;// fatal error&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NO_ERROR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;LOGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Trusty: failed (%ld) to get_msg for chan (%d), closing connection&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;c1&quot;&gt;//MessageDeleter md(chan, msg_inf.id);&lt;/span&gt;
 
&lt;span class=&quot;c1&quot;&gt;// allocate msg_buf, with one extra byte for null-terminator&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint8_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;malloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;LOGD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Trusty: handle_msg msg_inf.len = %d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;LOGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Trusty: msg_buf failed to malloc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ERR_NO_MEMORY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;cm&quot;&gt;/* read msg content */&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iovec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iov&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ipc_msg_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iov&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
 
&lt;span class=&quot;n&quot;&gt;memset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;put_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// change to put_msg more early&lt;/span&gt;
 
&lt;span class=&quot;c1&quot;&gt;// fatal error&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;LOGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Trusty: failed to read msg (%ld)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;goto&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;LOGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Trusty: invalid message of size (%ld)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ERR_NOT_VALID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;goto&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rc_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NO_ERROR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;LOGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Trusty: failed (%d) to put_msg for chan (%d)&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;kt&quot;&gt;int32_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rsp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rsp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 
&lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;send_response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg_inf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rsp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;out:&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;free&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg_buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;4-spi-&quot;&gt;&lt;span id=&quot;4&quot;&gt;4. SPI &lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;It is related to hardware platform, on Spreadtrum SC9863, it doesnâ€™t need to configure SPI and will only use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ioctl()&lt;/code&gt; for transmission.&lt;/p&gt;

&lt;h2 id=&quot;5-others&quot;&gt;&lt;span id=&quot;5&quot;&gt;5. Others&lt;/span&gt;&lt;/h2&gt;

&lt;h3 id=&quot;51-how-to-build-&quot;&gt;&lt;span id=&quot;5.1&quot;&gt;5.1 How to build ?&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span id=&quot;5.1.1&quot;&gt;&lt;strong&gt;5.1.1 Toolchain&lt;/strong&gt;&lt;/span&gt; &lt;br /&gt;
It is recommended to use the arm-eabi-4.8 tool chain of Android code package:&lt;br /&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;:&amp;lt;AOSP&amp;gt;/prebuilts/gcc/linux-x86/arm/arm-eabi-4.8/bin&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.1.2&quot;&gt;&lt;strong&gt;5.1.2 Build&lt;/strong&gt;&lt;/span&gt;  &lt;br /&gt;
put the TA code fpctzapp into SDK app/demo/ folder.&lt;br /&gt;
run command &lt;br /&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;M&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;app/demo/fpctzapp:TA&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.1.3&quot;&gt;&lt;strong&gt;5.1.3 Output Image&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
output two image files fpctzapp.elf and fpctzapp.syms.elf (which contains symbol table for debug purpose)&lt;/p&gt;

&lt;h3 id=&quot;52-tools-&quot;&gt;&lt;span id=&quot;5.2&quot;&gt;5.2 Tools &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span id=&quot;5.2.1&quot;&gt;&lt;strong&gt;5.2.1 uuidgen&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
Output two image files &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fpctzapp.elf&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fpctzapp.syms.elf&lt;/code&gt; (which contains symbol table for debug purpose)&lt;br /&gt;
&lt;span id=&quot;5.2.2&quot;&gt;&lt;strong&gt;5.2.2 addr2line&lt;/strong&gt;&lt;/span&gt; &lt;br /&gt;
To find the line number of error occurrence from symbol table. In the&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;bsp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toolchain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prebuilts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gcc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;linux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eabi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;4.8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;folder&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.2.3&quot;&gt;&lt;strong&gt;5.2.3 signta.py&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
Signature tool for signing the TA image. In the&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;vendor/sprd/proprietories-source/packimage_scripts/signimage/dynamicTA/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;python signta.py &lt;span class=&quot;nt&quot;&gt;--uuid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;UUID&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--key&lt;/span&gt; â€œprivatekey.pemâ€ &lt;span class=&quot;nt&quot;&gt;--in&lt;/span&gt; â€œTA image name without signedâ€ &lt;span class=&quot;nt&quot;&gt;--out&lt;/span&gt; â€œsigned TA image nameâ€.&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;command for signature.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;python signta.py &lt;span class=&quot;nt&quot;&gt;--uuid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;UUID&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--key&lt;/span&gt; â€œprivatekey.pemâ€ &lt;span class=&quot;nt&quot;&gt;--in&lt;/span&gt; â€œTA image name without signedâ€ &lt;span class=&quot;nt&quot;&gt;--out&lt;/span&gt; â€œsigned TA image nameâ€&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;53-logs-&quot;&gt;&lt;span id=&quot;5.3&quot;&gt;5.3 Logs &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span id=&quot;5.3.1&quot;&gt;&lt;strong&gt;5.3.1 TA load successfully&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;68.183207&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;246&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;trusty: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ta_manager_wait_load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;382&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ta_manager_wait_load&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;trusty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fpctzapp&lt;/span&gt; 
 &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;68.185949&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c4&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;246&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;trusty: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ta_manager_write_ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;485&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;ta_manager_write_ta: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ta!&lt;/span&gt; 
 &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;68.188528&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c0&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;181&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;trusty: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ta_manager_write_ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;573&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ta_manager_write_ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;trusty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fpctzapp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accomplished!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.3.2&quot;&gt;&lt;strong&gt;5.3.2 Failure with TA wasnâ€™t signed or signatue wasnâ€™t match&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;30.866766&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c1&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;trusty: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ta_manager_write_ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;538&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;ta_manager_write_ta: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ta!&lt;/span&gt; 
 &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;30.999062&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c0&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;trusty: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ta_manager_handle_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;760&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ta_manager_handle_request&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.3.3&quot;&gt;&lt;strong&gt;5.3.3 TA APP wasnâ€™t running properly, CA lost communication&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt; libtrusty: tipc_connect: can&lt;span class=&quot;s1&quot;&gt;'t connect to tipc service &quot;com.android.trusty.fpctzapp&quot; (err=107)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name>david.dong</name></author><category term="Android" /><category term="Fingerprint" /><category term="Android" /><category term="Fingerprint" /><summary type="html">I have completed a Android platform fingerprint application on Trusty TEE recently for my work. This page will try to give some useful information, which is a summary of my work and might be helpful for somebody who want to bring up fingerprint application on Trusty TEE.</summary></entry><entry><title type="html">åˆ©ç”¨Microsoft WDKå·¥å…·ç”Ÿæˆæ•°å­—ç­¾å</title><link href="http://localhost:4000/daviddong.github.io/security/windows/2020/07/23/Security-signature-02.html" rel="alternate" type="text/html" title="åˆ©ç”¨Microsoft WDKå·¥å…·ç”Ÿæˆæ•°å­—ç­¾å" /><published>2020-07-23T18:24:12+08:00</published><updated>2020-07-23T18:24:12+08:00</updated><id>http://localhost:4000/daviddong.github.io/security/windows/2020/07/23/Security-signature-02</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/security/windows/2020/07/23/Security-signature-02.html">&lt;p&gt;çœ‹è¿‡æˆ‘è¿™ä¸€ç¯‡æ–‡ç«  &lt;a href=&quot;/daviddong.github.io/others/2020/07/06/Others-signature.html&quot;&gt;ã€Œæµ…è°ˆæ•°å­—ç­¾åã€&lt;/a&gt; çš„è¯»è€…åº”è¯¥è®°å¾—ï¼Œåœ¨è¿™ç¯‡æ–‡ç« çš„æœ«å°¾é—ç•™äº†ä¸€ä¸ªé—®é¢˜ â€” &lt;strong&gt;åœ¨windowså¹³å°ä¸‹å¦‚ä½•åˆ©ç”¨Microsoftæä¾›çš„å·¥å…·æ¥ç”Ÿæˆæ•°å­—ç­¾å&lt;/strong&gt;ã€‚æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä¼šå¯¹è¿™ä¸ªé—®é¢˜åšä¸€ä¸ªè¯´æ˜Žï¼Œå¹¶å¼•ç”¨ä¸€ä¸ªä¾‹å­æ¥ä»‹ç»ç­¾åçš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;1-ç›¸å…³å·¥å…·&quot;&gt;&lt;span id=&quot;5&quot;&gt;1. ç›¸å…³å·¥å…·&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘å…ˆæŠŠå’Œç­¾åç›¸å…³çš„å·¥å…·ç½—åˆ—å‡ºæ¥ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å·¥å…·&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;makecert.exe&lt;/td&gt;
      &lt;td&gt;ä½¿ç”¨è¿™ä¸ªå·¥å…·æ¥ç”Ÿæˆæµ‹è¯•ç”¨çš„è¯ä¹¦&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cert2spc.exe&lt;/td&gt;
      &lt;td&gt;ä½¿ç”¨ cert2spc.exe å°†å…¬é’¥è¯ä¹¦è½¬æ¢ä¸ºè½¯ä»¶å‘å¸ƒè€…è¯ä¹¦ï¼Œå³spcæ–‡ä»¶&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pvk2pfx.exe&lt;/td&gt;
      &lt;td&gt;ä½¿ç”¨ pvk2pfx.exe å°†å…¬é’¥è¯ä¹¦å’Œç§é’¥è¯ä¹¦åˆå¹¶æˆä¸€ä¸ªPFXæ ¼å¼çš„è¯ä¹¦æ–‡ä»¶&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;inf2cat.exe&lt;/td&gt;
      &lt;td&gt;é©±åŠ¨å¼€å‘ä¼šç”¨åˆ°ï¼Œè¯¥å·¥å…·ç¡®å®šé©±åŠ¨ç¨‹åºåŒ…çš„ INF æ–‡ä»¶æ˜¯å¦å¯ä»¥é’ˆå¯¹æŒ‡å®šçš„ Windows ç‰ˆæœ¬åˆ—è¡¨è¿›è¡Œæ•°å­—ç­¾åã€‚å¦‚æžœå¯ä»¥ï¼Œé‚£ä¹ˆ Inf2Cat.exe ä¼šç”Ÿæˆé€‚ç”¨äºŽæŒ‡å®š Windows ç‰ˆæœ¬çš„æœªç­¾åçš„ç›®å½•æ–‡ä»¶&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;signtool.exe&lt;/td&gt;
      &lt;td&gt;æ•°å­—ç­¾ååˆ¶ä½œå·¥å…·,åˆ¶ä½œæ•°å­—ç­¾åå’ŒéªŒè¯&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;2-åˆ¶ä½œæµç¨‹&quot;&gt;&lt;span id=&quot;6&quot;&gt;2. åˆ¶ä½œæµç¨‹&lt;/span&gt;&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;ä½¿ç”¨ Inf2Cat.exe å°†INFè½¬æˆCAT ç›®å½•æ–‡ä»¶ï¼ˆé’ˆå¯¹é©±åŠ¨å¼€å‘ï¼Œéžé©±åŠ¨ç¨‹åºå¯è·³è¿‡è¿™æ­¥ï¼‰&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ makecert.exe åˆ¶ä½œè‡ªå·±çš„æ ¹è¯ä¹¦&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ cert2spc.exe å°†å…¬é’¥è¯ä¹¦è½¬æ¢ä¸ºè½¯ä»¶å‘å¸ƒè€…è¯ä¹¦ï¼Œå³spcæ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ pvk2pfx.exe å°†å…¬é’¥è¯ä¹¦å’Œç§é’¥è¯ä¹¦åˆå¹¶æˆä¸€ä¸ªPFXæ ¼å¼çš„è¯ä¹¦æ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ signtool.exe ç­¾å&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ signtool.exe éªŒè¯ç­¾å&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;3-ä¸¾ä¾‹&quot;&gt;&lt;span id=&quot;7&quot;&gt;3. ä¸¾ä¾‹&lt;/span&gt;&lt;/h2&gt;

&lt;p&gt;ä¸‹é¢æˆ‘å°±ä»¥ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;31-ç”Ÿæˆç›®å½•æ–‡ä»¶cat&quot;&gt;&lt;span id=&quot;8&quot;&gt;3.1 ç”Ÿæˆç›®å½•æ–‡ä»¶ï¼ˆ*.catï¼‰&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;åˆ©ç”¨ Inf2Cat.exe å°†INF è½¬æ¢ä¸º CAT ç›®å½•æ–‡ä»¶è¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘åœ¨è¿™ä¸€ç¯‡æ–‡ç«  &lt;a href=&quot;/daviddong.github.io/others/2020/07/09/Others-inf2cat.html&quot;&gt;Inf2Cat å·¥å…·ä½¿ç”¨&lt;/a&gt; ä¸­å·²ç»åšè¿‡ä»‹ç»ã€‚è¿™é‡Œä¸åœ¨è¿›è¡Œè¯´æ˜Žã€‚&lt;/p&gt;

&lt;h3 id=&quot;32-ç”Ÿæˆæ•°å­—è¯ä¹¦&quot;&gt;&lt;span id=&quot;9&quot;&gt;3.2 ç”Ÿæˆæ•°å­—è¯ä¹¦&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;makecert.exe æ˜¯ä¸€ç§è¯ä¹¦åˆ›å»ºå·¥å…·ï¼Œç”Ÿæˆä»…ç”¨äºŽæµ‹è¯•ç›®çš„çš„ &lt;a href=&quot;/daviddong.github.io/others/2020/07/06/Others-signature.html#11&quot;&gt;X.509&lt;/a&gt; è¯ä¹¦ã€‚æ­¤å·¥å…·å°†å¯†é’¥å¯¹ä¸ŽæŒ‡å®šå‘è¡Œè€…çš„åç§°ç›¸å…³è”ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª X.509 è¯ä¹¦ï¼Œè¯¥è¯ä¹¦å°†ç”¨æˆ·æŒ‡å®šçš„åç§°ç»‘å®šåˆ°å¯†é’¥å¯¹çš„å…¬å…±éƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;makecert.exe çš„å­˜æ”¾è·¯å¾„&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;17763.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¦‚æžœæ²¡æœ‰è®¾ç½®è¯¥è·¯å¾„çš„çŽ¯å¢ƒå˜é‡çš„è¯ï¼Œä½¿ç”¨æ—¶è¦å…ˆåˆ‡æ¢åˆ°è¯¥è·¯å¾„ä¸‹ã€‚æˆ–è€…ç›´æŽ¥ä½¿ç”¨Visual Studio çš„ &lt;a href=&quot;https://docs.microsoft.com/zh-cn/dotnet/framework/tools/developer-command-prompt-for-vs&quot;&gt;å¼€å‘äººå‘˜å‘½ä»¤æç¤º&lt;/a&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Developer Command Prompt&lt;/code&gt; æ‰§è¡Œå‘½ä»¤ã€‚&lt;/p&gt;

&lt;p&gt;å…³äºŽ makecert.exe çš„å‘½ä»¤æ ¼å¼å’Œå‚æ•°ï¼Œè¯·è§é™„å½• &lt;a href=&quot;#1&quot;&gt;ã€Œmakecert.exe å‘½ä»¤æ ¼å¼ã€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œä¸‹åˆ—å‘½ä»¤åˆ›å»ºä¸€ä¸ªåˆ›å»ºè‡ªç­¾ç½²è¯ä¹¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RootDavid&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;makecert&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;CN=RootDavid&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sv&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testsk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pvk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cer&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿è¡Œè¿™ä¸ªå‘½ä»¤åŽï¼Œä¼šå¼¹å‡ºæç¤ºæ¡†ï¼Œé¦–å…ˆç»™ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testsk.pvk&lt;/code&gt; æ–‡ä»¶è®¾ç½®ç§é’¥ä¿æŠ¤å£ä»¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-01.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åŽï¼Œå†æ¬¡è¾“å…¥è¿™ä¸ªå£ä»¤ç”¨ç§é’¥(testsk.pvkæ–‡ä»¶ä¸­ï¼‰æ¥ç»™å…¬é’¥ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testpk.cer&lt;/code&gt;æ–‡ä»¶ä¸­ï¼‰ç­¾åï¼ˆè‡ªç­¾åï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-02.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¾“å…¥æ­£ç¡®çš„ç§é’¥å£ä»¤åŽï¼ŒæŽ§åˆ¶å°ä¼šè¿”å›ž Succeeded. å¹¶åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-04.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;ç§é’¥è¯ä¹¦ - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testsk.pvk&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å…¬é’¥è¯ä¹¦ - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testpk.cer&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦‚æžœä½ éœ€è¦ç”¨è¿™ä¸ªæ ¹è¯ä¹¦ç­¾å‘å…¶ä»–å­è¯ä¹¦çš„è¯ï¼Œå¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤ç­¾å‘ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;makecert&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;CN=SubCertDavid&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iv&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testsk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pvk&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ic&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sv&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subsk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pvk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subpk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cer&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;33-å°†å…¬é’¥è¯ä¹¦æ ¼å¼è½¬æ¢æˆspcè½¯ä»¶å‘å¸ƒè€…è¯ä¹¦&quot;&gt;&lt;span id=&quot;10&quot;&gt;3.3 å°†å…¬é’¥è¯ä¹¦æ ¼å¼è½¬æ¢æˆSPCï¼ˆè½¯ä»¶å‘å¸ƒè€…è¯ä¹¦ï¼‰&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨ cert2spc.exe è¿™ä¸ªå·¥å…·å°†åˆšæ‰ç”Ÿæˆçš„å…¬é’¥è¯ä¹¦ï¼ˆtestpk.cerï¼‰è½¬æ¢ä¸º SPC æ–‡ä»¶ã€‚  &lt;br /&gt;
&lt;strong&gt;cert2spc.exe çš„å­˜æ”¾è·¯å¾„&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;17763.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å…³äºŽ cert2spc.exe çš„ç”¨æ³•ï¼Œè¯·è§é™„å½• &lt;a href=&quot;#2&quot;&gt;ã€Œcert2spc.exe å‘½ä»¤æ ¼å¼ã€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿è¡Œå¦‚ä¸‹å‘½ä»¤&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;17763.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cert2spc&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;spc&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ‰§è¡ŒæˆåŠŸåŽåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-06.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;34-å°†å…¬é’¥è¯ä¹¦å’Œç§é’¥åˆå¹¶æˆä¸€ä¸ªpfxæ ¼å¼çš„è¯ä¹¦æ–‡ä»¶&quot;&gt;&lt;span id=&quot;11&quot;&gt;3.4 å°†å…¬é’¥è¯ä¹¦å’Œç§é’¥åˆå¹¶æˆä¸€ä¸ªPFXæ ¼å¼çš„è¯ä¹¦æ–‡ä»¶&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ pvk2pfx .exe è¿™ä¸ªå·¥å…·å°†å…¬é’¥è¯ä¹¦ï¼ˆtestpk.spcï¼‰å’Œç§é’¥è¯ä¹¦(testsk.pvk)åˆå¹¶æˆä¸€ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PFX&lt;/code&gt;æ ¼å¼çš„è¯ä¹¦æ–‡ä»¶ã€‚    &lt;br /&gt;
&lt;strong&gt;pvk2pfx.exe çš„å­˜æ”¾è·¯å¾„&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;17763.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å…³äºŽ pvk2pfx.exe çš„ç”¨æ³•ï¼Œè¯·è§é™„å½• &lt;a href=&quot;#3&quot;&gt;ã€Œpvk2pfx.exe å‘½ä»¤æ ¼å¼ã€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;17763.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pvk2pfx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pvk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testsk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pvk&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spc&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;spc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pfx&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpfx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pfx&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;åˆå¹¶æ—¶ä¼šè¦æ±‚è¾“å…¥ç§é’¥testsk.pvkçš„ä¿æŠ¤å£ä»¤æ¥åˆå¹¶.pvkå’Œ.spcæ–‡ä»¶ã€‚è¾“å…¥ä¹‹å‰è®¾å®šçš„å£ä»¤ï¼Œå°±å¯åœ¨å½“å‰ç›®å½•ä¸‹å¾—åˆ°ç”Ÿæˆçš„pfxæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-08.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;35-ç”Ÿæˆç­¾å&quot;&gt;&lt;span id=&quot;12&quot;&gt;3.5 ç”Ÿæˆç­¾å&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨signtoolå‘½ä»¤ç­¾åã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;signtool.exe çš„å­˜æ”¾è·¯å¾„&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;17763.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å…³äºŽsigntoolçš„ç”¨æ³•ï¼Œè¯·è§é™„å½• &lt;a href=&quot;#4&quot;&gt;ã€Œsigntool.exe å‘½ä»¤æ ¼å¼ã€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/v /&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpfx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pfx&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/tr http:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;digicert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MXT_ENC2Array_Converter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exe&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¦‚æžœæˆåŠŸï¼Œä¼šè¿”å›ž&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-10.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ—¶ç­¾åå·²ç»æˆåŠŸäº†ã€‚æˆ‘ä»¬æ‰“å¼€è¢«ç­¾åçš„åº”ç”¨ç¨‹åºçš„å±žæ€§æ ‡ç­¾ï¼Œæ‰¾åˆ°æ•°å­—ç­¾åé‚£ä¸€æ ï¼Œå¯ä»¥çœ‹åˆ°ç­¾åçš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-11.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å¼€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯¦ç»†ä¿¡æ¯&lt;/code&gt;-&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;é«˜çº§&lt;/code&gt;ï¼Œå¯ä»¥çœ‹è¯¦ç»†çš„ç­¾åä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-12.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;X.509 æ ¼å¼è¯ä¹¦ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-13.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¯ä¹¦é¢å‘è·¯å¾„ä¸ºæ ¹è¯ä¹¦ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-14.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°å½“å‰çš„è¯ä¹¦æ˜¯ä¸æŽˆä¿¡çš„ï¼Œéœ€è¦å°†å…¶æ·»åŠ å¯¼å…¥è¯ä¹¦åº“ä¸­ã€‚ &lt;br /&gt;
Microsoftè§„å®šåº”ä½¿ç”¨è¯ä¹¦å­˜å‚¨åŒºæ¥å®‰å…¨åœ°å­˜å‚¨è¯ä¹¦ï¼ˆè¯ä¹¦å­˜å‚¨åŒºæ˜¯ç³»ç»Ÿä¸­ä¸€ä¸ªç‰¹æ®ŠåŒºåŸŸï¼Œä¸“é—¨ç”¨æ¥ä¿å­˜X.509æ•°å­—è¯ä¹¦ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-15.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Windows é¢„è®¾äº†ä»¥ä¸‹å­˜å‚¨åŒºï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å­˜å‚¨åŒº&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;AddressBook&lt;/td&gt;
      &lt;td&gt;å…¶ä»–ç”¨æˆ·çš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;AuthRoot&lt;/td&gt;
      &lt;td&gt;ç¬¬ä¸‰æ–¹è¯ä¹¦é¢å‘æœºæž„ (CA) çš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;CertificateAuthority&lt;/td&gt;
      &lt;td&gt;ä¸­é—´è¯ä¹¦é¢å‘æœºæž„ (CA) çš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Disallowed&lt;/td&gt;
      &lt;td&gt;åŠé”€çš„è¯ä¹¦çš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;My&lt;/td&gt;
      &lt;td&gt;ä¸ªäººè¯ä¹¦çš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Root&lt;/td&gt;
      &lt;td&gt;å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæž„ (CA) çš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;TrustedPeople&lt;/td&gt;
      &lt;td&gt;ç›´æŽ¥å—ä¿¡ä»»çš„äººå’Œèµ„æºçš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;TrustedPublisher&lt;/td&gt;
      &lt;td&gt;ç›´æŽ¥å—ä¿¡ä»»çš„å‘è¡Œè€…çš„ X.509 è¯ä¹¦å­˜å‚¨åŒºã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å°±å°†è¯ä¹¦æ·»åŠ åˆ°å­˜å‚¨åŒºï¼Œé€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å®‰è£…è¯ä¹¦&lt;/code&gt;ï¼Œç„¶åŽä¸€è·¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Next&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-16.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç›´åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦å­˜å‚¨&lt;/code&gt; æ­¥éª¤ï¼Œé€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å°†æ‰€æœ‰çš„è¯ä¹¦æ”¾å…¥ä¸‹åˆ—å­˜å‚¨&lt;/code&gt;ï¼šç‚¹å‡» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æµè§ˆ&lt;/code&gt;ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸ªäºº&lt;/code&gt;-&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç¡®å®š&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-17.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆè¦é€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸ªäºº&lt;/code&gt; å‘¢ï¼Ÿå¯ä»¥å‚è§ signtool çš„ &lt;a href=&quot;#sign&quot;&gt;sign å­å‘½ä»¤çš„/s&lt;/a&gt; é€‰é¡¹çš„è¯´æ˜Žï¼šã€ŒæŒ‡å®šè¦åœ¨æœç´¢è¯ä¹¦æ—¶æ‰“å¼€çš„å­˜å‚¨åŒºã€‚ å¦‚æžœæœªæŒ‡å®šè¯¥é€‰é¡¹ï¼Œåˆ™æ‰“å¼€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;My&lt;/code&gt;å­˜å‚¨ã€è¿™é‡Œçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;My&lt;/code&gt; å°±æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸ªäºº&lt;/code&gt;ã€‚ç„¶åŽå°±å¯ä»¥ä¸€è·¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸‹ä¸€æ­¥&lt;/code&gt; åˆ°å¯¼å…¥å®Œæˆäº†ã€‚æˆ‘ä»¬å¯ä»¥åˆ°è®¡ç®—æœºçš„ç®¡ç†æŽ§åˆ¶å°ç¡®è®¤ã€‚åœ¨å¼€å§‹èœå•ä¸­æœç´¢å¹¶è¿è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mmc&lt;/code&gt;ã€‚åœ¨mmcç•Œé¢ä¸­ï¼Œé€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ–‡ä»¶&lt;/code&gt;-&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ·»åŠ åˆ é™¤ç®¡ç†å•å…ƒ&lt;/code&gt;ã€‚åœ¨å¼¹å‡ºçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ·»åŠ åˆ é™¤ç®¡ç†å•å…ƒ&lt;/code&gt; å¯¹è¯æ¡†ä¸­ï¼Œåœ¨å·¦è¾¹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¯ç”¨çš„ç®¡ç†å•å…ƒ&lt;/code&gt; ä¸­é€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-18.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»ä¸­é—´çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ·»åŠ &lt;/code&gt; æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æˆ‘çš„ç”¨æˆ·å¸æˆ·&lt;/code&gt; æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è®¡ç®—æœºç”¨æˆ·å¸æˆ·&lt;/code&gt;ï¼Œå†ç‚¹å‡» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å®Œæˆ&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-19.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å°±å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦&lt;/code&gt; èŠ‚ç‚¹æ·»åŠ åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ‰€é€‰ç®¡ç†èŠ‚ç‚¹&lt;/code&gt; ä¸­äº†ï¼š&lt;/p&gt;

&lt;p&gt;ç‚¹å‡» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç¡®å®š&lt;/code&gt;ï¼Œå›žåˆ°ç®¡ç†æŽ§åˆ¶å°ä¸»ç•Œé¢ä¸­ï¼Œåœ¨å·¦è¾¹çš„æ ‘æŽ§ä»¶ä¸­å±•å¼€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å½“å‰ç”¨æˆ·&lt;/code&gt;-&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸ªäºº&lt;/code&gt;ï¼Œé€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦&lt;/code&gt; èŠ‚ç‚¹ï¼Œå°±å¯ä»¥çœ‹è§å·²ç»å¯¼å…¥çš„RootDavidè¯ä¹¦ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-20.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt; 
åŒå‡»RootDavidï¼Œå¯ä»¥çœ‹è§è¯ä¹¦å¯¹è¯æ¡†é‡Œå†™ç€â€œæ‚¨æœ‰ä¸€ä¸ªä¸Žè¯¥è¯ä¹¦å¯¹åº”çš„ç§é’¥â€ã€‚å¯¹è¯æ¡†é‡Œè¿˜å†™ç€â€œæ­¤CAæ ¹ç›®å½•è¯ä¹¦ä¸å—ä¿¡ä»»ã€‚è¦å¯ç”¨ä¿¡ä»»ï¼Œè¯·å°†è¯¥è¯ä¹¦å®‰è£…åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæž„&lt;/code&gt; å­˜å‚¨åŒºâ€ã€‚åŽé¢ä¼šè®²åˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-21.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;36-éªŒè¯ç­¾å&quot;&gt;&lt;span id=&quot;15&quot;&gt;3.6 éªŒè¯ç­¾å&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;æŽ¥ä¸‹æ¥å°±æ˜¯è¦éªŒè¯exeçš„ç­¾åã€‚&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œä¸‹åˆ—å‘½ä»¤&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verify&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/pa MXT_ENC2Array_Converter.exe&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ­¤æ—¶è¿”å›žäº†å¦‚ä¸‹çš„ç»“æžœï¼Œæ˜¾ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-22.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ˜¯å› ä¸ºç›®å‰è¿˜æ²¡æœ‰å°†RootDavidçš„å…¬é’¥è¯ä¹¦æ·»åŠ åˆ°ä¹‹å‰æåˆ°çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæž„&lt;/code&gt;ã€‚è¦åšè¿™ä¸€æ­¥çš„è¯ï¼Œéœ€è¦æ‰¾åˆ°å…¬é’¥è¯ä¹¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testpk.cer&lt;/code&gt;ï¼Œç„¶åŽåŒå‡»è¯¥ceræ–‡ä»¶ï¼Œåœ¨å¼¹å‡ºçš„è¯ä¹¦å¯¹è¯æ¡†ä¸­é€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å®‰è£…è¯ä¹¦&lt;/code&gt;ã€‚æŽ¥ä¸‹æ¥å’Œä¹‹å‰çš„å¯¼å…¥è¯ä¹¦æ“ä½œä¸€æ ·ï¼Œåªæ˜¯åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦å­˜å‚¨&lt;/code&gt; è¿™ä¸€æ­¥ï¼Œéœ€è¦é€‰æ‹©å°†è¯ä¹¦å­˜å‚¨åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæž„&lt;/code&gt; å­˜å‚¨åŒºï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¸ªäºº&lt;/code&gt; å­˜å‚¨åŒºä¸­ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-23.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;
æ­¤æ—¶ä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Šæç¤ºï¼Œè®©ä½ ç¡®è®¤æ˜¯å¦è¦å®‰è£…æ­¤è¯ä¹¦åˆ°æŽˆä¿¡å­˜å‚¨åŒºï¼Œç‚¹å‡»ç¡®è®¤åŽï¼ŒæˆåŠŸå®‰è£…ã€‚å›žåˆ°ç®¡ç†æŽ§åˆ¶å°ä¸»ç•Œé¢ä¸­ï¼Œåœ¨å·¦è¾¹çš„æ ‘æŽ§ä»¶ä¸­å±•å¼€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å½“å‰ç”¨æˆ·&lt;/code&gt; -&amp;gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæž„&lt;/code&gt;ï¼Œé€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è¯ä¹¦&lt;/code&gt; èŠ‚ç‚¹ï¼Œå°±å¯ä»¥çœ‹è§å·²ç»å¯¼å…¥çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testpk.cer&lt;/code&gt; å…¬é’¥è¯ä¹¦ã€‚ &lt;br /&gt;
æ­¤æ—¶åœ¨è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯æˆåŠŸï¼:100:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-24.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶å†æ‰“å¼€è¢«ç­¾åçš„åº”ç”¨ç¨‹åºå±žæ€§é¡µï¼Œå¯ä»¥çœ‹åˆ°ç­¾åå·²ç»æ˜¯æŽˆä¿¡çš„äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-25.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;h2 id=&quot;4-å¸¸è§é—®é¢˜&quot;&gt;&lt;span id=&quot;13&quot;&gt;4. å¸¸è§é—®é¢˜&lt;/span&gt;&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;æ‰§è¡Œ makecert.exe æ—¶å‡ºçŽ°å¦‚ä¸‹é”™è¯¯&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;s1&quot;&gt;'makecert'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recognized&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;internal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;external&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;operable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;program&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;batch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;åŽŸå› ï¼šè¿™æ˜¯å› ä¸ºæ²¡æœ‰åœ¨ makecert.exe çš„è·¯å¾„ä¸‹æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œè§£å†³æ–¹æ³•æ—¶åˆ‡æ¢åˆ°å·¥å…·æ‰€åœ¨çš„ç›®å½•ä¸‹æ‰§è¡Œã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;10.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;17763.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æˆ–è€…ç›´æŽ¥ä½¿ç”¨Visual Studio çš„ &lt;a href=&quot;https://docs.microsoft.com/zh-cn/dotnet/framework/tools/developer-command-prompt-for-vs&quot;&gt;å¼€å‘äººå‘˜å‘½ä»¤æç¤º&lt;/a&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Developer Command Prompt&lt;/code&gt; è¿è¡Œå‘½ä»¤ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æˆ‘åœ¨æ‰§è¡Œ makecert.exe æ—¶å¤±è´¥ï¼Œè¿”å›žå¦‚ä¸‹æç¤º&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;already&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'testsk.pvk'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Can&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'t create the key of the subject ('&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;testsk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pvk&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Failed&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;åŽŸå› ï¼šè¿™æ˜¯å› ä¸ºæ²¡æœ‰åœ¨ç®¡ç†å‘˜æƒé™ä¸‹æ‰§è¡Œ makecert.exe å‘½ä»¤ï¼Œè§£å†³æ–¹æ³•æ˜¯ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ CMDï¼Œè¿è¡Œå‘½ä»¤ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æˆ‘çš„éœ€è¦ç­¾åçš„æ–‡ä»¶åé‡Œæœ‰ç©ºæ ¼ï¼Œæ‰§è¡Œç­¾åçš„æ“ä½œåŽå¤±è´¥ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/v /&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testpfx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pfx&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/tr http:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;wosign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rfc3161&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;my&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exe&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;åŽŸå› ï¼šæ–‡ä»¶åä¸èƒ½åŒ…å«ç©ºæ ¼ï¼Œé‡å‘½ååŽå†æ¬¡ç­¾åå¯ä»¥æˆåŠŸã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ‰§è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;signtool verify&lt;/code&gt; æ—¶æç¤º
&lt;img src=&quot;/daviddong.github.io/assets/image/others-make-sign-26.png&quot; alt=&quot;makecert01&quot; class=&quot;center-image&quot; /&gt;
åŽŸå› ï¼šè¿™æ˜¯å› ä¸ºå…¬é’¥æ–‡ä»¶xx.ceræ²¡æœ‰è¢«æ·»åŠ åˆ°å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæž„ã€‚è§£å†³æ–¹æ³• &lt;a href=&quot;#15&quot;&gt;å¦‚ä¸Š&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;5-é™„å½•&quot;&gt;&lt;span id=&quot;14&quot;&gt;5. é™„å½•&lt;/span&gt;&lt;/h2&gt;
&lt;h3 id=&quot;51-makecertexe-&quot;&gt;&lt;span id=&quot;1&quot;&gt;5.1 makecert.exe &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;makecert.exe å‘½ä»¤æ ¼å¼&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;MakeCert&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/b DateStart] [/e&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DateEnd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/len KeyLength] [/m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nMonths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/n &quot;Name&quot;] [/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/r] [/s&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SubjectCertFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/sk SubjectKey] [/s&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SubjectCertStoreLocation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/ss SubjectCertStoreName] [/s&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SubjectKeyFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;OutputFile&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.1.1&quot;&gt;&lt;strong&gt;5.1.1 åŸºæœ¬é€‰é¡¹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-n&lt;/code&gt; x.509name&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„è¯ä¹¦åç§°ã€‚åœ¨åŒå¼•å·ä¸­æŒ‡å®šæ­¤åç§°ï¼Œå¹¶åŠ ä¸Šå‰ç¼€ CN=ï¼›ä¾‹å¦‚ï¼Œâ€CN=myNameâ€ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-pe&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å°†æ‰€ç”Ÿæˆçš„ç§é’¥æ ‡è®°ä¸ºå¯å¯¼å‡ºã€‚è¿™æ ·å¯å°†ç§é’¥åŒ…æ‹¬åœ¨è¯ä¹¦ä¸­ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-sk&lt;/code&gt; keyname&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„å¯†é’¥å®¹å™¨ä½ç½®ï¼Œè¯¥ä½ç½®åŒ…å«ç§é’¥ã€‚å¦‚æžœå¯†é’¥å®¹å™¨ä¸å­˜åœ¨ï¼Œç³»ç»Ÿå°†åˆ›å»ºä¸€ä¸ªã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-sr&lt;/code&gt; location&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„è¯ä¹¦å­˜å‚¨ä½ç½®ã€‚Location å¯ä»¥æ˜¯ currentuserï¼ˆé»˜è®¤å€¼ï¼‰æˆ– localmachineã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-ss&lt;/code&gt; store&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„è¯ä¹¦å­˜å‚¨åç§°ï¼Œè¾“å‡ºè¯ä¹¦å³å­˜å‚¨åœ¨é‚£é‡Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-#&lt;/code&gt; number&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸€ä¸ªä»‹äºŽ 1 å’Œ 2,147,483,647 ä¹‹é—´çš„åºåˆ—å·ã€‚é»˜è®¤å€¼æ˜¯ç”± Makecert.exe ç”Ÿæˆçš„å”¯ä¸€å€¼ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-$&lt;/code&gt; authority&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šè¯ä¹¦çš„ç­¾åæƒé™ï¼Œå¿…é¡»è®¾ç½®ä¸º commercialï¼ˆå¯¹äºŽå•†ä¸šè½¯ä»¶å‘è¡Œè€…ä½¿ç”¨çš„è¯ä¹¦ï¼‰æˆ– individualï¼ˆå¯¹äºŽä¸ªäººè½¯ä»¶å‘è¡Œè€…ä½¿ç”¨çš„è¯ä¹¦ï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;span id=&quot;5.1.1&quot;&gt;&lt;strong&gt;5.1.2 æ‰©å±•é€‰é¡¹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-a&lt;/code&gt; algorithm&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åç®—æ³•ã€‚å¿…é¡»æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;md5&lt;/code&gt;ï¼ˆé»˜è®¤å€¼ï¼‰æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sha1&lt;/code&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-b&lt;/code&gt; mm/dd/yyyy&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæœ‰æ•ˆæœŸçš„å¼€å§‹æ—¶é—´ã€‚é»˜è®¤ä¸ºè¯ä¹¦çš„åˆ›å»ºæ—¥æœŸã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-e&lt;/code&gt; mm/dd/yyyy&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæœ‰æ•ˆæœŸçš„ç»“æŸæ—¶é—´ã€‚é»˜è®¤ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;12/31/2039 11:59:59 GMT&lt;/code&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-m&lt;/code&gt; number&lt;/td&gt;
      &lt;td&gt;ä»¥æœˆä¸ºå•ä½æŒ‡å®šè¯ä¹¦æœ‰æ•ˆæœŸçš„æŒç»­æ—¶é—´ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cy&lt;/code&gt; certType&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šè¯ä¹¦ç±»åž‹ã€‚æœ‰æ•ˆå€¼æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;end&lt;/code&gt;ï¼ˆå¯¹äºŽæœ€ç»ˆå®žä½“ï¼‰å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;authority&lt;/code&gt;ï¼ˆå¯¹äºŽè¯ä¹¦é¢å‘æœºæž„ï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-d&lt;/code&gt; name&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºä¸»é¢˜çš„åç§°&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-eku&lt;/code&gt; oid[,oid]&lt;/td&gt;
      &lt;td&gt;å°†ç”¨é€—å·åˆ†éš”çš„å¢žå¼ºåž‹å¯†é’¥ç”¨æ³•å¯¹è±¡æ ‡è¯†ç¬¦ (OID) åˆ—è¡¨æ’å…¥åˆ°è¯ä¹¦ä¸­ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-h&lt;/code&gt; number&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæ­¤è¯ä¹¦ä¸‹é¢çš„æ ‘çš„æœ€å¤§é«˜åº¦ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-ic&lt;/code&gt; file&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„è¯ä¹¦æ–‡ä»¶ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-ik&lt;/code&gt; keyName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„å¯†é’¥å®¹å™¨åç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-iky&lt;/code&gt; keytype&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„å¯†é’¥ç±»åž‹ï¼Œå¿…é¡»æ˜¯ exchangeã€signature æˆ–ä¸€ä¸ªè¡¨ç¤ºæä¾›ç¨‹åºç±»åž‹çš„æ•´æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä¼ å…¥ 1 è¡¨ç¤ºäº¤æ¢å¯†é’¥ï¼Œä¼ å…¥ 2 è¡¨ç¤ºç­¾åå¯†é’¥ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-in&lt;/code&gt; name&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„è¯ä¹¦å…¬ç”¨åç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-ip&lt;/code&gt; provider&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„ CryptoAPI æä¾›ç¨‹åºåç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-ir&lt;/code&gt; location&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„è¯ä¹¦å­˜å‚¨ä½ç½®ã€‚Location å¯ä»¥æ˜¯ currentuserï¼ˆé»˜è®¤å€¼ï¼‰æˆ– localmachineã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-is&lt;/code&gt; store&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„è¯ä¹¦å­˜å‚¨åç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-iv&lt;/code&gt; pvkFile&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„ .pvk ç§é’¥æ–‡ä»¶ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-iy&lt;/code&gt; pvkFile&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šé¢å‘è€…çš„ CryptoAPI æä¾›ç¨‹åºç±»åž‹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-l&lt;/code&gt; link&lt;/td&gt;
      &lt;td&gt;åˆ°ç­–ç•¥ä¿¡æ¯çš„é“¾æŽ¥ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ª URLï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-r&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;åˆ›å»ºè‡ªç­¾ç½²è¯ä¹¦ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-sc&lt;/code&gt; file&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„è¯ä¹¦æ–‡ä»¶ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-sky&lt;/code&gt; keytype&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„å¯†é’¥ç±»åž‹ï¼Œå¿…é¡»æ˜¯exchangeã€ signatureæˆ–ä¸€ä¸ªè¡¨ç¤ºæä¾›ç¨‹åºç±»åž‹çš„æ•´æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä¼ å…¥ 1 è¡¨ç¤ºäº¤æ¢å¯†é’¥ï¼Œä¼ å…¥ 2 è¡¨ç¤ºç­¾åå¯†é’¥ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-sp&lt;/code&gt; provider&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„ CryptoAPI æä¾›ç¨‹åºåç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-sv&lt;/code&gt; pvkFile&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„ .pvk ç§é’¥æ–‡ä»¶ã€‚å¦‚æžœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç³»ç»Ÿå°†åˆ›å»ºä¸€ä¸ªã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-sy&lt;/code&gt; type&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸»é¢˜çš„ CryptoAPI æä¾›ç¨‹åºç±»åž‹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;52-cert2spcexe-&quot;&gt;&lt;span id=&quot;2&quot;&gt;5.2 cert2spc.exe &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;è½¯ä»¶å‘è¡Œè€…è¯ä¹¦æµ‹è¯•å·¥å…· cert2spc.exe ä»Žä¸€ä¸ªæˆ–å¤šä¸ªX.509è¯ä¹¦åˆ›å»ºè½¯ä»¶å‘è¡Œè€…è¯ä¹¦ï¼ˆSPCï¼‰ã€‚cert2spc.exe ä»…ç”¨äºŽæµ‹è¯•ç›®çš„ã€‚å•†ä¸šç›®çš„çš„SPCå¯ä»¥ä»Žè¯ä¹¦é¢å‘æœºæž„ï¼ˆå¦‚VeriSignæˆ–Thawteï¼‰èŽ·å–ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span id=&quot;5.2.1&quot;&gt;&lt;strong&gt;5.2.1 è¯­æ³•æ ¼å¼&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;cert2spc&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cert1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crl1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;crl&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;certN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crlN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;crl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outputSPCfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;spc&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.2.2&quot;&gt;&lt;strong&gt;5.2.2 å‚æ•°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‚æ•°&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;certN.cer&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¦åŒ…å«åœ¨ SPC æ–‡ä»¶ä¸­çš„ X.509 è¯ä¹¦çš„åç§°ã€‚ å¯ä»¥æŒ‡å®šç”¨ç©ºæ ¼åˆ†éš”çš„å¤šä¸ªåç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;crlN.crl&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¦åŒ…å«åœ¨ SPC æ–‡ä»¶ä¸­çš„è¯ä¹¦åŠé”€åˆ—è¡¨çš„åç§°ã€‚ å¯ä»¥æŒ‡å®šç”¨ç©ºæ ¼åˆ†éš”çš„å¤šä¸ªåç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;outputSPCfile.spc&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å°†åŒ…å« X.509 è¯ä¹¦çš„ PKCS #7 å¯¹è±¡çš„åç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;span id=&quot;5.2.3&quot;&gt;&lt;strong&gt;5.2.3 é€‰é¡¹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;/?&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºè¯¥å·¥å…·çš„å‘½ä»¤è¯­æ³•å’Œé€‰é¡¹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;53-pvk2pfxexe-&quot;&gt;&lt;span id=&quot;3&quot;&gt;5.3 pvk2pfx.exe &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Pvk2Pfx.exe æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒå°†.spcã€.cerå’Œ.pvkæ–‡ä»¶ä¸­åŒ…å«çš„å…¬é’¥å’Œç§é’¥ä¿¡æ¯å¤åˆ¶åˆ°ä¸ªäººä¿¡æ¯äº¤æ¢ï¼ˆ.pfxï¼‰æ–‡ä»¶ä¸­ã€‚
å‘½ä»¤æ ¼å¼&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;pvk2pfx&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/pvk pvkfilename.pvk [/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pvkpassword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spc&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spcfilename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ext&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/pfx pfxfilename.pfx [/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;po&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pfxpassword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/f]]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.3.1&quot;&gt;&lt;strong&gt;5.3.1 å‚æ•°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‚æ•°&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pvk&lt;/code&gt; pvkfilename.pvk&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸€ä¸ª.pvk æ–‡ä»¶çš„åç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/spc&lt;/code&gt; spcfilename.ext&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šçš„åç§°å’Œæ‰©å±•åè½¯ä»¶å‘å¸ƒè€…è¯ä¹¦ (SPC)åŒ…å«è¯ä¹¦çš„æ–‡ä»¶ã€‚ è¯¥æ–‡ä»¶å¯ä»¥æ˜¯.spc æ–‡ä»¶æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.cer&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pfx&lt;/code&gt; pfxfilename.pfx&lt;/td&gt;
      &lt;td&gt;æŒ‡å®š.pfx æ–‡ä»¶çš„åç§°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pi&lt;/code&gt; pvkpassword&lt;/td&gt;
      &lt;td&gt;æŒ‡å®š.pvk æ–‡ä»¶çš„å¯†ç ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/po&lt;/code&gt; pfxpassword&lt;/td&gt;
      &lt;td&gt;æŒ‡å®š.pfx æ–‡ä»¶çš„å¯†ç ã€‚ å¦‚æžœæœªæŒ‡å®š.pfx æ–‡ä»¶çš„å¯†ç ï¼Œ.pfx æ–‡ä»¶çš„å¯†ç å°†ä½œä¸º.pvk æ–‡ä»¶çš„å¯†ç ç›¸åŒã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/f&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é…ç½® Pvk2Pfx è¦†ç›–.pfx æ–‡ä»¶ï¼Œå¦‚æžœå­˜åœ¨ä¸ŽæŒ‡å®šçš„åŒå -pfxåˆ‡æ¢ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;è‹¥è¦ä½¿ç”¨ SignTool å·¥å…·æ¥ç­¾ç½²é©±åŠ¨ç¨‹åºç¬¦åˆçš„æ–¹å¼ä½¿ç”¨ SPCå†…æ ¸æ¨¡å¼ä»£ç ç­¾ç½²ç­–ç•¥ï¼Œå¿…é¡»å°† SPC ä¿¡æ¯æ·»åŠ åˆ°å¯¹è¿›è¡Œç­¾åçš„é©±åŠ¨ç¨‹åºåœ¨æœ¬åœ°è®¡ç®—æœºä¸Šä¸ªäººè¯ä¹¦å­˜å‚¨ã€‚æœ‰å…³å¦‚ä½•å°† SPC ä¿¡æ¯æ·»åŠ åˆ°ä¸ªäººè¯ä¹¦å­˜å‚¨åŒºçš„ä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href=&quot;https://docs.microsoft.com/zh-cn/windows-hardware/drivers/install/software-publisher-certificate&quot;&gt;ã€ŒMicrosoft Docs - è½¯ä»¶å‘å¸ƒè€…è¯ä¹¦ã€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;54-signtoolexe-&quot;&gt;&lt;span id=&quot;4&quot;&gt;5.4 signtool.exe &lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ç­¾åå·¥å…·æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºŽå¯¹æ–‡ä»¶è¿›è¡Œæ•°å­—ç­¾åï¼Œä»¥åŠéªŒè¯æ–‡ä»¶å’Œæ—¶é—´æˆ³æ–‡ä»¶ä¸­çš„ç­¾åã€‚&lt;/p&gt;

&lt;p&gt;&lt;span id=&quot;5.4.1&quot;&gt;&lt;strong&gt;5.4.1 è¯­æ³•æ ¼å¼&lt;/strong&gt;&lt;/span&gt; &lt;br /&gt;
åœ¨å‘½ä»¤æç¤ºç¬¦å¤„ï¼Œé”®å…¥ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;5.4.2&quot;&gt;&lt;strong&gt;5.4.2 å‚æ•°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‚æ•°&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;command&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šè¦å¯¹æ–‡ä»¶æ‰§è¡Œçš„æ“ä½œçš„å››ä¸ªå‘½ä»¤ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;catdb&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sign&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Timestamp&lt;/code&gt; æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Verify&lt;/code&gt;ï¼‰ä¹‹ä¸€ã€‚ æœ‰å…³æ¯ä¸ªå‘½ä»¤çš„è¯´æ˜Žï¼Œè¯·å‚è§ä¸‹ä¸€ä¸ªè¡¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;options&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ç”¨äºŽä¿®æ”¹å‘½ä»¤çš„é€‰é¡¹ã€‚ é™¤å…¨å±€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/q&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/v&lt;/code&gt; é€‰é¡¹ä¹‹å¤–ï¼Œæ¯ä¸ªå‘½ä»¤å‡æ”¯æŒä¸€ç»„å”¯ä¸€é€‰é¡¹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file_name&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¦è¿›è¡Œç­¾åçš„æ–‡ä»¶çš„è·¯å¾„ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç­¾åå·¥å…·æ”¯æŒä¸‹åˆ—å‘½ä»¤ã€‚ æ¯ä¸ªå‘½ä»¤å‡ä¸Žä¸åŒçš„é€‰é¡¹é›†ç»“åˆä½¿ç”¨ï¼Œè¿™äº›é€‰é¡¹é›†å·²åœ¨å…¶å„è‡ªçš„èŠ‚ä¸­åˆ—å‡ºã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‘½ä»¤&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;catdb&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;åœ¨ç›®å½•æ•°æ®åº“ä¸­æ·»åŠ æˆ–ç§»é™¤ç›®å½•æ–‡ä»¶ã€‚ ç›®å½•æ•°æ®åº“ç”¨äºŽè‡ªåŠ¨æŸ¥æ‰¾ç›®å½•æ–‡ä»¶ï¼Œå¹¶ç”± GUID æ ‡è¯†ã€‚ æœ‰å…³ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;catdb&lt;/code&gt; å‘½ä»¤æ”¯æŒçš„é€‰é¡¹åˆ—è¡¨ï¼Œè¯·å‚é˜… &lt;a href=&quot;#catdb&quot;&gt;catdb å‘½ä»¤é€‰é¡¹&lt;/a&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sign&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¯¹æ–‡ä»¶è¿›è¡Œæ•°å­—ç­¾åã€‚ æ•°å­—ç­¾åå¯ä»¥é˜»æ­¢æ–‡ä»¶è¢«ç¯¡æ”¹ï¼Œå¹¶ä¸”ä½¿ç”¨æˆ·èƒ½å¤ŸåŸºäºŽç­¾åè¯ä¹¦éªŒè¯ç­¾åè€…ã€‚ æœ‰å…³ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sign&lt;/code&gt; å‘½ä»¤æ”¯æŒçš„é€‰é¡¹åˆ—è¡¨ï¼Œè¯·å‚é˜… &lt;a href=&quot;#sign&quot;&gt;sign å‘½ä»¤é€‰é¡¹&lt;/a&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Timestamp&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä¸ºæ–‡ä»¶æ·»åŠ æ—¶é—´æˆ³ã€‚ æœ‰å…³ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TimeStamp&lt;/code&gt; å‘½ä»¤æ”¯æŒçš„é€‰é¡¹åˆ—è¡¨ï¼Œè¯·å‚é˜… &lt;a href=&quot;#TimeStamp&quot;&gt;TimeStamp å‘½ä»¤é€‰é¡¹&lt;/a&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Verify&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;é€šè¿‡ç¡®å®šç­¾åè¯ä¹¦æ˜¯å¦ç”±å—ä¿¡ä»»çš„é¢å‘æœºæž„é¢å‘ã€æ˜¯å¦å·²æ’¤æ¶ˆç­¾åè¯ä¹¦ï¼Œä»¥åŠç­¾åè¯ä¹¦å¯¹äºŽç‰¹å®šç­–ç•¥æ˜¯å¦æœ‰æ•ˆï¼ˆå¯é€‰ï¼‰æ¥éªŒè¯æ–‡ä»¶çš„æ•°å­—ç­¾åã€‚ æœ‰å…³ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Verify&lt;/code&gt; å‘½ä»¤æ”¯æŒçš„é€‰é¡¹åˆ—è¡¨ï¼Œè¯·å‚é˜… &lt;a href=&quot;#Verify&quot;&gt;Verify å‘½ä»¤é€‰é¡¹&lt;/a&gt;ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ä¸‹åˆ—é€‰é¡¹é€‚ç”¨äºŽæ‰€æœ‰ç­¾åå·¥å…·å‘½ä»¤ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å…¨å±€é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;/q&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;å¦‚æžœå‘½ä»¤è¿è¡ŒæˆåŠŸï¼Œåˆ™ä¸æ˜¾ç¤ºè¾“å‡ºï¼›å¦‚æžœå‘½ä»¤è¿è¡Œå¤±è´¥ï¼Œåˆ™æ˜¾ç¤ºæœ€å°è¾“å‡ºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;/v&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;æ— è®ºå‘½ä»¤æ˜¯å¦è¿è¡ŒæˆåŠŸï¼Œéƒ½æ˜¾ç¤ºè¯¦ç»†è¾“å‡ºï¼Œå¹¶æ˜¾ç¤ºè­¦å‘Šæ¶ˆæ¯ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;/debug&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a name=&quot;catdb&quot;&gt;&lt;/a&gt;
&lt;span id=&quot;5.4.3&quot;&gt;&lt;strong&gt;5.4.3 catdb å‘½ä»¤é€‰é¡¹&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
 ä¸‹è¡¨åˆ—å‡ºäº†å¯ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;catdb&lt;/code&gt; å‘½ä»¤ä¸€èµ·ä½¿ç”¨çš„é€‰é¡¹ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Catdb é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/d&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæ›´æ–°é»˜è®¤ç›®å½•æ•°æ®åº“ã€‚ å¦‚æžœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/d&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/g&lt;/code&gt; é€‰é¡¹éƒ½æœªä½¿ç”¨ï¼Œåˆ™ç­¾åå·¥å…·ä¼šæ›´æ–°ç³»ç»Ÿç»„ä»¶å’Œé©±åŠ¨ç¨‹åºæ•°æ®åº“ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/g&lt;/code&gt; GUID&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç”±å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ GUID æ ‡è¯†çš„ç›®å½•æ•°æ®åº“å·²æ›´æ–°ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/r&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä»Žç›®å½•æ•°æ®åº“ä¸­ç§»é™¤æŒ‡å®šçš„ç›®å½•ã€‚ å¦‚æžœæœªæŒ‡å®šè¯¥é€‰é¡¹ï¼Œç­¾åå·¥å…·å°†å‘ç›®å½•æ•°æ®åº“æ·»åŠ æŒ‡å®šç›®å½•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/u&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šè‡ªåŠ¨ä¸ºæ·»åŠ çš„ç›®å½•æ–‡ä»¶ç”Ÿæˆå”¯ä¸€åç§°ã€‚ å¦‚æœ‰å¿…è¦ï¼Œé‡å‘½åç›®å½•æ–‡ä»¶ä»¥é˜»æ­¢ä¸ŽçŽ°æœ‰ç›®å½•æ–‡ä»¶å‘ç”Ÿåç§°å†²çªã€‚ å¦‚æžœæœªæŒ‡å®šè¯¥é€‰é¡¹ï¼Œç­¾åå·¥å…·å°†è¦†ç›–ä¸Žæ‰€æ·»åŠ çš„ç›®å½•åŒåçš„ä»»ä½•çŽ°æœ‰ç›®å½•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a name=&quot;sign&quot;&gt;&lt;/a&gt;
&lt;span id=&quot;5.4.4&quot;&gt;&lt;strong&gt;5.4.4 sign å‘½ä»¤é€‰é¡¹&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
 ä¸‹è¡¨åˆ—å‡ºäº†å¯ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sign&lt;/code&gt; å‘½ä»¤ä¸€èµ·ä½¿ç”¨çš„é€‰é¡¹ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Sign å‘½ä»¤é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/a&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç­¾åè¯ä¹¦ã€‚ ç­¾åå·¥å…·å°†æŸ¥æ‰¾æ»¡è¶³æ‰€æœ‰æŒ‡å®šæ¡ä»¶çš„æ‰€æœ‰æœ‰æ•ˆè¯ä¹¦ï¼Œå¹¶é€‰æ‹©æœ‰æ•ˆæ—¶é—´æœ€é•¿çš„è¯ä¹¦ã€‚ å¦‚æžœæœªæä¾›è¯¥é€‰é¡¹ï¼Œç­¾åå·¥å…·ä»…æŸ¥æ‰¾ä¸€ä¸ªæœ‰æ•ˆçš„ç­¾åè¯ä¹¦ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ac&lt;/code&gt;  file&lt;/td&gt;
      &lt;td&gt;å°† file ä¸­çš„å…¶ä»–è¯ä¹¦æ·»åŠ åˆ°ç­¾åå—ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/as&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;è¿½åŠ æ­¤ç­¾åã€‚ å¦‚æžœä¸å­˜åœ¨ä¸»ç­¾åï¼Œåˆ™æ”¹ä¸ºä½¿æ­¤ç­¾åæˆä¸ºä¸»ç­¾åã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/c&lt;/code&gt;  CertTemplateName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç”¨äºŽå¯¹è¯ä¹¦è¿›è¡Œç­¾åçš„è¯ä¹¦æ¨¡æ¿åï¼ˆä¸€ä¸ª Microsoft æ‰©å±•ï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/csp&lt;/code&gt;  CSPName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šåŒ…å«ç§é’¥å®¹å™¨çš„åŠ å¯†æœåŠ¡æä¾›ç¨‹åº (CSP)ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/d&lt;/code&gt;  Desc&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šå·²ç­¾åå†…å®¹çš„è¯´æ˜Žã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/du&lt;/code&gt;  URL&lt;/td&gt;
      &lt;td&gt;ä¸ºå·²ç­¾åå†…å®¹çš„è¯¦ç»†è¯´æ˜ŽæŒ‡å®šç»Ÿä¸€èµ„æºå®šä½å™¨ (URL)ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/f&lt;/code&gt;  SignCertFile&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæ–‡ä»¶ä¸­çš„ç­¾åè¯ä¹¦ã€‚ å¦‚æžœæ–‡ä»¶é‡‡ç”¨ä¸ªäººä¿¡æ¯äº¤æ¢ (PFX) æ ¼å¼ä¸”å—å¯†ç ä¿æŠ¤ï¼Œåˆ™ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p&lt;/code&gt; é€‰é¡¹æŒ‡å®šå¯†ç ã€‚ å¦‚æžœæ–‡ä»¶ä¸åŒ…å«ç§é’¥ï¼Œåˆ™ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/csp&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/kc&lt;/code&gt; é€‰é¡¹æŒ‡å®š CSP å’Œç§é’¥å®¹å™¨åã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/fd&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šè¦ç”¨äºŽåˆ›å»ºæ–‡ä»¶ç­¾åçš„æ–‡ä»¶æ‘˜è¦ç®—æ³•ã€‚ é»˜è®¤å€¼ä¸º SHA1ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/i&lt;/code&gt;  IssuerName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åè¯ä¹¦çš„é¢å‘è€…çš„åç§°ã€‚ è¯¥å€¼å¯ä»¥æ˜¯æ•´ä¸ªé¢å‘è€…åç§°çš„å­å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/kc&lt;/code&gt;  PrivKeyContainerName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç§é’¥å®¹å™¨åã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/n&lt;/code&gt;  SubjectName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åè¯ä¹¦çš„ä¸»é¢˜çš„åç§°ã€‚ è¯¥å€¼å¯ä»¥æ˜¯æ•´ä¸ªä¸»é¢˜åç§°çš„å­å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/nph&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¦‚æžœæ”¯æŒï¼Œåˆ™å–æ¶ˆå¯æ‰§è¡Œæ–‡ä»¶çš„é¡µé¢å“ˆå¸Œã€‚ é»˜è®¤å€¼ç”± SIGNTOOL_PAGE_HASHES çŽ¯å¢ƒå˜é‡å’Œ wintrust.dll ç‰ˆæœ¬å†³å®šã€‚ å¯¹äºŽéž PE æ–‡ä»¶ï¼Œå¿½ç•¥æ­¤é€‰é¡¹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p&lt;/code&gt;  Password&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæ‰“å¼€ PFX æ–‡ä»¶æ—¶è¦ä½¿ç”¨çš„å¯†ç ã€‚ ï¼ˆä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/f&lt;/code&gt; é€‰é¡¹æŒ‡å®š PFX æ–‡ä»¶ã€‚ï¼‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p7&lt;/code&gt; &lt;em&gt;è·¯å¾„&lt;/em&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä¸ºæ¯ä¸ªæŒ‡å®šçš„å†…å®¹æ–‡ä»¶ç”Ÿæˆçš„å…¬é’¥åŠ å¯†æ ‡å‡† (PKCS) #7 æ–‡ä»¶ã€‚ PKCS #7 æ–‡ä»¶å‘½åä¸º path\filename.p7ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p7ce&lt;/code&gt; Value&lt;/td&gt;
      &lt;td&gt;ä¸ºå·²ç­¾åçš„ PKCS #7 å†…å®¹æŒ‡å®šé€‰é¡¹ã€‚ å°† Value è®¾ç½®ä¸ºâ€œåµŒå…¥çš„â€ï¼Œå¯å°†å·²ç­¾åå†…å®¹åµŒå…¥åˆ° PKCS #7 æ–‡ä»¶ä¸­ï¼›å¦‚æžœè®¾ç½®ä¸ºâ€œDetachedSignedDataâ€ï¼Œåˆ™å¯ç”Ÿæˆåˆ†ç¦»çš„ PKCS #7 æ–‡ä»¶çš„å·²ç­¾åæ•°æ®éƒ¨åˆ†ã€‚ å¦‚æžœæœªä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p7ce&lt;/code&gt; é€‰é¡¹ï¼Œé»˜è®¤æƒ…å†µä¸‹å°†åµŒå…¥å·²ç­¾åçš„å†…å®¹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p7co&lt;/code&gt; &amp;lt;OID&amp;gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæ ‡è¯†å·²ç­¾åçš„ PKCS #7 å†…å®¹çš„å¯¹è±¡æ ‡è¯†ç¬¦ (OID)ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ph&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¦‚æžœæ”¯æŒï¼Œåˆ™ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶çš„é¡µé¢å“ˆå¸Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/r&lt;/code&gt;  RootSubjectName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åè¯ä¹¦å¿…é¡»é“¾æŽ¥åˆ°çš„æ ¹è¯ä¹¦çš„ä¸»é¢˜åç§°ã€‚ è¯¥å€¼å¯ä»¥æ˜¯æ ¹è¯ä¹¦çš„æ•´ä¸ªä¸»é¢˜åç§°çš„å­å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/s&lt;/code&gt;  StoreName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šè¦åœ¨æœç´¢è¯ä¹¦æ—¶æ‰“å¼€çš„å­˜å‚¨ã€‚ å¦‚æžœæœªæŒ‡å®šè¯¥é€‰é¡¹ï¼Œåˆ™æ‰“å¼€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;My&lt;/code&gt; å­˜å‚¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/sha1&lt;/code&gt;  Hash&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åè¯ä¹¦çš„ SHA1 å“ˆå¸Œã€‚ å½“å¤šä¸ªè¯ä¹¦æ»¡è¶³å‰©ä½™å¼€å…³æŒ‡å®šçš„æ¡ä»¶æ—¶ï¼Œé€šå¸¸ä¼šæŒ‡å®š SHA1 å“ˆå¸Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/sm&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šä½¿ç”¨è®¡ç®—æœºå­˜å‚¨ï¼Œè€Œä¸æ˜¯ç”¨æˆ·å­˜å‚¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/t&lt;/code&gt;  URL&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæ—¶é—´æˆ³æœåŠ¡å™¨çš„ URLã€‚ å¦‚æžœè¯¥é€‰é¡¹ï¼ˆæˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt;ï¼‰ä¸å­˜åœ¨ï¼Œå°†ä¸ä¼šå¯¹ç­¾åæ–‡ä»¶æ‰§è¡Œæ—¶é—´æˆ³æ“ä½œã€‚ å¦‚æžœæ—¶é—´æˆ³æ“ä½œå¤±è´¥ï¼Œå°†ç”Ÿæˆä¸€ä¸ªè­¦å‘Šã€‚ æ­¤é€‰é¡¹ä¸èƒ½ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt; é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/td&lt;/code&gt;  alg&lt;/td&gt;
      &lt;td&gt;å°†æ­¤é€‰é¡¹ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt; é€‰é¡¹ä¸€èµ·ä½¿ç”¨å¯è¯·æ±‚ RFC 3161 æ—¶é—´æˆ³æœåŠ¡å™¨ä½¿ç”¨çš„æ‘˜è¦ç®—æ³•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt;  URL&lt;/td&gt;
      &lt;td&gt;æŒ‡å®š RFC 3161 æ—¶é—´æˆ³æœåŠ¡å™¨çš„ URLã€‚ å¦‚æžœè¯¥é€‰é¡¹ï¼ˆæˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/t&lt;/code&gt;ï¼‰ä¸å­˜åœ¨ï¼Œå°†ä¸ä¼šå¯¹ç­¾åæ–‡ä»¶æ‰§è¡Œæ—¶é—´æˆ³æ“ä½œã€‚ å¦‚æžœæ—¶é—´æˆ³æ“ä½œå¤±è´¥ï¼Œå°†ç”Ÿæˆä¸€ä¸ªè­¦å‘Šã€‚ æ­¤é€‰é¡¹ä¸èƒ½ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/t&lt;/code&gt; é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/u&lt;/code&gt;  Usage&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åè¯ä¹¦ä¸­å¿…é¡»å­˜åœ¨çš„å¢žå¼ºåž‹å¯†é’¥ç”¨æ³• (EKU)ã€‚ å¯ä»¥é€šè¿‡ OID æˆ–å­—ç¬¦ä¸²æŒ‡å®šè¯¥ç”¨æ³•çš„å€¼ã€‚ é»˜è®¤ç”¨æ³•ä¸ºâ€œä»£ç ç­¾åâ€(1.3.6.1.5.5.7.3.3)ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/uw&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šâ€œWindows ç³»ç»Ÿç»„ä»¶éªŒè¯â€(1.3.6.1.4.1.311.10.3.6) çš„ç”¨æ³•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;æœ‰å…³ç”¨æ³•ç¤ºä¾‹ï¼Œè¯·å‚é˜… &lt;a href=&quot;https://docs.microsoft.com/zh-cn/windows/win32/seccrypto/using-signtool-to-sign-a-file&quot;&gt;ã€ŒMicrosoft Docs - Using SignTool to Sign a Fileã€&lt;/a&gt;ï¼ˆä½¿ç”¨ SignTool ä¸ºæ–‡ä»¶ç­¾åï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;TimeStamp&quot;&gt;&lt;/a&gt;
&lt;span id=&quot;5.4.5&quot;&gt;&lt;strong&gt;5.4.5 TimeStamp å‘½ä»¤é€‰é¡¹&lt;/strong&gt;&lt;/span&gt; 
 ä¸‹è¡¨åˆ—å‡ºäº†å¯ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TimeStamp&lt;/code&gt; å‘½ä»¤ä¸€èµ·ä½¿ç”¨çš„é€‰é¡¹ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;TimeStamp é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p7&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;å¯¹ PKCS #7 æ–‡ä»¶æ‰§è¡Œæ—¶é—´æˆ³æ“ä½œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/t&lt;/code&gt;  URL&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šæ—¶é—´æˆ³æœåŠ¡å™¨çš„ URLã€‚ è¦æ‰§è¡Œæ—¶é—´æˆ³æ“ä½œçš„æ–‡ä»¶å¿…é¡»åœ¨ä»¥å‰å·²è¿›è¡Œç­¾åã€‚ éœ€è¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/t&lt;/code&gt; æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt; é€‰é¡¹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/td&lt;/code&gt;  alg&lt;/td&gt;
      &lt;td&gt;è¯·æ±‚ RFC 3161 æ—¶é—´æˆ³æœåŠ¡å™¨ä½¿ç”¨çš„æ‘˜è¦ç®—æ³•ã€‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/td&lt;/code&gt; ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt; é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tp&lt;/code&gt; index&lt;/td&gt;
      &lt;td&gt;å¯¹ index å¤„çš„ç­¾åè¿›è¡Œæ—¶é—´æˆ³æ“ä½œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt;  URL&lt;/td&gt;
      &lt;td&gt;æŒ‡å®š RFC 3161 æ—¶é—´æˆ³æœåŠ¡å™¨çš„ URLã€‚ è¦æ‰§è¡Œæ—¶é—´æˆ³æ“ä½œçš„æ–‡ä»¶å¿…é¡»åœ¨ä»¥å‰å·²è¿›è¡Œç­¾åã€‚ éœ€è¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tr&lt;/code&gt; æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/t&lt;/code&gt; é€‰é¡¹ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;æœ‰å…³ä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·å‚é˜… &lt;a href=&quot;https://docs.microsoft.com/zh-cn/windows/win32/seccrypto/adding-time-stamps-to-previously-signed-files&quot;&gt;ã€ŒMicrosoft Docs - Adding Time Stamps to Previously Signed Filesã€&lt;/a&gt;ï¼ˆå‘ä¹‹å‰å·²ç­¾åçš„æ–‡ä»¶æ·»åŠ æ—¶é—´æˆ³ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;Verify&quot;&gt;&lt;/a&gt;
&lt;span id=&quot;5.4.6&quot;&gt;&lt;strong&gt;5.4.6 Verify å‘½ä»¤é€‰é¡¹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Verify é€‰é¡¹&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/a&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šå¯ä»¥ä½¿ç”¨æ‰€æœ‰æ–¹æ³•æ¥éªŒè¯æ–‡ä»¶ã€‚ é¦–å…ˆï¼Œæœç´¢ç›®å½•æ•°æ®åº“ä»¥ç¡®å®šæ˜¯å¦åœ¨ç›®å½•ä¸­å¯¹æ–‡ä»¶è¿›è¡Œç­¾åã€‚ å¦‚æžœæœªåœ¨ä»»ä½•ç›®å½•ä¸­å¯¹æ–‡ä»¶è¿›è¡Œç­¾åï¼Œç­¾åå·¥å…·å°†å°è¯•éªŒè¯æ–‡ä»¶çš„åµŒå…¥ç­¾åã€‚ éªŒè¯å¯ä»¥æˆ–ä¸èƒ½åœ¨ç›®å½•ä¸­è¿›è¡Œç­¾åçš„æ–‡ä»¶æ—¶ï¼Œå»ºè®®ä½¿ç”¨è¯¥é€‰é¡¹ã€‚ è¿™äº›æ–‡ä»¶çš„ç¤ºä¾‹åŒ…æ‹¬ Windows æ–‡ä»¶æˆ–é©±åŠ¨ç¨‹åºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ad&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä½¿ç”¨é»˜è®¤çš„ç›®å½•æ•°æ®åº“æŸ¥æ‰¾ç›®å½•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ag&lt;/code&gt; CatDBGUID&lt;/td&gt;
      &lt;td&gt;åœ¨ç”± CatDBGUID æ ‡è¯†çš„ç›®å½•æ•°æ®åº“ä¸­æŸ¥æ‰¾ç›®å½•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/all&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;éªŒè¯åŒ…å«å¤šä¸ªç­¾åçš„æ–‡ä»¶ä¸­çš„æ‰€æœ‰ç­¾åã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/as&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä½¿ç”¨ç³»ç»Ÿç»„ä»¶ï¼ˆé©±åŠ¨ç¨‹åºï¼‰ç›®å½•æ•°æ®åº“æŸ¥æ‰¾ç›®å½•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/c&lt;/code&gt; CatFile&lt;/td&gt;
      &lt;td&gt;é€šè¿‡åç§°æŒ‡å®šç›®å½•æ–‡ä»¶ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/d&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åå·¥å…·åº”æ‰“å°æè¿°å’Œæè¿° URLã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ds&lt;/code&gt;  Index&lt;/td&gt;
      &lt;td&gt;éªŒè¯æŒ‡å®šä½ç½®çš„ç­¾åã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/hash&lt;/code&gt; (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SHA1&lt;/code&gt;|&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SHA256&lt;/code&gt;)&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šåœ¨ç›®å½•ä¸­æœç´¢æ–‡ä»¶æ—¶è¦ä½¿ç”¨çš„å¯é€‰å“ˆå¸Œç®—æ³•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/kp&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šåº”ä½¿ç”¨å†…æ ¸æ¨¡å¼é©±åŠ¨ç¨‹åºç­¾åç­–ç•¥æ‰§è¡ŒéªŒè¯ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ms&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;ä½¿ç”¨å¤šä¸ªéªŒè¯è¯­ä¹‰ã€‚ è¿™æ˜¯ Windows 8 å’Œæ›´é«˜ç‰ˆæœ¬ä¸Šçš„ &lt;a href=&quot;https://docs.microsoft.com/zh-cn/windows/win32/seccrypto/using-signtool-to-verify-a-file-signature&quot;&gt;ã€ŒMicrosoft Docs - WinVerifyTrustã€&lt;/a&gt; è°ƒç”¨çš„é»˜è®¤è¡Œä¸ºã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/o&lt;/code&gt; Version&lt;/td&gt;
      &lt;td&gt;æŒ‰æ“ä½œç³»ç»Ÿç‰ˆæœ¬éªŒè¯æ–‡ä»¶ã€‚ ç‰ˆæœ¬å…·æœ‰ä»¥ä¸‹æ ¼å¼ï¼šPlatformIDï¼šVerMajor.VerMinor.BuildNumberã€‚ PlatformID è¡¨ç¤º &lt;xref:System.PlatformID&gt; æžšä¸¾æˆå‘˜çš„åŸºç¡€å€¼ã€‚ **é‡è¦æç¤ºï¼š** å»ºè®®ä½¿ç”¨ `/o` å¼€å…³ã€‚ å¦‚æžœæœªæŒ‡å®š `/o`ï¼ŒSignTool.exe å¯èƒ½ä¼šè¿”å›žæ„å¤–çš„ç»“æžœã€‚ ä¾‹å¦‚ï¼Œå¦‚æžœä½ æœªå°† `/o` å¼€å…³åŒ…å«åœ¨å†…ï¼Œåˆ™èƒ½åœ¨æ—§ç‰ˆæ“ä½œç³»ç»Ÿä¸Šæ­£ç¡®éªŒè¯çš„ç³»ç»Ÿç›®å½•å¯èƒ½åœ¨æ–°ç‰ˆæ“ä½œç³»ç»Ÿä¸Šæ— æ³•æ­£ç¡®éªŒè¯ã€‚&lt;/xref:System.PlatformID&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/p7&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;éªŒè¯ PKCS #7 æ–‡ä»¶ã€‚ æ— çŽ°æœ‰ç­–ç•¥ç”¨äºŽ PKCS #7 éªŒè¯ã€‚ è¯¥ç­¾åå¤„äºŽé€‰ä¸­çŠ¶æ€ï¼Œå¹¶ä¸ºç­¾åè¯ä¹¦ç”Ÿæˆäº†é“¾ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pa&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šåº”ä½¿ç”¨é»˜è®¤è®¤è¯ç éªŒè¯ç­–ç•¥ã€‚ å¦‚æžœæœªæŒ‡å®š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pa&lt;/code&gt; é€‰é¡¹ï¼Œç­¾åå·¥å…·å°†ä½¿ç”¨ Windows é©±åŠ¨ç¨‹åºéªŒè¯ç­–ç•¥ã€‚ æ­¤é€‰é¡¹ä¸èƒ½ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;catdb&lt;/code&gt; é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pg&lt;/code&gt; PolicyGUID&lt;/td&gt;
      &lt;td&gt;é€šè¿‡ GUID æŒ‡å®šéªŒè¯ç­–ç•¥ã€‚ PolicyGUID ç›¸å½“äºŽéªŒè¯ç­–ç•¥çš„ ActionIDã€‚ æ­¤é€‰é¡¹ä¸èƒ½ä¸Ž &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;catdb&lt;/code&gt; é€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ph&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åå·¥å…·åº”æ‰“å°å¹¶éªŒè¯é¡µé¢å“ˆå¸Œå€¼ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/r&lt;/code&gt; RootSubjectName&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šç­¾åè¯ä¹¦å¿…é¡»é“¾æŽ¥åˆ°çš„æ ¹è¯ä¹¦çš„ä¸»é¢˜åç§°ã€‚ è¯¥å€¼å¯ä»¥æ˜¯æ ¹è¯ä¹¦çš„æ•´ä¸ªä¸»é¢˜åç§°çš„å­å­—ç¬¦ä¸²ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/tw&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šåœ¨æœªå¯¹ç­¾åè¿›è¡Œæ—¶é—´æˆ³æ“ä½œæ—¶åº”ç”Ÿæˆè­¦å‘Šã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;span id=&quot;5.4.7&quot;&gt;&lt;strong&gt;5.4.7 è¿”å›žå€¼&lt;/strong&gt;&lt;/span&gt;  &lt;br /&gt;
 å½“å…¶ç»ˆæ­¢æ—¶ï¼Œç­¾åå·¥å…·å°†è¿”å›žä¸‹åˆ—é€€å‡ºä»£ç ä¹‹ä¸€ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;é€€å‡ºä»£ç &lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;æ‰§è¡ŒæˆåŠŸã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;æ‰§è¡Œå¤±è´¥ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;æ‰§è¡Œå®Œæˆï¼Œä½†å‡ºçŽ°è­¦å‘Šã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;span id=&quot;5.4.8&quot;&gt;&lt;strong&gt;5.4.8 ç¤ºä¾‹&lt;/strong&gt;&lt;/span&gt;   &lt;br /&gt;
 ä»¥ä¸‹å‘½ä»¤å°†ç›®å½•æ–‡ä»¶ MyCatalogFileName.cat æ·»åŠ åˆ°ç³»ç»Ÿç»„ä»¶å’Œé©±åŠ¨ç¨‹åºæ•°æ®åº“ä¸­ã€‚ å¦‚æœ‰å¿…è¦é˜»æ­¢æ›¿æ¢åä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/u&lt;/code&gt; çš„çŽ°æœ‰ç›®å½•æ–‡ä»¶ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyCatalogFileName.cat&lt;/code&gt; é€‰é¡¹ä¼šç”Ÿæˆå”¯ä¸€åç§°ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;catdb&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/v /u&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MyCatalogFileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cat&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤é€šè¿‡ä½¿ç”¨æœ€ä½³è¯ä¹¦å¯¹æ–‡ä»¶è¿›è¡Œè‡ªåŠ¨ç­¾åã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/a MyFile.exe  &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨å­˜å‚¨åœ¨å—å¯†ç ä¿æŠ¤çš„ PFX æ–‡ä»¶ä¸­çš„è¯ä¹¦å¯¹æ–‡ä»¶è¿›è¡Œæ•°å­—ç­¾åã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/f MyCert.pfx /&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MyPassword&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MyFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exe&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤å¯¹æ–‡ä»¶è¿›è¡Œæ•°å­—ç­¾åå¹¶åŠ ç›–æ—¶é—´æˆ³ã€‚ ç”¨äºŽå¯¹æ–‡ä»¶è¿›è¡Œç­¾åçš„è¯ä¹¦å­˜å‚¨åœ¨ PFX æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/f MyCert.pfx /&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;digicert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MyFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exe&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤é€šè¿‡ä½¿ç”¨ä½äºŽ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;My&lt;/code&gt; å­˜å‚¨ä¸­çš„è¯ä¹¦å¯¹æ–‡ä»¶è¿›è¡Œç­¾åï¼Œè¯¥è¯ä¹¦çš„ä¸»é¢˜åä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;My Company Certificate&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/n &quot;My Company Certificate&quot; MyFile.exe  &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤å¯¹ ActiveX æŽ§ä»¶è¿›è¡Œç­¾åï¼Œå¹¶æä¾›åœ¨ç³»ç»Ÿæç¤ºç”¨æˆ·å®‰è£…æ­¤æŽ§ä»¶æ—¶ç”± Internet Explorer æ˜¾ç¤ºçš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sign&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/f MyCert.pfx /&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;d: &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MyControl&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;du&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;www&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;MyControl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MyControl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exe&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤å¯¹å·²è¿›è¡Œæ•°å­—ç­¾åçš„æ–‡ä»¶åŠ ç›–æ—¶é—´æˆ³ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timestamp&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/t http:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;digicert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MyFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exe&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤ç¡®è®¤æ–‡ä»¶å·²ç­¾åã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verify&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MyFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exe&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤éªŒè¯å¯èƒ½å·²åœ¨ç›®å½•ä¸­ç­¾åçš„ç³»ç»Ÿæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verify&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/a SystemFile.dll  &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹å‘½ä»¤éªŒè¯å·²åœ¨åä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyCatalog.cat&lt;/code&gt; ç›®å½•ä¸­ç­¾åçš„ç³»ç»Ÿæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;signtool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verify&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/c MyCatalog.cat SystemFile.dll  &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name>david.dong</name></author><category term="Security" /><category term="Windows" /><category term="Security" /><category term="Windows" /><summary type="html">çœ‹è¿‡æˆ‘è¿™ä¸€ç¯‡æ–‡ç«  ã€Œæµ…è°ˆæ•°å­—ç­¾åã€ çš„è¯»è€…åº”è¯¥è®°å¾—ï¼Œåœ¨è¿™ç¯‡æ–‡ç« çš„æœ«å°¾é—ç•™äº†ä¸€ä¸ªé—®é¢˜ â€” åœ¨windowså¹³å°ä¸‹å¦‚ä½•åˆ©ç”¨Microsoftæä¾›çš„å·¥å…·æ¥ç”Ÿæˆæ•°å­—ç­¾åã€‚æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä¼šå¯¹è¿™ä¸ªé—®é¢˜åšä¸€ä¸ªè¯´æ˜Žï¼Œå¹¶å¼•ç”¨ä¸€ä¸ªä¾‹å­æ¥ä»‹ç»ç­¾åçš„è¿‡ç¨‹ã€‚</summary></entry><entry><title type="html">mbedtls ä½¿ç”¨è¯´æ˜Ž</title><link href="http://localhost:4000/daviddong.github.io/security/2020/07/10/Security-mbedtls.html" rel="alternate" type="text/html" title="mbedtls ä½¿ç”¨è¯´æ˜Ž" /><published>2020-07-10T10:24:12+08:00</published><updated>2020-07-10T10:24:12+08:00</updated><id>http://localhost:4000/daviddong.github.io/security/2020/07/10/Security-mbedtls</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/security/2020/07/10/Security-mbedtls.html">&lt;p&gt;æœ€è¿‘çš„å·¥ä½œä¸­ä½¿ç”¨åˆ°äº†mbedtlsï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚&lt;/p&gt;

&lt;h2 id=&quot;1-ä»€ä¹ˆæ˜¯-mbedtls&quot;&gt;&lt;span id=&quot;1&quot;&gt;1. ä»€ä¹ˆæ˜¯ mbedtls&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;mbedtls ä¸€å¥è¯æ¥æ¦‚å†µçš„è¯å°±æ˜¯å®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„SSL/TLSåº“ã€‚ &lt;br /&gt;
&lt;a href=&quot;https://github.com/ARMmbed/mbedtls#readme-for-mbed-tls&quot;&gt;â€“é¡¹ç›®æºç åœ°å€&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://tls.mbed.org/api/&quot;&gt;â€“é¡¹ç›®APIæ–‡æ¡£&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;11-ssl&quot;&gt;&lt;span id=&quot;1.1&quot;&gt;1.1 SSL&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;å…³äºŽSSL(Secure Sockets Layer å®‰å…¨å¥—æŽ¥å­—åè®®)ï¼Œç™¾åº¦ç™¾ç§‘çš„è§£é‡Šå¦‚ä¸‹&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;SSLåè®®ä½äºŽTCP/IPåè®®ä¸Žå„ç§åº”ç”¨å±‚åè®®ä¹‹é—´ï¼Œä¸ºæ•°æ®é€šè®¯æä¾›å®‰å…¨æ”¯æŒã€‚SSLåè®®å¯åˆ†ä¸ºä¸¤å±‚ï¼š&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;SSLè®°å½•åè®®ï¼ˆSSL Record Protocolï¼‰ï¼šå®ƒå»ºç«‹åœ¨å¯é çš„ä¼ è¾“åè®®ï¼ˆå¦‚TCPï¼‰ä¹‹ä¸Šï¼Œä¸ºé«˜å±‚åè®®æä¾›æ•°æ®å°è£…ã€åŽ‹ç¼©ã€åŠ å¯†ç­‰åŸºæœ¬åŠŸèƒ½çš„æ”¯æŒã€‚&lt;/li&gt;
    &lt;li&gt;SSLæ¡æ‰‹åè®®ï¼ˆSSL Handshake Protocolï¼‰ï¼šå®ƒå»ºç«‹åœ¨SSLè®°å½•åè®®ä¹‹ä¸Šï¼Œç”¨äºŽåœ¨å®žé™…çš„æ•°æ®ä¼ è¾“å¼€å§‹å‰ï¼Œé€šè®¯åŒæ–¹è¿›è¡Œèº«ä»½è®¤è¯ã€åå•†åŠ å¯†ç®—æ³•ã€äº¤æ¢åŠ å¯†å¯†é’¥ç­‰ã€‚&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;TLSä¸ŽSSLåœ¨ä¼ è¾“å±‚ä¸Žåº”ç”¨å±‚ä¹‹é—´å¯¹ç½‘ç»œè¿žæŽ¥è¿›è¡ŒåŠ å¯†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;12-mbedtls-ç‰¹ç‚¹&quot;&gt;&lt;span id=&quot;1.2&quot;&gt;1.2 mbedtls ç‰¹ç‚¹&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;mbedtls æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ç®€æ´çš„API&lt;/li&gt;
  &lt;li&gt;å¼€æºä»£ç åº“&lt;/li&gt;
  &lt;li&gt;åŠŸèƒ½æ¨¡å—åŒ–ï¼Œæ¾è€¦åˆã€‚&lt;/li&gt;
  &lt;li&gt;æ¨¡å—å¯å•ç‹¬é…ç½®ï¼Œç¼–è¯‘&lt;/li&gt;
  &lt;li&gt;C è¯­è¨€ç¼–å†™ï¼Œé’ˆå¯¹åµŒå…¥å¼åº”ç”¨&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»ŽåŠŸèƒ½è§’åº¦æ¥çœ‹ï¼Œmbedtlså¯ä»¥åˆ†ä¸ºä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;SSL/TLS åè®®åº“ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libmbedtls.a&lt;/code&gt;ï¼‰&lt;/li&gt;
  &lt;li&gt;åŠ å¯†åº“ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libmbedcrypto.a&lt;/code&gt;ï¼‰&lt;/li&gt;
  &lt;li&gt;X.509 è¯ä¹¦å¤„ç†åº“ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libmbedx509.a&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šè¿™ä¸‰ä¸ªåº“åœ¨ç”Ÿæˆçš„æ—¶å€™çš„ä¾èµ–å…³ç³»ï¼Œlibmbedtls.a ä¾èµ– libmbedx509.a è€Œ libmbedx509.a ä¾èµ– libmbedcrypto.aã€‚&lt;/strong&gt; å› æ­¤åœ¨ç”Ÿæˆæ—¶è¦æ³¨æ„é¡ºåºé—®é¢˜ã€‚&lt;/p&gt;

&lt;h3 id=&quot;13-mbedtls-æ¨¡å—&quot;&gt;&lt;span id=&quot;1.3&quot;&gt;1.3 mbedtls æ¨¡å—&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;mbedtlsåº“åŒ…å«ä»¥ä¸‹çš„æ¨¡å—ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;æ¨¡å—&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Encryption/decryption module&lt;/td&gt;
      &lt;td&gt;åŠ è§£å¯†æ¨¡å—&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Hashing module&lt;/td&gt;
      &lt;td&gt;The Message Digest (MD)æä¾›äº†hash åŠŸèƒ½&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Random number generator (RNG) module&lt;/td&gt;
      &lt;td&gt;æä¾›äº†éšæœºæ•°äº§ç”ŸåŠŸèƒ½ï¼Œsee &lt;a href=&quot;https://tls.mbed.org/api/ctr__drbg_8h.html#af6e4dd295ae790a33128562dd01c79ab&quot;&gt;mbedtls_ctr_drbg_random()&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;SSL/TLS communication module&lt;/td&gt;
      &lt;td&gt;æä¾›äº†æ–¹å¼å»ºç«‹SSL/TLSé€šè®¯é€šé“&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;TCP/IP communication module&lt;/td&gt;
      &lt;td&gt;provides for a channel of communication for the SSL/TLS communication module to use&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;X.509 module&lt;/td&gt;
      &lt;td&gt;æä¾›äº†X.509çš„æ”¯æŒï¼Œç”¨äºŽè¯ä¹¦çš„è¯»å†™å’Œè®¤è¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Asn1_module&lt;/td&gt;
      &lt;td&gt;Â &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;2-mbedtls-å®‰è£…ä¸Žé…ç½®&quot;&gt;&lt;span id=&quot;2&quot;&gt;2. mbedtls å®‰è£…ä¸Žé…ç½®&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;mbedtlsæ”¯æŒ3ç§ build æ–¹å¼ï¼Œ&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;GNU Make&lt;/li&gt;
  &lt;li&gt;CMake&lt;/li&gt;
  &lt;li&gt;Microsoft Visual Studio (Microsoft Visual Studio 2013 or later)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;21-å·¥å…·é“¾æ”¯æŒ&quot;&gt;&lt;span id=&quot;2.1&quot;&gt;2.1 å·¥å…·é“¾æ”¯æŒ&lt;/span&gt;&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;GNU Make æˆ–è€… CMake build å·¥å…·.&lt;/li&gt;
  &lt;li&gt;C99 å·¥å…·é“¾ (compiler, linker, achiever). ç›®å‰æ”¯æŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GCC5.4&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Clang 3.8&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IAR8&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Visual Studio 2013&lt;/code&gt; ä»¥åŽçš„ç‰ˆæœ¬.&lt;/li&gt;
  &lt;li&gt;Python 3 ç”¨äºŽäº§ç”Ÿæµ‹è¯•ä»£ç .&lt;/li&gt;
  &lt;li&gt;Perl ç”¨äºŽè¿è¡Œæµ‹è¯•.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;22-gnu-make&quot;&gt;&lt;span id=&quot;2.2&quot;&gt;2.2 GNU Make&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;run build&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;make&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;build with test&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;build without test&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;no_test&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;23-cmake&quot;&gt;&lt;span id=&quot;2.3&quot;&gt;2.3 CMake&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;run build&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/path/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/path/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build_dir&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cmake&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/path/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mbedtls_source&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cmake&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;run test&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ctest&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;build without test&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;cmake&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DENABLE_TESTING&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Off&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/path/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mbedtls_source&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;make shared library&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;cmake&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DUSE_SHARED_MBEDTLS_LIBRARY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;On&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/path/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mbedtls_source&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;24-microsoft-visual-studio&quot;&gt;&lt;span id=&quot;2.4&quot;&gt;2.4 Microsoft Visual Studio&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;å·¥ç¨‹æ–‡ä»¶&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mbedTLS.sln&lt;/code&gt; åŒ…å«äº†æ‰€æœ‰å¿…éœ€çš„é¡¹ç›®å’Œç¨‹åº. ç¼–è¯‘è¯¥å·¥ç¨‹æ–‡ä»¶å¯ä»¥ç”Ÿæˆåº“æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;å…³äºŽæ›´å¤šçš„ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥å‚é˜… &lt;a href=&quot;https://github.com/ARMmbed/mbedtls#readme-for-mbed-tls&quot;&gt;GitHub README for Mbed TLS&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;3-mbedtls-ä½¿ç”¨&quot;&gt;&lt;span id=&quot;3&quot;&gt;3. mbedtls ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;

&lt;p&gt;mbedtlsé€šè¿‡æä¾›ä»¥ä¸‹åŠŸèƒ½æ”¯æŒ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SSLv3&lt;/code&gt;åˆ°&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TLSv1.2&lt;/code&gt;ç‰ˆæœ¬çš„é€šä¿¡ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;TCP/IPé€šä¿¡åŠŸèƒ½ï¼šç›‘å¬ã€è¿žæŽ¥ã€æŽ¥å—ã€è¯»/å†™&lt;/li&gt;
  &lt;li&gt;SSL/TLSé€šä¿¡åŠŸèƒ½ï¼šåˆå§‹åŒ–ã€æ¡æ‰‹ã€è¯»/å†™&lt;/li&gt;
  &lt;li&gt;X.509åŠŸèƒ½ï¼šCRTã€CRLå’ŒæŒ‰é”®å¤„ç†&lt;/li&gt;
  &lt;li&gt;éšæœºæ•°ç”Ÿæˆ&lt;/li&gt;
  &lt;li&gt;æ•£åˆ—&lt;/li&gt;
  &lt;li&gt;åŠ å¯†/è§£å¯†&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸Šé¢çš„åŠŸèƒ½è¢«æ•´é½åœ°è®¾è®¡æˆé€»è¾‘æŽ¥å£ã€‚å®ƒä»¬å¯ä»¥å•ç‹¬ç”¨äºŽæä¾›ä¸Šè¿°ä»»ä½•åŠŸèƒ½ï¼Œæˆ–è€…æ··åˆå’ŒåŒ¹é…åˆ°ä½¿ç”¨X.509 PKIçš„SSLæœåŠ¡å™¨/å®¢æˆ·ç«¯è§£å†³æ–¹æ¡ˆä¸­ã€‚&lt;/p&gt;

&lt;h3 id=&quot;31-ä¾‹å­&quot;&gt;&lt;span id=&quot;3.1&quot;&gt;3.1 ä¾‹å­&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;æœåŠ¡å™¨ç«¯çš„è®¾å®š: &lt;br /&gt;
&lt;strong&gt;å…ˆå†³æ¡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;X.509è¯ä¹¦å’Œç§é’¥&lt;/li&gt;
  &lt;li&gt;ä¼šè¯å¤„ç†å‡½æ•°
&lt;strong&gt;è®¾å®šæ­¥éª¤&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;åŠ è½½è¯ä¹¦å’Œç§é’¥ï¼ˆX.509æŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;è®¾ç½®ä¾¦å¬TCPå¥—æŽ¥å­—ï¼ˆTCP/IPæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;æŽ¥å—ä¼ å…¥å®¢æˆ·ç«¯è¿žæŽ¥ï¼ˆTCP/IPæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;åˆå§‹åŒ–ä¸ºSSLæœåŠ¡å™¨ï¼ˆSSL/TLSæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;è®¾ç½®å‚æ•°ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯ã€å¯†ç ã€CAé“¾ã€å¯†é’¥äº¤æ¢&lt;/li&gt;
  &lt;li&gt;è®¾ç½®å›žè°ƒå‡½æ•°RNGã€IOã€ä¼šè¯å¤„ç†&lt;/li&gt;
  &lt;li&gt;æ‰§è¡ŒSSLæ¡æ‰‹ï¼ˆSSL/TLSæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;è¯»/å†™æ•°æ®ï¼ˆSSL/TLSæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;å…³é—­å’Œæ¸…ç†ï¼ˆæ‰€æœ‰æŽ¥å£ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å®¢æˆ·ç«¯çš„è®¾å®š: &lt;br /&gt;
&lt;strong&gt;å…ˆå†³æ¡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;X.509è¯ä¹¦å’Œç§é’¥&lt;/li&gt;
  &lt;li&gt;X.509å¯ä¿¡CAè¯ä¹¦
&lt;strong&gt;è®¾å®šæ­¥éª¤&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;åŠ è½½å—ä¿¡ä»»çš„CAè¯ä¹¦ï¼ˆX.509æŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;åŠ è½½è¯ä¹¦å’Œç§é’¥ï¼ˆX.509æŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;è®¾ç½®TCP/IPè¿žæŽ¥ï¼ˆTCP/IPæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;åˆå§‹åŒ–ä¸ºSSLå®¢æˆ·ç«¯ï¼ˆSSL/TLSæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;è®¾ç½®å‚æ•°ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯æ¨¡å¼ã€å¯†ç ã€CAé“¾ã€ä¼šè¯&lt;/li&gt;
  &lt;li&gt;è®¾ç½®å›žè°ƒå‡½æ•°RNGï¼ŒIO&lt;/li&gt;
  &lt;li&gt;æ‰§è¡ŒSSLæ¡æ‰‹ï¼ˆSSL/TLSæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;éªŒè¯æœåŠ¡å™¨è¯ä¹¦ï¼ˆSSL/TLSæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;å†™å…¥/è¯»å–æ•°æ®ï¼ˆSSL/TLSæŽ¥å£ï¼‰&lt;/li&gt;
  &lt;li&gt;å…³é—­å’Œæ¸…ç†ï¼ˆæ‰€æœ‰æŽ¥å£ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;32-ssltls-éƒ¨åˆ†åŠŸèƒ½&quot;&gt;&lt;span id=&quot;3.2&quot;&gt;3.2 SSL/TLS éƒ¨åˆ†åŠŸèƒ½&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;mbed tlsçš„ssl/tlséƒ¨åˆ†æä¾›äº†ä½¿ç”¨ssl/tlsé€šè¿‡å®‰å…¨é€šä¿¡é€šé“å»ºç«‹å’Œé€šä¿¡æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;å…¶åŸºæœ¬è§„å®šæ˜¯:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;åˆå§‹åŒ–ä¸€ä¸ªSSL/TLS context&lt;/li&gt;
  &lt;li&gt;æ‰§è¡Œä¸€ä¸ªSSL/TLSæ¡æ‰‹(handshake)&lt;/li&gt;
  &lt;li&gt;å‘é€/æŽ¥æ”¶æ•°æ®&lt;/li&gt;
  &lt;li&gt;é€šçŸ¥å¯¹æ–¹ä¸€ä¸ªè¿žæŽ¥æ­£åœ¨å…³é—­&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸€ä¸ªé€šé“å¾ˆå¤šæ–¹é¢éƒ½æ˜¯é€šè¿‡å‚æ•°å’Œå›žè°ƒå‡½æ•°æ¥è®¾ç½®çš„Â Â»&amp;gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ç«¯ç‚¹è§’è‰²(endpoint role),å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨&lt;/li&gt;
  &lt;li&gt;èº«ä»½éªŒè¯æ¨¡å¼: æ˜¯å¦åº”è¯¥è¿›è¡Œè¯ä¹¦éªŒè¯&lt;/li&gt;
  &lt;li&gt;ä¸»æœºåˆ°ä¸»æœºé€šä¿¡é€šé“: å‘é€å’ŒæŽ¥æ”¶åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;éšæœºæ•°ç”Ÿæˆå™¨(RNG)åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;ç”¨äºŽåŠ å¯†/è§£å¯†çš„å¯†ç &lt;/li&gt;
  &lt;li&gt;è¯ä¹¦éªŒè¯åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;ä¼šè¯æŽ§åˆ¶: ä¼šè¯èŽ·å–å’Œè®¾ç½®åŠŸèƒ½&lt;/li&gt;
  &lt;li&gt;è¯ä¹¦å¤„ç†å’Œå¯†é’¥äº¤æ¢çš„X.509å‚æ•°&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;mbed é€šè¿‡åˆ›å»ºä¸€ä¸ªSSL/TLSæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯,é€šè¿‡æä¾›ä¸€ä¸ªæ¡†æž¶æ¥å»ºç«‹å’Œé€šè¿‡SSL/TLSé€šä¿¡é€šé“è¿›è¡Œé€šä¿¡.SSL/TLSéƒ¨åˆ†ç›´æŽ¥ä¾èµ–äºŽåº“çš„è¯ä¹¦è§£æž,å¯¹ç§°å’Œéžå¯¹ç§°å’Œå“ˆå¸Œæ¨¡å—.&lt;/p&gt;

&lt;h3 id=&quot;33-æ•°æ®ç»“æž„&quot;&gt;&lt;span id=&quot;3.3&quot;&gt;3.3 æ•°æ®ç»“æž„&lt;/span&gt;&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;mbedtls_net_contextï¼šç›®å‰åªæœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥ç”¨äºŽé€‚é…å¼‚æ­¥I/Oåº“
mbedtls_ssl_contextï¼šä¿å­˜SSLåŸºæœ¬æ•°æ®
mbedtls_ssl_config: SSL é…ç½®æ•°æ®
mbedtls_ctr_drbg_context
mbedtls_entropy_contextï¼šä¿å­˜ç†µé…ç½®
mbedtls_x509_crtï¼šä¿å­˜è®¤è¯ä¿¡æ¯&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;34-init-é˜¶æ®µ&quot;&gt;&lt;span id=&quot;3.4&quot;&gt;3.4 Init é˜¶æ®µ&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢æ—¶inité˜¶æ®µéœ€è¦è°ƒç”¨çš„å‡½æ•°ä¸Žä¼ ç»Ÿ socket çš„å¯¹æ¯”ã€‚ä¼ ç»Ÿçš„socket-basedçš„ç¨‹åºï¼Œä¾ç…§é¡ºåºï¼Œä½œä¸ºclientè¦åšä»¥ä¸‹çš„å‡½æ•°è°ƒç”¨ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gethostbyname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ”¹æˆSSLä¹‹åŽï¼ŒmbedTLSå¯¹åº”ä¸Šè¿°å‡½æ•°ï¼Œåˆ†åˆ«å¯¹åº”ä¸ºï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gethostbyname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;\&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;socket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;-+--&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mbedtls_net_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mbedtls_ssl_handshake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;           &lt;span class=&quot;o&quot;&gt;----&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mbedtls_ssl_write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;            &lt;span class=&quot;o&quot;&gt;----&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mbedtls_ssl_read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å½“ç„¶ï¼Œå®žé™…æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨æ›´å¤šçš„å…¶ä»–å‡½æ•°ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯inité˜¶æ®µéœ€è¦è°ƒç”¨çš„å„å‡½æ•°ã€‚å‡½æ•°çš„å‚æ•°ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™æŒ‰ç…§ä¸Šé¢çš„å‡½æ•°ç±»åž‹ä¸€ä¸ªä¸€ä¸ªä¼ å…¥å°±è¡Œäº†ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;mbedtls_net_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mbedtld_ssl_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mbedtld_ssl_config_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mbedtls_ctr_drbg_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mbedtld_x509_crt_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mbedtls_entropy_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mebdtls_ctr_drbg_seed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å…¶ä¸­&lt;a href=&quot;https://tls.mbed.org/api/ctr__drbg_8h.html#af6e4dd295ae790a33128562dd01c79ab&quot;&gt;mebdtls_ctr_drbg_seed()&lt;/a&gt;å¯ä»¥æŒ‡å®šç†µå‡½æ•°ã€‚å¦‚æžœå›žè°ƒä½¿ç”¨é»˜è®¤çš„mbedtls_entropy_funcçš„è¯ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªåˆå§‹çš„ç†µseedï¼Œä¹Ÿå¯ä»¥NULLã€‚&lt;/p&gt;

&lt;h3 id=&quot;35-connect-é˜¶æ®µ&quot;&gt;&lt;span id=&quot;3.5&quot;&gt;3.5 Connect é˜¶æ®µ&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://tls.mbed.org/api/ctr__drbg_8h.html#af6e4dd295ae790a33128562dd01c79ab&quot;&gt;mbedtls_net_connect()&lt;/a&gt;ï¼šå‚æ•°æ˜¯serverå’Œç«¯å£ï¼Œå‡ä¸ºå­—ç¬¦ä¸²ã€‚serverå¯ä»¥ä½¿åŸŸåæˆ–è€…IPå­—ç¬¦ä¸²ã€‚æœ€åŽä¸€ä¸ªå‚æ•°ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MBEDTLS_NET_PROTO_TCP&lt;/code&gt;å³å¯ã€‚ç«¯å£å·ä¸ä»…ä»…å¯ä»¥ä¼ å…¥æ•°å­—å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ç±»ä¼¼äºŽget_addrinfoå‡½æ•°çš„protocolå‚æ•°é‚£æ ·ï¼Œä¼ å…¥ç±»ä¼¼äºŽ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HTTPS&lt;/code&gt;è¿™æ ·çš„å¯è¯»åŒ–å­—ç¬¦ä¸²ã€‚&lt;/p&gt;</content><author><name>david.dong</name></author><category term="Security" /><category term="Security" /><summary type="html">æœ€è¿‘çš„å·¥ä½œä¸­ä½¿ç”¨åˆ°äº†mbedtlsï¼Œè¿™é‡Œåšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚</summary></entry><entry><title type="html">Inf2Cat å·¥å…·</title><link href="http://localhost:4000/daviddong.github.io/windows/2020/07/09/Windows-inf2cat.html" rel="alternate" type="text/html" title="Inf2Cat å·¥å…·" /><published>2020-07-09T18:24:12+08:00</published><updated>2020-07-09T18:24:12+08:00</updated><id>http://localhost:4000/daviddong.github.io/windows/2020/07/09/Windows-inf2cat</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/windows/2020/07/09/Windows-inf2cat.html">&lt;p&gt;Windows é©±åŠ¨å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ° Windows WDK è‡ªå¸¦çš„ Inf2Cat.exe å·¥å…·å°†é©±åŠ¨ç¨‹åºçš„ INF æ–‡ä»¶è½¬æˆå¾…ç­¾åçš„ CAT æ ¼å¼çš„ç›®å½•æ–‡ä»¶ã€‚Windows 7 64ä½ç³»ç»Ÿä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œå¦‚æžœæ²¡æœ‰å¯¹catæˆ–è€…sysæ–‡ä»¶è¿›è¡Œæ•°å­—ç­¾åï¼Œé©±åŠ¨å®‰è£…ä¼šå‡ºçŽ°é—®é¢˜ï¼Œæˆ–è€…é©±åŠ¨ä½¿ç”¨è¿‡ç¨‹ä¹Ÿä¼šå‡ºçŽ°å¼‚å¸¸ã€‚å› æ­¤ï¼Œå¯¹é©±åŠ¨ç¨‹åºçš„ç­¾åå·²ç»æ˜¯ä¸€é¡¹å¿…é¡»çš„æ“ä½œï¼Œè¿™é‡Œå°±ä»‹ç»ä¸€ä¸‹ Inf2Cat.exe è¿™ä¸ªå·¥å…·ã€‚è¿™ä¸ªå·¥å…·æœ¬èº«å¹¶ä¸èƒ½ç”Ÿæˆç­¾åï¼Œä½†æ˜¯å´æ˜¯é©±åŠ¨ç¨‹åºç­¾åçš„å¿…è¦çš„ä¸€æ­¥ã€‚&lt;/p&gt;

&lt;div class=&quot;separator&quot;&gt;&lt;/div&gt;
&lt;h2 class=&quot;no_toc&quot;&gt;Table of content&lt;/h2&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#inf2cat&quot; id=&quot;markdown-toc-inf2cat&quot;&gt;Inf2Cat&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#å·¥å…·è·¯å¾„&quot; id=&quot;markdown-toc-å·¥å…·è·¯å¾„&quot;&gt;å·¥å…·è·¯å¾„&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ä½¿ç”¨æ–¹æ³•&quot; id=&quot;markdown-toc-ä½¿ç”¨æ–¹æ³•&quot;&gt;ä½¿ç”¨æ–¹æ³•&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#å‚æ•°è¯´æ˜Ž&quot; id=&quot;markdown-toc-å‚æ•°è¯´æ˜Ž&quot;&gt;å‚æ•°è¯´æ˜Ž&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#windows-ç‰ˆæœ¬æ ‡è¯†ç¬¦&quot; id=&quot;markdown-toc-windows-ç‰ˆæœ¬æ ‡è¯†ç¬¦&quot;&gt;Windows ç‰ˆæœ¬æ ‡è¯†ç¬¦&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#åº”ç”¨ç¤ºä¾‹&quot; id=&quot;markdown-toc-åº”ç”¨ç¤ºä¾‹&quot;&gt;åº”ç”¨ç¤ºä¾‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;separator&quot;&gt;&lt;/div&gt;

&lt;h2 id=&quot;inf2cat&quot;&gt;Inf2Cat&lt;/h2&gt;
&lt;p&gt;MSDNé‡Œå¯¹è¿™ä¸ªå·¥å…·çš„è¯´æ˜Žå¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Inf2Cat (Inf2Cat.exe) is a command-line tool that determines whether a driver packageâ€™s INF file can be digitally-signed for a specified list of Windows versions. If so, Inf2Cat generates the unsigned catalog files that apply to the specified Windows versions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Inf2Cat å·¥å…·æ£€æŸ¥é©±åŠ¨ç¨‹åºåŒ…çš„ INF æ–‡ä»¶ï¼Œäº†è§£æ˜¯å¦å­˜åœ¨ç»“æž„é”™è¯¯ï¼Œå¹¶ä¸”æ˜¯å¦å¯ä»¥å¯¹éªŒè¯é©±åŠ¨ç¨‹åºåŒ…è¿›è¡Œæ•°å­—ç­¾åã€‚ä»…å½“ INF æ–‡ä»¶ä¸­å¼•ç”¨çš„æ‰€æœ‰æ–‡ä»¶éƒ½å­˜åœ¨ä¸”æºæ–‡ä»¶ä½äºŽæ­£ç¡®çš„ä½ç½®æ—¶ï¼Œæ‰èƒ½å¯¹é©±åŠ¨ç¨‹åºåŒ…è¿›è¡Œç­¾åã€‚&lt;/p&gt;

&lt;h3 id=&quot;å·¥å…·è·¯å¾„&quot;&gt;å·¥å…·è·¯å¾„&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)\&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Windows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Kits&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x86&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;ä½¿ç”¨æ–¹æ³•&quot;&gt;ä½¿ç”¨æ–¹æ³•&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Inf2Cat&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/driver:PackagePath /os&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:WindowsVersionList&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/nocat] [/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;verbose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/?] [other switches]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;å‚æ•°è¯´æ˜Ž&quot;&gt;å‚æ•°è¯´æ˜Ž&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‚æ•°&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;/driver:PackagePath&lt;/td&gt;
      &lt;td&gt;æŒ‡å®šåŒ…å«é©±åŠ¨ç¨‹åºåŒ…çš„ INF æ–‡ä»¶çš„ç›®å½•è·¯å¾„ã€‚å¦‚æžœæŒ‡å®šçš„ç›®å½•åŒ…å«å¤šä¸ªé©±åŠ¨ç¨‹åºåŒ…çš„ INF æ–‡ä»¶ï¼Œé‚£ä¹ˆ Inf2Cat ä¼šä¸ºæ¯ä¸ªé©±åŠ¨ç¨‹åºåŒ…åˆ›å»ºç›®å½•æ–‡ä»¶&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/nocat&lt;/td&gt;
      &lt;td&gt;å°† Inf2Cat é…ç½®ä¸ºéªŒè¯é©±åŠ¨ç¨‹åºåŒ…æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„ Windows ç‰ˆæœ¬çš„ç­¾åè¦æ±‚ï¼Œè€Œä¸ç”Ÿæˆç›®å½•æ–‡ä»¶&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/os:WindowsVersionList&lt;/td&gt;
      &lt;td&gt;å°† Inf2Cat é…ç½®ä¸ºéªŒè¯é©±åŠ¨ç¨‹åºåŒ…çš„ INF æ–‡ä»¶æ˜¯å¦ç¬¦åˆç”± WindowsVersionList æŒ‡å®šçš„ Windows ç‰ˆæœ¬çš„ç­¾åè¦æ±‚ã€‚WindowsVersionList æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”åˆ—è¡¨ï¼Œå…¶ä¸­å¯ä»¥åŒ…å« &lt;a href=&quot;#windows version&quot;&gt;ä¸€ä¸ªæˆ–å¤šä¸ªç‰ˆæœ¬æ ‡è¯†ç¬¦&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/verbose&lt;/td&gt;
      &lt;td&gt;å°† Inf2Cat é…ç½®ä¸ºåœ¨å‘½ä»¤çª—å£ä¸­æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/?&lt;/td&gt;
      &lt;td&gt;å°† Inf2Cat é…ç½®ä¸ºåœ¨å‘½ä»¤çª—å£ä¸­æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/uselocaltime&lt;/td&gt;
      &lt;td&gt;è¿è¡Œé©±åŠ¨ç¨‹åºæ—¶é—´æˆ³éªŒè¯æµ‹è¯•æ—¶ä½¿ç”¨æœ¬åœ°æ—¶åŒº&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;windows-ç‰ˆæœ¬æ ‡è¯†ç¬¦&quot;&gt;Windows ç‰ˆæœ¬æ ‡è¯†ç¬¦&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Windows ç‰ˆæœ¬&lt;/th&gt;
      &lt;th&gt;ç‰ˆæœ¬æ ‡è¯†ç¬¦&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x86 19H1 Edition&lt;/td&gt;
      &lt;td&gt;10_19H1_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x64 19H1 Edition&lt;/td&gt;
      &lt;td&gt;10_19H1_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 ARM64 19H1 Edition&lt;/td&gt;
      &lt;td&gt;10_19H1_ARM64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x86 RS5 Edition&lt;/td&gt;
      &lt;td&gt;10_RS5_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x64 RS5 Edition&lt;/td&gt;
      &lt;td&gt;10_RS5_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 ARM64 RS5 Edition&lt;/td&gt;
      &lt;td&gt;10_RS5_ARM64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server RS5 x64 Edition&lt;/td&gt;
      &lt;td&gt;ServerRS5_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server RS5 ARM64 Edition&lt;/td&gt;
      &lt;td&gt;ServerRS5_ARM64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x86 RS4 Edition&lt;/td&gt;
      &lt;td&gt;10_RS4_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x64 RS4 Edition&lt;/td&gt;
      &lt;td&gt;10_RS4_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 ARM64 RS4 Edition&lt;/td&gt;
      &lt;td&gt;10_RS4_ARM64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x86 RS3 Edition&lt;/td&gt;
      &lt;td&gt;10_RS3_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x64 RS3 Edition&lt;/td&gt;
      &lt;td&gt;10_RS3_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 ARM64 RS3 Edition&lt;/td&gt;
      &lt;td&gt;10_RS3_ARM64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x86 RS2 Edition&lt;/td&gt;
      &lt;td&gt;10_RS2_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x64 RS2 Edition&lt;/td&gt;
      &lt;td&gt;10_RS2_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x86 RS1 Edition&lt;/td&gt;
      &lt;td&gt;10_AU_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x64 RS1 Edition&lt;/td&gt;
      &lt;td&gt;10_AU_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2016 x64 Edition&lt;/td&gt;
      &lt;td&gt;SERVER2016_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x86 Edition&lt;/td&gt;
      &lt;td&gt;10_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 10 x64 Edition&lt;/td&gt;
      &lt;td&gt;10_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2016&lt;/td&gt;
      &lt;td&gt;Server10_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2016 on ARM&lt;/td&gt;
      &lt;td&gt;Server10_ARM64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 8.1 x86 Edition&lt;/td&gt;
      &lt;td&gt;6_3_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 8.1 x64 Edition&lt;/td&gt;
      &lt;td&gt;6_3_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 8.1 ARM Edition&lt;/td&gt;
      &lt;td&gt;6_3_ARM&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2012 R2&lt;/td&gt;
      &lt;td&gt;Server6_3_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 8 x64 Edition&lt;/td&gt;
      &lt;td&gt;8_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 8 x86 Edition&lt;/td&gt;
      &lt;td&gt;8_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 8 ARM Edition&lt;/td&gt;
      &lt;td&gt;8_ARM&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2012&lt;/td&gt;
      &lt;td&gt;Server8_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2008 R2 x64 Edition&lt;/td&gt;
      &lt;td&gt;Server2008R2_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2008 R2 Itanium Edition&lt;/td&gt;
      &lt;td&gt;Server2008R2_IA64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 7 x64 Edition&lt;/td&gt;
      &lt;td&gt;7_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows 7 x86 Edition&lt;/td&gt;
      &lt;td&gt;7_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2008 x64 Edition&lt;/td&gt;
      &lt;td&gt;Server2008_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2008 Itanium Edition&lt;/td&gt;
      &lt;td&gt;Server2008_IA64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2008 x86 Edition&lt;/td&gt;
      &lt;td&gt;Server2008_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Vista x64 Edition&lt;/td&gt;
      &lt;td&gt;Vista_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Vista x86 Edition&lt;/td&gt;
      &lt;td&gt;Vista_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows XP x64 Edition&lt;/td&gt;
      &lt;td&gt;XP_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows XP x86 Edition&lt;/td&gt;
      &lt;td&gt;XP_X86&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2003 x64 Edition&lt;/td&gt;
      &lt;td&gt;Server2003_X64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2003 Itanium Edition&lt;/td&gt;
      &lt;td&gt;Server2003_IA64&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Windows Server 2003 x86 Edition&lt;/td&gt;
      &lt;td&gt;Server2003_X86&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Inf2Cat å¿½ç•¥ç‰ˆæœ¬æ ‡è¯†ç¬¦å­—ç¬¦ä¸²çš„å­—æ¯å­—ç¬¦çš„å¤§å°å†™ã€‚ä¾‹å¦‚ï¼Œvista_x64 å’Œ Vista_X64 å¯¹äºŽ Windows Vista x64 ç‰ˆæœ¬æ¥è¯´éƒ½æ˜¯æœ‰æ•ˆçš„æ ‡è¯†ç¬¦ã€‚&lt;/p&gt;

&lt;p&gt;åªæœ‰åœ¨é©±åŠ¨ç¨‹åºåŒ…çš„INFæ–‡ä»¶ä¸­æŒ‡å®šäº†ç›®å½•æ–‡ä»¶å¹¶ä¸”ç›®å½•æ–‡ä»¶é€‚ç”¨äºŽä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šçš„Windowsç‰ˆæœ¬æ—¶ï¼ŒInf2Catæ‰ä¼šç”Ÿæˆç›®å½•æ–‡ä»¶ã€‚å¦‚æžœINFæ–‡ä»¶çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[INF Version section]&lt;/code&gt;éƒ¨åˆ†åªæä¾›ä¸€ä¸ªç›®å½•æ–‡ä»¶=æ–‡ä»¶å.catæŒ‡ä»¤ï¼Œåˆ™è¯¥ç›®å½•æ–‡ä»¶å°†åº”ç”¨äºŽæ•´ä¸ªé©±åŠ¨ç¨‹åºåŒ…ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åº”ç”¨ç¤ºä¾‹&quot;&gt;åº”ç”¨ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œc:\MyDriver åŒ…å«ä¸€ä¸ªé©±åŠ¨ç¨‹åºåŒ…ï¼Œè¯¥ç¨‹åºåŒ…çš„ INF æ–‡ä»¶ä¸º MyInfFile.inf å¹¶ä¸” INF æ–‡ä»¶ä¸­çš„ INF ç‰ˆæœ¬éƒ¨åˆ†ä»…åŒ…å«ä»¥ä¸‹ CatalogFile æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;CatalogFile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;MyCatalogFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cat&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¯¹äºŽè¯¥ç¤ºä¾‹ï¼Œä»¥ä¸‹ Inf2Cat å‘½ä»¤å°†éªŒè¯æ˜¯å¦å¯ä»¥é’ˆå¯¹ Windows 2000 å’Œ x86 ç‰ˆæœ¬çš„ Windows Vistaã€Windows Server 2003 å’Œ Windows XP å¯¹é©±åŠ¨ç¨‹åºåŒ…è¿›è¡Œç­¾åã€‚å¦‚æžœå¯ä»¥é’ˆå¯¹è¿™äº›ç‰ˆæœ¬å¯¹ç¨‹åºåŒ…è¿›è¡Œç­¾åï¼Œé‚£ä¹ˆ Inf2Cat å°†åˆ›å»ºæœªç­¾åçš„ç›®å½•æ–‡ä»¶ MyCatalogFile.catã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Inf2Cat&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/driver:C:\MyDriver /os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;XP_X86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Server2003_X86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Vista_X86&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œc:\MyDriver åŒ…å«ä¸€ä¸ªé©±åŠ¨ç¨‹åºåŒ…ï¼Œè¯¥ç¨‹åºåŒ…çš„ INF æ–‡ä»¶ä¸º MyInfFile.infï¼Œå¹¶ä¸” INF æ–‡ä»¶ä¸­çš„ INF Version éƒ¨åˆ†ä»…åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå…·æœ‰å¹³å°æ‰©å±•çš„CatalogFile æŒ‡ä»¤ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;CatalogFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ntx86&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;MyCatalogFileX86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cat&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;CatalogFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ntamd64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;MyCatalogFileX64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cat&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¯¹äºŽè¯¥ç¤ºä¾‹ï¼Œä»¥ä¸‹ Inf2Cat å‘½ä»¤å°†éªŒè¯æ˜¯å¦å¯ä»¥é’ˆå¯¹ Windows 2000 å’Œ x86 ç‰ˆæœ¬çš„ Windows Vistaã€Windows Server 2003 å’Œ Windows XP å¯¹é©±åŠ¨ç¨‹åºåŒ…è¿›è¡Œç­¾åã€‚æ­¤å¤–ï¼Œè¯¥å‘½ä»¤è¿˜å°†éªŒè¯æ˜¯å¦å¯ä»¥é’ˆå¯¹ x64 ç‰ˆæœ¬çš„ Windows Vistaã€Windows Server 2003 å’Œ Windows XP å¯¹é©±åŠ¨ç¨‹åºåŒ…è¿›è¡Œç­¾åã€‚å¦‚æžœå¯ä»¥é’ˆå¯¹æ‰€æœ‰è¿™äº›ç‰ˆæœ¬å¯¹ç¨‹åºåŒ…è¿›è¡Œç­¾åï¼Œé‚£ä¹ˆ Inf2Cat å°†åˆ›å»ºæœªç­¾åçš„ç›®å½•æ–‡ä»¶ MyCatalogFileX86.cat å’Œ MyCatalogFileX64.catã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Inf2Cat&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/driver:C:\MyDriver /os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;XP_X86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;XP_X64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Server2003_X86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Server2003_X64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Vista_X86&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Vista_X64&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name>david.dong</name></author><category term="Windows" /><category term="Windows" /><summary type="html">Windows é©±åŠ¨å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ° Windows WDK è‡ªå¸¦çš„ Inf2Cat.exe å·¥å…·å°†é©±åŠ¨ç¨‹åºçš„ INF æ–‡ä»¶è½¬æˆå¾…ç­¾åçš„ CAT æ ¼å¼çš„ç›®å½•æ–‡ä»¶ã€‚Windows 7 64ä½ç³»ç»Ÿä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œå¦‚æžœæ²¡æœ‰å¯¹catæˆ–è€…sysæ–‡ä»¶è¿›è¡Œæ•°å­—ç­¾åï¼Œé©±åŠ¨å®‰è£…ä¼šå‡ºçŽ°é—®é¢˜ï¼Œæˆ–è€…é©±åŠ¨ä½¿ç”¨è¿‡ç¨‹ä¹Ÿä¼šå‡ºçŽ°å¼‚å¸¸ã€‚å› æ­¤ï¼Œå¯¹é©±åŠ¨ç¨‹åºçš„ç­¾åå·²ç»æ˜¯ä¸€é¡¹å¿…é¡»çš„æ“ä½œï¼Œè¿™é‡Œå°±ä»‹ç»ä¸€ä¸‹ Inf2Cat.exe è¿™ä¸ªå·¥å…·ã€‚è¿™ä¸ªå·¥å…·æœ¬èº«å¹¶ä¸èƒ½ç”Ÿæˆç­¾åï¼Œä½†æ˜¯å´æ˜¯é©±åŠ¨ç¨‹åºç­¾åçš„å¿…è¦çš„ä¸€æ­¥ã€‚</summary></entry><entry><title type="html">æµ…è°ˆæ•°å­—ç­¾å</title><link href="http://localhost:4000/daviddong.github.io/security/2020/07/01/Security-signature.html" rel="alternate" type="text/html" title="æµ…è°ˆæ•°å­—ç­¾å" /><published>2020-07-01T18:24:12+08:00</published><updated>2020-07-01T18:24:12+08:00</updated><id>http://localhost:4000/daviddong.github.io/security/2020/07/01/Security-signature</id><content type="html" xml:base="http://localhost:4000/daviddong.github.io/security/2020/07/01/Security-signature.html">&lt;p&gt;è¿‘æ—¥ï¼Œè…¾è®¯å…¬å¸çŠ¶å‘Šè´µå·žè€å¹²å¦ˆçš„æ–°é—»åœ¨äº’è”ç½‘ä¸Šé—¹å¾—æ²¸æ²¸æ‰¬æ‰¬ï¼ŒðŸ’¥ å¤§å®¶ä¹Ÿåº”è¯¥æœ‰æ‰€è€³é—»ã€‚è…¾è®¯èµ·è¯‰è€å¹²å¦ˆåˆä½œæŽ¨å¹¿åŽæ²¡æœ‰ä»˜å¹¿å‘Šè´¹ï¼Œä½†éšåŽè€å¹²å¦ˆå¦è®¤äº†æ­¤äº‹ï¼Œç§°å®Œå…¨ä¸çŸ¥é“è¿™ä¸ªåˆä½œã€‚ ðŸ˜• åŽæ¥ç»è°ƒæŸ¥å‘çŽ°ï¼Œè¿™æ˜¯ä¸‰ä¸ªäººå†’å……è€å¹²å¦ˆå¸‚åœºéƒ¨ç»ç†ï¼Œç„¶åŽåˆ»äº†ä¸ªå‡å…¬ç« ï¼Œå°±ä¸ºäº†èŽ·å¾—åˆä½œåŽçš„æ¸¸æˆç¤¼åŒ…å¹¶ä»Žä¸­ç‰Ÿåˆ©ã€‚&lt;/p&gt;

&lt;p&gt;ä¸”ä¸è¯´è¿™ä¸ªäº‹æƒ…çš„æ€§è´¨ï¼Œå°±ä»Žä¸‰ä¸ªéª—å­ç”¨ä¸€ä¸ªå‡å…¬ç« ï¼Œå±…ç„¶æŠŠè…¾è®¯éª—å¾—å›¢å›¢è½¬æ¥çœ‹ï¼Œä¹ŸæŠ˜å°„å‡ºæ¥ç›®å‰çš„ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;è¯•æƒ³å¦‚æžœè…¾è®¯åœ¨å’Œè€å¹²å¦ˆçš„åˆåŒä¸­ä½¿ç”¨äº†æ•°å­—ç­¾åâ€¦ ä¸Šè¿°äº‹ä»¶æ ¹æœ¬å°±ä¸ä¼šå‘ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç¯‡æ–‡ç« å°±æ¥èŠä¸€èŠæ•°å­—ç­¾åã€‚æ–‡ç« æ¯”è¾ƒé•¿ï¼Œå¿ƒæ€¥çš„è¯»è€…å¯ä»¥é€‰æ‹©ç›´æŽ¥è·³åˆ°ç›¸å…³ç« èŠ‚é˜…è¯»ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å°±ä»Žæ•£åˆ—å‡½æ•°å¼€å§‹è¯´èµ·ï¼Œç„¶åŽå¼•å‡º ðŸ‘‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ•°å­—æ‘˜è¦&lt;/code&gt;æŠ€æœ¯å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;éžå¯¹ç§°åŠ å¯†&lt;/code&gt;æŠ€æœ¯ï¼Œæœ€åŽä»‹ç»åŸºäºŽè¿™ä¸¤ä¸ªæŠ€æœ¯åº”ç”¨çš„æ•°å­—ç­¾åã€‚&lt;/p&gt;

&lt;h2 id=&quot;15&quot;&gt;1. æ•°å­—æ‘˜è¦æŠ€æœ¯&lt;/h2&gt;
&lt;h3 id=&quot;2&quot;&gt;1.1 æ•£åˆ—å‡½æ•°&lt;/h3&gt;
&lt;p&gt;å®˜æ–¹è§£é‡Šï¼šæ•£åˆ—å‡½æ•°ä¸€èˆ¬æ˜¯æŒ‡Hashå‡½æ•°ï¼Œæ˜¯ä¸€ç§ä»Žä»»ä½•ä¸€ç§æ•°æ®ä¸­åˆ›å»ºå°çš„æ•°å­—&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æŒ‡çº¹&lt;/code&gt;çš„æ–¹æ³•ã€‚æ•£åˆ—å‡½æ•°æŠŠæ¶ˆæ¯æˆ–æ•°æ®åŽ‹ç¼©æˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ‘˜è¦&lt;/code&gt;ï¼Œä½¿å¾—æ•°æ®é‡å˜å°ï¼Œå°†æ•°æ®çš„æ ¼å¼å›ºå®šä¸‹æ¥ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘çš„ç†è§£ï¼šæ•£åˆ—å‡½æ•°æ˜¯å°†ä»»æ„é•¿åº¦çš„æ¶ˆæ¯æ˜ å°„æˆä¸ºå®šé•¿çš„æ•£åˆ—å€¼çš„å‡½æ•°ï¼Œä»¥è¯¥æ•£åˆ—å€¼ï¼ˆæ¶ˆæ¯æ‘˜è¦ï¼‰ä½œä¸ºè®¤è¯ç¬¦ã€‚&lt;/p&gt;

&lt;h3 id=&quot;3&quot;&gt;1.2 å¯†ç æ•£åˆ—å‡½æ•°&lt;/h3&gt;
&lt;p&gt;å¯†ç æ•£åˆ—å‡½æ•°ï¼ˆCryptographic hash functionï¼‰ï¼Œåˆè¯‘ä¸ºåŠ å¯†æ•£åˆ—å‡½æ•°ï¼Œæ˜¯æ•£åˆ—å‡½æ•°çš„ä¸€ç§ã€‚è¿™ç§æ•£åˆ—å‡½æ•°çš„è¾“å…¥æ•°æ®ï¼Œé€šå¸¸è¢«ç§°ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ¶ˆæ¯&lt;/code&gt;ï¼ˆmessageï¼‰ï¼Œè€Œå®ƒçš„è¾“å‡ºç»“æžœï¼Œç»å¸¸è¢«ç§°ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ¶ˆæ¯æ‘˜è¦&lt;/code&gt;ï¼ˆmessage digestï¼‰æˆ–æ‘˜è¦ï¼ˆdigestï¼‰ã€‚å°†ä»»æ„é•¿åº¦çš„æ¶ˆæ¯åŽ‹ç¼©åˆ°æŸä¸€å›ºå®šé•¿åº¦çš„æ¶ˆæ¯æ‘˜è¦ï¼Œä¸€ä¸ªç†æƒ³çš„å¯†ç æ•£åˆ—å‡½æ•°åº”è¯¥æœ‰å››ä¸ªä¸»è¦çš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;å¯¹äºŽä»»ä½•ä¸€ä¸ªç»™å®šçš„æ¶ˆæ¯ï¼Œå®ƒéƒ½å¾ˆå®¹æ˜“å°±èƒ½è¿ç®—å‡ºæ•£åˆ—æ•°å€¼ï¼ˆæ‘˜è¦ï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;éš¾ä»¥ç”±ä¸€ä¸ªå·²çŸ¥çš„æ•£åˆ—æ•°å€¼ (æ‘˜è¦)ï¼ŒåŽ»æŽ¨ç®—å‡ºåŽŸå§‹çš„æ¶ˆæ¯ã€‚ï¼ˆè¯„æ³¨ï¼šå•å‘ï¼Œä¸å¯é€†ï¼‰&lt;/li&gt;
  &lt;li&gt;åœ¨ä¸æ›´åŠ¨æ•£åˆ—æ•°å€¼ (æ‘˜è¦) çš„å‰æä¸‹ï¼Œä¿®æ”¹æ¶ˆæ¯å†…å®¹æ˜¯ä¸å¯è¡Œçš„ã€‚ï¼ˆè¯„æ³¨ï¼šå”¯ä¸€æ€§ï¼‰&lt;/li&gt;
  &lt;li&gt;å¯¹äºŽä¸¤ä¸ªä¸åŒçš„æ¶ˆæ¯ï¼Œå®ƒä¸èƒ½ç»™ä¸Žç›¸åŒçš„æ•£åˆ—æ•°å€¼ (æ‘˜è¦)ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å•å‘æ•£åˆ—å‡½æ•°ç”Ÿæˆçš„ä¿¡æ¯æ‘˜è¦æ˜¯ä¸å¯é¢„è§çš„ï¼Œæ¶ˆæ¯æ‘˜è¦çœ‹èµ·æ¥å’ŒåŽŸå§‹çš„æ•°æ®æ²¡æœ‰ä»»ä½•çš„å…³ç³»ã€‚è€Œä¸”ï¼ŒåŽŸå§‹æ•°æ®çš„ä»»ä½•å¾®å°å˜åŒ–éƒ½ä¼šå¯¹ç”Ÿæˆçš„ä¿¡æ¯æ‘˜è¦äº§ç”Ÿå¾ˆå¤§çš„å½±å“ã€‚&lt;/p&gt;

&lt;h3 id=&quot;4&quot;&gt;1.3 MD5&lt;/h3&gt;
&lt;p&gt;MD5ä¿¡æ¯æ‘˜è¦ç®—æ³•ï¼ˆMD5ï¼Œ Message-Digest Algorithmï¼‰ï¼Œä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„å¯†ç æ•£åˆ—å‡½æ•°ï¼Œå¯ä»¥äº§ç”Ÿå‡ºä¸€ä¸ª128ä½ï¼ˆ16å­—èŠ‚ï¼‰çš„æ•£åˆ—å€¼ï¼ˆhash valueï¼‰ï¼Œç”¨äºŽç¡®ä¿ä¿¡æ¯ä¼ è¾“å®Œæ•´ä¸€è‡´ã€‚&lt;/p&gt;

&lt;p&gt;åº”ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ç”¨äºŽå¯†ç ç®¡ç† - æŠŠç”¨æˆ·çš„å¯†ç ä»¥MD5å€¼ï¼ˆæˆ–ç±»ä¼¼çš„å…¶å®ƒç®—æ³•ï¼‰çš„æ–¹å¼ä¿å­˜èµ·æ¥ï¼Œç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œç³»ç»Ÿæ˜¯æŠŠç”¨æˆ·è¾“å…¥çš„å¯†ç è®¡ç®—æˆ MD5 å€¼ï¼Œç„¶åŽå†åŽ»å’Œç³»ç»Ÿä¸­ä¿å­˜çš„ MD5 å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœå¯†æ–‡ç›¸åŒï¼Œå°±å¯ä»¥è®¤å®šå¯†ç æ˜¯æ­£ç¡®çš„ï¼Œå¦åˆ™å¯†ç é”™è¯¯ã€‚é€šè¿‡è¿™æ ·çš„æ­¥éª¤ï¼Œç³»ç»Ÿåœ¨å¹¶ä¸çŸ¥é“ç”¨æˆ·å¯†ç æ˜Žç çš„æƒ…å†µä¸‹å°±å¯ä»¥ç¡®å®šç”¨æˆ·ç™»å½•ç³»ç»Ÿçš„åˆæ³•æ€§ã€‚&lt;/li&gt;
  &lt;li&gt;ç”µå­ç­¾å - ä½¿ç”¨ MD5ç®—æ³•å°±å¯ä»¥ä¸ºä»»ä½•æ–‡ä»¶ï¼ˆä¸ç®¡å…¶å¤§å°ã€æ ¼å¼ã€æ•°é‡ï¼‰äº§ç”Ÿä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ•°å­—æŒ‡çº¹&lt;/code&gt;ï¼Œå€ŸåŠ©è¿™ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ•°å­—æŒ‡çº¹&lt;/code&gt;ï¼Œé€šè¿‡æ£€æŸ¥æ–‡ä»¶å‰åŽ MD5 å€¼æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œå°±å¯ä»¥çŸ¥é“æºæ–‡ä»¶æ˜¯å¦è¢«æ”¹åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;5&quot;&gt;1.4 SHA&lt;/h3&gt;
&lt;p&gt;å®‰å…¨æ•£åˆ—ç®—æ³•ï¼ˆSHA, Secure Hash Algorithmï¼‰æ˜¯ä¸€ä¸ªå¯†ç æ•£åˆ—å‡½æ•°å®¶æ—ï¼Œæ˜¯FIPSæ‰€è®¤è¯çš„å®‰å…¨æ•£åˆ—ç®—æ³•ã€‚SHAå®¶æ—çš„äº”ä¸ªç®—æ³•ï¼Œåˆ†åˆ«æ˜¯SHA-1ã€SHA-224ã€SHA-256ã€SHA-384ï¼Œå’ŒSHA-512ï¼ŒåŽå››è€…æœ‰æ—¶å¹¶ç§°ä¸ºSHA-2ã€‚SHAåœ¨è®¸å¤šå®‰å…¨åå®šä¸­å¹¿ä¸ºä½¿ç”¨ï¼ŒåŒ…æ‹¬TLSå’ŒSSLã€PGPã€SSHã€S/MIMEå’ŒIPsecï¼Œæ›¾è¢«è§†ä¸ºæ˜¯MD5ï¼ˆæ›´æ—©ä¹‹å‰è¢«å¹¿ä¸ºä½¿ç”¨çš„æ‚å‡‘å‡½æ•°ï¼‰çš„åŽç»§è€…ã€‚&lt;/p&gt;

&lt;h3 id=&quot;6&quot;&gt;1.5 HMAC&lt;/h3&gt;
&lt;p&gt;HMACæ˜¯å¯†é’¥ç›¸å…³çš„å“ˆå¸Œè¿ç®—æ¶ˆæ¯è®¤è¯ç ï¼ˆHash-based Message Authentication Codeï¼‰çš„ç¼©å†™,å®ƒå¯ä»¥ä¸Žä»»ä½•è¿­ä»£&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ•£åˆ—å‡½æ•°&lt;/code&gt;æ†ç»‘ä½¿ç”¨ã€‚HMACç®—æ³•æ˜¯ä¸€ç§åŸºäºŽå¯†é’¥çš„æŠ¥æ–‡å®Œæ•´æ€§çš„éªŒè¯æ–¹æ³• ï¼Œå…¶å®‰å…¨æ€§æ˜¯å»ºç«‹åœ¨HashåŠ å¯†ç®—æ³•åŸºç¡€ä¸Šçš„ã€‚å®ƒè¦æ±‚é€šä¿¡åŒæ–¹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å…±äº«å¯†é’¥&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;çº¦å®šç®—æ³•&lt;/code&gt;ã€å¯¹æŠ¥æ–‡è¿›è¡ŒHashè¿ç®—ï¼Œå½¢æˆå›ºå®šé•¿åº¦çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è®¤è¯ç &lt;/code&gt;ã€‚é€šä¿¡åŒæ–¹é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è®¤è¯ç &lt;/code&gt;çš„æ ¡éªŒæ¥ç¡®å®šæŠ¥æ–‡çš„åˆæ³•æ€§ã€‚ HMACç®—æ³•å¯ä»¥ç”¨æ¥ä½œåŠ å¯†ã€æ•°å­—ç­¾åã€æŠ¥æ–‡éªŒè¯ç­‰ã€‚ &lt;br /&gt;
HMACæ˜¯ä¸€ç§åˆ©ç”¨å¯†ç å­¦ä¸­çš„&lt;a href=&quot;&quot;&gt;æ•£åˆ—å‡½æ•°&lt;/a&gt;æ¥è¿›è¡Œæ¶ˆæ¯è®¤è¯çš„ä¸€ç§æœºåˆ¶ï¼Œæ‰€èƒ½æä¾›çš„æ¶ˆæ¯è®¤è¯åŒ…æ‹¬ä¸¤æ–¹é¢å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;â‘  æ¶ˆæ¯å®Œæ•´æ€§è®¤è¯ï¼šèƒ½å¤Ÿè¯æ˜Žæ¶ˆæ¯å†…å®¹åœ¨ä¼ é€è¿‡ç¨‹æ²¡æœ‰è¢«ä¿®æ”¹ã€‚&lt;/li&gt;
  &lt;li&gt;â‘¡ ä¿¡æºèº«ä»½è®¤è¯ï¼šå› ä¸ºé€šä¿¡åŒæ–¹å…±äº«äº†è®¤è¯çš„å¯†é’¥ï¼ŒæŽ¥æ”¶æ–¹èƒ½å¤Ÿè®¤è¯å‘é€è¯¥æ•°æ®çš„ä¿¡æºä¸Žæ‰€å®£ç§°çš„ä¸€è‡´ï¼Œå³èƒ½å¤Ÿå¯é åœ°ç¡®è®¤æŽ¥æ”¶çš„æ¶ˆæ¯ä¸Žå‘é€çš„ä¸€è‡´ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;7&quot;&gt;1.6 æ¶ˆæ¯è®¤è¯ç &lt;/h3&gt;
&lt;p&gt;æ¶ˆæ¯è®¤è¯ï¼ˆmessage authenticationï¼‰å°±æ˜¯éªŒè¯æ¶ˆæ¯çš„å®Œæ•´æ€§ï¼Œå½“æŽ¥æ”¶æ–¹æ”¶åˆ°å‘é€æ–¹çš„æŠ¥æ–‡æ—¶ï¼ŒæŽ¥æ”¶æ–¹èƒ½å¤ŸéªŒè¯æ”¶åˆ°çš„æŠ¥æ–‡æ˜¯çœŸå®žçš„å’Œæœªè¢«ç¯¡æ”¹çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ¶ˆæ¯è®¤è¯æ‰€ç”¨çš„æ‘˜è¦ç®—æ³•ä¸Žä¸€èˆ¬çš„å¯¹ç§°æˆ–éžå¯¹ç§°åŠ å¯†ç®—æ³•ä¸åŒï¼Œå®ƒå¹¶ä¸ç”¨äºŽé˜²æ­¢ä¿¡æ¯è¢«çªƒå–ï¼Œè€Œæ˜¯ç”¨äºŽè¯æ˜ŽåŽŸæ–‡çš„å®Œæ•´æ€§å’Œå‡†ç¡®æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¶ˆæ¯è®¤è¯ä¸»è¦ç”¨äºŽé˜²æ­¢ä¿¡æ¯è¢«ç¯¡æ”¹ã€‚&lt;/p&gt;

&lt;p&gt;æ¶ˆæ¯è®¤è¯ç ï¼ˆMessage authentication codeï¼Œç¼©å†™ä¸ºMACï¼‰åˆè¯‘ä¸ºæ¶ˆæ¯é‰´åˆ«ç ã€æ–‡ä»¶æ¶ˆæ¯è®¤è¯ç ã€è®¯æ¯é‰´åˆ«ç ã€ä¿¡æ¯è®¤è¯ç ï¼Œæ˜¯ç»è¿‡ç‰¹å®šç®—æ³•åŽäº§ç”Ÿçš„ä¸€å°æ®µä¿¡æ¯ï¼Œæ£€æŸ¥æŸæ®µæ¶ˆæ¯çš„å®Œæ•´æ€§ï¼Œä»¥åŠä½œèº«ä»½éªŒè¯ã€‚&lt;/p&gt;

&lt;p&gt;å®ƒå¯ä»¥ç”¨æ¥ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;æ£€æŸ¥æ¶ˆæ¯çš„å®Œæ•´æ€§&lt;/li&gt;
  &lt;li&gt;é‰´åˆ«æ¶ˆæ¯çš„æ¥æº&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ¶ˆæ¯è®¤è¯ç çš„ç®—æ³•ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨å¸¦å¯†é’¥çš„æ•£åˆ—å‡½æ•°ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HMAC&lt;/code&gt;ï¼‰ï¼Œæˆ–è€…å—å¯†ç çš„å¸¦è®¤è¯å·¥ä½œæ¨¡å¼ï¼ˆå¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CBC-MAC&lt;/code&gt;ï¼‰ã€‚ä¿¡æ¯é‰´åˆ«ç ä¸èƒ½æä¾›å¯¹ä¿¡æ¯çš„ä¿å¯†ï¼Œè‹¥è¦åŒæ—¶å®žçŽ°ä¿å¯†è®¤è¯ï¼ŒåŒæ—¶éœ€è¦å¯¹ä¿¡æ¯è¿›è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;åŠ å¯†&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ•°å­—æ‘˜è¦&lt;/code&gt;æŠ€æœ¯çš„å†…å®¹ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬è®²ä¸€è®²&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;éžå¯¹ç§°åŠ å¯†&lt;/code&gt;æŠ€æœ¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;8&quot;&gt;2. éžå¯¹ç§°åŠ å¯†æŠ€æœ¯&lt;/h2&gt;
&lt;p&gt;éžå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼šå…¬å¼€å¯†é’¥ï¼ˆpublic key:ç®€ç§°pkï¼‰å’Œç§æœ‰å¯†é’¥ï¼ˆSecret key:ç®€ç§°skï¼‰ã€‚å…¬é’¥ä¸Žç§é’¥æ˜¯ä¸€å¯¹ï¼Œå¦‚æžœç”¨å…¬é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¯†ã€‚&lt;/p&gt;

&lt;p&gt;éžå¯¹ç§°åŠ å¯†ç®—æ³•å®žçŽ°æœºå¯†ä¿¡æ¯äº¤æ¢çš„åŸºæœ¬è¿‡ç¨‹æ˜¯ï¼šç”²æ–¹ç”Ÿæˆä¸€å¯¹å¯†é’¥å¹¶å°†å…¬é’¥å…¬å¼€ï¼Œéœ€è¦å‘ç”²æ–¹å‘é€ä¿¡æ¯çš„å…¶ä»–è§’è‰²(ä¹™æ–¹)ä½¿ç”¨è¯¥å¯†é’¥(ç”²æ–¹çš„å…¬é’¥)å¯¹æœºå¯†ä¿¡æ¯è¿›è¡ŒåŠ å¯†åŽå†å‘é€ç»™ç”²æ–¹ï¼›ç”²æ–¹å†ç”¨è‡ªå·±ç§é’¥å¯¹åŠ å¯†åŽçš„ä¿¡æ¯è¿›è¡Œè§£å¯†ã€‚ç”²æ–¹æƒ³è¦å›žå¤ä¹™æ–¹æ—¶æ­£å¥½ç›¸åï¼Œä½¿ç”¨ä¹™æ–¹çš„å…¬é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼ŒåŒç†ï¼Œä¹™æ–¹ä½¿ç”¨è‡ªå·±çš„ç§é’¥æ¥è¿›è¡Œè§£å¯†ã€‚å¦ä¸€æ–¹é¢ï¼Œç”²æ–¹å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹æœºå¯†ä¿¡æ¯è¿›è¡Œç­¾ååŽå†å‘é€ç»™ä¹™æ–¹ï¼›ä¹™æ–¹å†ç”¨ç”²æ–¹çš„å…¬é’¥å¯¹ç”²æ–¹å‘é€å›žæ¥çš„æ•°æ®è¿›è¡ŒéªŒç­¾ã€‚&lt;/p&gt;

&lt;h3 id=&quot;15&quot;&gt;2.1 RSA&lt;/h3&gt;
&lt;p&gt;RSAæ˜¯ä¸€ç§å…¬é’¥å¯†ç ç®—æ³•ï¼Œè¢«ç”¨äºŽå…¬é’¥å¯†ç å’Œæ•°å­—ç­¾åã€‚RSAæ˜¯ä¸€ç§éžå¯¹ç§°åŠ å¯†æŠ€æœ¯ã€‚&lt;/p&gt;

&lt;p&gt;RSAå¯†é’¥è‡³å°‘ä¸º500ä½é•¿ï¼Œä¸€èˆ¬æŽ¨èä½¿ç”¨1024ä½ã€‚è¿™å°±ä½¿åŠ å¯†çš„è®¡ç®—é‡å¾ˆå¤§ã€‚ä¸ºå‡å°‘è®¡ç®—é‡ï¼Œåœ¨ä¼ é€ä¿¡æ¯æ—¶ï¼Œå¸¸é‡‡ç”¨ä¼ ç»ŸåŠ å¯†æ–¹æ³•ä¸Žå…¬å¼€å¯†é’¥åŠ å¯†æ–¹æ³•ç›¸ç»“åˆçš„æ–¹å¼ï¼Œå³ä¿¡æ¯é‡‡ç”¨æ”¹è¿›çš„DESæˆ–IDEAå¯¹è¯å¯†é’¥åŠ å¯†ï¼Œç„¶åŽä½¿ç”¨RSAå¯†é’¥åŠ å¯†å¯¹è¯å¯†é’¥å’Œä¿¡æ¯æ‘˜è¦ã€‚å¯¹æ–¹æ”¶åˆ°ä¿¡æ¯åŽï¼Œç”¨ä¸åŒçš„å¯†é’¥è§£å¯†å¹¶å¯æ ¸å¯¹ä¿¡æ¯æ‘˜è¦ã€‚&lt;/p&gt;

&lt;p&gt;RSAç®—æ³•çš„ä¿å¯†å¼ºåº¦éšå…¶å¯†é’¥çš„é•¿åº¦å¢žåŠ è€Œå¢žå¼ºã€‚ä½†æ˜¯ï¼Œå¯†é’¥è¶Šé•¿ï¼Œå…¶åŠ è§£å¯†æ‰€è€—ç”¨çš„æ—¶é—´ä¹Ÿè¶Šé•¿ã€‚é€Ÿåº¦ä¸€ç›´æ˜¯RSAçš„ç¼ºé™·ã€‚ä¸€èˆ¬æ¥è¯´åªç”¨äºŽå°‘é‡æ•°æ®åŠ å¯†ã€‚RSAçš„é€Ÿåº¦æ¯”å¯¹åº”åŒæ ·å®‰å…¨çº§åˆ«çš„å¯¹ç§°å¯†ç ç®—æ³•è¦æ…¢å¾ˆå¤šã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºRSAçš„ç‰¹æ€§:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ—¢å¯ä»¥ç”¨å…¬é’¥åŠ å¯†ç„¶åŽç§é’¥è§£å¯†ï¼Œä¹Ÿå¯ä»¥ç”¨ç§é’¥åŠ å¯†ç„¶åŽå…¬é’¥è§£å¯†&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;å…¬é’¥åŠ å¯†ç„¶åŽç§é’¥è§£å¯†ï¼Œå¯ä»¥ç”¨äºŽé€šä¿¡ä¸­æ‹¥æœ‰å…¬é’¥çš„ä¸€æ–¹å‘æ‹¥æœ‰ç§é’¥çš„å¦ä¸€æ–¹ä¼ é€’æœºå¯†ä¿¡æ¯ï¼Œä¸è¢«ç¬¬ä¸‰æ–¹çªƒå¬ã€‚å¯åº”ç”¨åœ¨åŽŸæ–‡çš„åŠ å¯†ã€‚&lt;/li&gt;
    &lt;li&gt;é‚£ä¹ˆç§é’¥åŠ å¯†ç„¶åŽå…¬é’¥è§£å¯†æ˜¯ç”¨åœ¨ä»€ä¹ˆåœºåˆå‘¢ï¼Ÿå°±æ˜¯æ•°å­—ç­¾åï¼ˆæ‘˜è¦çš„åŠ å¯†ï¼‰ã€‚&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;9&quot;&gt;3. æ•°å­—ç­¾å&lt;/h2&gt;
&lt;p&gt;æ•°å­—ç­¾åï¼ˆåˆç§°å…¬é’¥æ•°å­—ç­¾åï¼‰æ˜¯åªæœ‰ä¿¡æ¯çš„å‘é€è€…æ‰èƒ½äº§ç”Ÿçš„åˆ«äººæ— æ³•ä¼ªé€ çš„ä¸€æ®µæ•°å­—ä¸²ï¼Œè¿™æ®µæ•°å­—ä¸²åŒæ—¶ä¹Ÿæ˜¯å¯¹ä¿¡æ¯çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‘é€è€…å‘é€ä¿¡æ¯çœŸå®žæ€§&lt;/code&gt;çš„ä¸€ä¸ªæœ‰æ•ˆè¯æ˜Žã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡å‘é€æ•°å­—ç­¾åï¼Œ &lt;br /&gt;
æŽ¥æ”¶è€…å¯ä»¥&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;ç¡®è®¤æŽ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼ˆæŠ¥æ–‡ï¼‰çš„å®Œæ•´æ€§ï¼Œå‘é€è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰è¢«ç¯¡æ”¹&lt;/li&gt;
  &lt;li&gt;é‰´åˆ«å‘é€è€…çš„èº«ä»½&lt;/li&gt;
  &lt;li&gt;é˜²æŠµèµ–&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å‘é€è€…å¯ä»¥&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;åŠ å¯†ä¿¡æ¯&lt;/li&gt;
  &lt;li&gt;é˜²æ­¢ä¼ªé€ ä¿¡æ¯&lt;/li&gt;
  &lt;li&gt;é˜²æ­¢é‡æ”¾æ”»å‡»&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ•°å­—ç­¾ååº”ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;éžå¯¹ç§°å¯†é’¥åŠ å¯†&lt;/code&gt;æŠ€æœ¯ä¸Ž&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ•°å­—æ‘˜è¦&lt;/code&gt;æŠ€æœ¯ã€‚&lt;/p&gt;

&lt;p&gt;æ•°å­—ç­¾åæŠ€æœ¯æ˜¯å°†æ‘˜è¦ä¿¡æ¯ç”¨å‘é€è€…çš„ç§é’¥åŠ å¯†ï¼Œä¸ŽåŽŸæ–‡ä¸€èµ·ä¼ é€ç»™æŽ¥æ”¶è€…ã€‚æŽ¥æ”¶è€…ç”¨è‡ªå·±çš„å…¬é’¥è§£å¯†è¢«åŠ å¯†çš„æ‘˜è¦ä¿¡æ¯ï¼Œç„¶åŽç”¨HASHå‡½æ•°å¯¹æ”¶åˆ°çš„åŽŸæ–‡äº§ç”Ÿä¸€ä¸ªæ‘˜è¦ä¿¡æ¯ï¼Œä¸Žè§£å¯†çš„æ‘˜è¦ä¿¡æ¯å¯¹æ¯”ã€‚å¦‚æžœç›¸åŒï¼Œåˆ™è¯´æ˜Žæ”¶åˆ°çš„ä¿¡æ¯æ˜¯å®Œæ•´çš„ï¼Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œå¦åˆ™è¯´æ˜Žä¿¡æ¯è¢«ä¿®æ”¹è¿‡ï¼Œå› æ­¤æ•°å­—ç­¾åèƒ½å¤ŸéªŒè¯ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚æ•°å­—ç­¾åæ˜¯ä¸ªåŠ å¯†çš„è¿‡ç¨‹ï¼Œæ•°å­—ç­¾åéªŒè¯æ˜¯ä¸ªè§£å¯†çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æžœç­¾åè€…æƒ³è¦å¯¹æŸä¸ªæ–‡ä»¶è¿›è¡Œæ•°å­—ç­¾åï¼Œå…¬é’¥å¿…é¡»å‘&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CA&lt;/code&gt; (èº«ä»½è®¤è¯æœºæž„ï¼‰æ¥æ³¨å†Œã€‚æ³¨å†ŒåŽèº«ä»½è®¤è¯æœºæž„ç»™ä½ å‘ä¸€æ•°å­—è¯ä¹¦ã€‚å¯¹æ–‡ä»¶ç­¾ååŽï¼Œä½ æŠŠæ­¤æ•°å­—è¯ä¹¦è¿žåŒæ–‡ä»¶åŠç­¾åä¸€èµ·å‘ç»™æŽ¥å—è€…ï¼ŒæŽ¥å—è€…å‘èº«ä»½è®¤è¯æœºæž„æ±‚è¯æ˜¯å¦çœŸåœ°æ˜¯ç”¨ä½ çš„å¯†é’¥ç­¾å‘çš„æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;10&quot;&gt;3.1 ç­¾åè¿‡ç¨‹&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;åœ¨æ­£å¼çš„æ•°å­—ç­¾åä¸­ï¼Œå‘é€æ–¹é¦–å…ˆå¯¹å‘é€æ–‡ä»¶é‡‡ç”¨å“ˆå¸Œç®—æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ¶ˆæ¯æ‘˜è¦(Message Digest)ï¼›&lt;/li&gt;
  &lt;li&gt;å†ç”¨è‡ªå·±çš„ç§é’¥(Secret keyï¼ŒSK)å¯¹æ¶ˆæ¯æ‘˜è¦è¿›è¡Œç­¾åï¼Œå½¢æˆå‘é€æ–¹çš„æ•°å­—ç­¾åã€‚&lt;/li&gt;
  &lt;li&gt;æ•°å­—ç­¾åå°†ä½œä¸ºé˜Ÿä»¶å’ŒåŽŸæ–‡ä¸€èµ·å‘é€ç»™æŽ¥æ”¶æ–¹ï¼›&lt;/li&gt;
  &lt;li&gt;æŽ¥æ”¶æ–¹é¦–å…ˆç”¨å‘é€æ–¹çš„å…¬é’¥å¯¹æ•°å­—ç­¾åè¿›è¡Œè§£å¯†å¾—åˆ°å‘é€æ–¹çš„æ•°å­—æ‘˜è¦ï¼Œç„¶åŽç”¨ç›¸åŒçš„å“ˆå¸Œå‡½æ•°å¯¹åŽŸæ–‡è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„æ¶ˆæ¯æ‘˜è¦ï¼Œæœ€åŽå°†æ¶ˆæ¯æ‘˜è¦ä¸Žæ”¶åˆ°çš„æ¶ˆæ¯æ‘˜è¦åšæ¯”è¾ƒã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-sign-01.png&quot; alt=&quot;sign-process&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;span id=&quot;3.1.1&quot;&gt;&lt;strong&gt;3.1.1 ä¾‹å­&lt;/strong&gt;&lt;/span&gt;     &lt;br /&gt;
ä¸€ä¸ªå®Œæ•´çš„ç­¾åä¾‹å­å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†ä¿è¯ä¿¡æ¯ä¼ é€çš„ä¿å¯†æ€§ã€çœŸå®žæ€§ã€å®Œæ•´æ€§å’Œä¸å¯å¦è®¤æ€§ï¼Œéœ€è¦å¯¹ä¼ é€çš„ä¿¡æ¯è¿›è¡Œæ•°å­—åŠ å¯†å’Œç­¾åï¼Œå…¶ä¼ é€è¿‡ç¨‹ä¸ºï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;å‘é€è€…å‡†å¤‡å¥½è¦ä¼ é€çš„æ•°å­—ä¿¡æ¯ï¼ˆæ˜Žæ–‡ï¼‰&lt;/li&gt;
    &lt;li&gt;å‘é€è€…å¯¹æ•°å­—ä¿¡æ¯è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼ˆSH256/MD5ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ªä¿¡æ¯æ‘˜è¦ï¼›&lt;/li&gt;
    &lt;li&gt;å‘é€è€…ç”¨è‡ªå·±çš„ç§é’¥å¯¹ä¿¡æ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†å¾—åˆ°æ•°å­—ç­¾åï¼ˆRSAï¼‰ï¼Œå¹¶å°†å…¶é™„åœ¨æ•°å­—ä¿¡æ¯ä¸Šï¼›&lt;/li&gt;
    &lt;li&gt;å‘é€è€…éšæœºäº§ç”Ÿä¸€ä¸ªåŠ å¯†å¯†é’¥ï¼Œå¹¶ç”¨æ­¤å¯†ç å¯¹è¦å‘é€çš„ä¿¡æ¯ï¼ˆæ˜Žæ–‡ï¼‰è¿›è¡ŒåŠ å¯†ï¼ˆå¯¹ç§°åŠ å¯†DESï¼‰ï¼Œå½¢æˆå¯†æ–‡ï¼›&lt;/li&gt;
    &lt;li&gt;å‘é€è€…ç”¨æŽ¥æ”¶è€…çš„å…¬é’¥å¯¹åˆšæ‰éšæœºäº§ç”Ÿçš„åŠ å¯†å¯†é’¥ðŸ”‘è¿›è¡ŒåŠ å¯†ï¼Œå°†åŠ å¯†åŽçš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DES&lt;/code&gt;å¯†é’¥è¿žåŒå¯†æ–‡ä¸€èµ·ä¼ é€ç»™æŽ¥æ”¶è€…ï¼›&lt;/li&gt;
    &lt;li&gt;æŽ¥æ”¶è€…æ”¶åˆ°ä¼ é€æ¥çš„å¯†æ–‡å’ŒåŠ å¯†è¿‡çš„DESå¯†é’¥ï¼Œå…ˆç”¨è‡ªå·±çš„ç§é’¥å¯¹åŠ å¯†çš„DESå¯†é’¥è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°å‘é€è€…éšæœºäº§ç”Ÿçš„åŠ å¯†å¯†é’¥ï¼›&lt;/li&gt;
    &lt;li&gt;æŽ¥æ”¶è€…ç„¶åŽç”¨éšæœºå¯†é’¥ðŸ”‘å¯¹æ”¶åˆ°çš„å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°æ˜Žæ–‡çš„æ•°å­—ä¿¡æ¯ï¼Œç„¶åŽå°†éšæœºå¯†é’¥æŠ›å¼ƒï¼›&lt;/li&gt;
    &lt;li&gt;æŽ¥æ”¶è€…ç”¨å‘é€è€…çš„å…¬é’¥å¯¹å‘é€è€…çš„æ•°å­—ç­¾åè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°ä¿¡æ¯æ‘˜è¦ï¼›&lt;/li&gt;
    &lt;li&gt;æŽ¥æ”¶è€…ç”¨ç›¸åŒçš„å“ˆå¸Œç®—æ³•å¯¹æ”¶åˆ°çš„æ˜Žæ–‡å†è¿›è¡Œä¸€æ¬¡å“ˆå¸Œè¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„ä¿¡æ¯æ‘˜è¦ï¼›&lt;/li&gt;
    &lt;li&gt;æŽ¥æ”¶è€…å°†æ”¶åˆ°çš„ä¿¡æ¯æ‘˜è¦å’Œæ–°äº§ç”Ÿçš„ä¿¡æ¯æ‘˜è¦è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœä¸€è‡´ï¼Œè¯´æ˜Žæ”¶åˆ°çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œå¹¶ä¸”ç¡®å®žæ¥è‡ªäºŽå‘é€è€…ã€‚&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;11&quot;&gt;3.2 X.509&lt;/h3&gt;
&lt;p&gt;æœ€åŽæˆ‘ä»¬æ¥è¯´ä¸€ä¸‹æ•°å­—ç­¾åä¸­ç”¨äºŽå…¬é’¥çš„æ•°å­—è¯ä¹¦ï¼Œä¸ºäº†è¯æ˜Žå…¬é’¥çš„æœ‰æ•ˆæ€§å’Œåˆæ³•æ€§ï¼Œä¿¡æ¯å‘é€è€…å¿…é¡»å‘&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CA&lt;/code&gt; (èº«ä»½è®¤è¯æœºæž„ï¼‰æ¥æ³¨å†Œã€‚æ³¨å†ŒåŽèº«ä»½è®¤è¯æœºæž„ç»™ä½ å‘ä¸€æ•°å­—è¯ä¹¦ã€‚ä¿¡æ¯å‘é€è€…åœ¨ç­¾åæ—¶å¿…é¡»å°†æ•°å­—è¯ä¹¦è¿žåŒæ–‡ä»¶åŠç­¾åä¸€èµ·å‘ç»™æŽ¥å—è€…ï¼ŒæŽ¥å—è€…æŽ¥æ”¶åˆ°ä¿¡æ¯åŽä¼šé€šè¿‡æ•°å­—è¯ä¹¦ç¡®è®¤æ˜¯å¦æ‰‹é‡Œçš„å…¬é’¥ä¸ºå‘é€è€…çš„ã€‚&lt;/p&gt;

&lt;p&gt;X.509æ­£æ˜¯ä¸€ç§æ•°å­—è¯ä¹¦çš„æ ¼å¼æ ‡å‡†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span id=&quot;3.2.1&quot;&gt;&lt;strong&gt;3.2.1 æ ¼å¼&lt;/strong&gt;&lt;/span&gt;         &lt;br /&gt;
X.509è§„å®šäº†æ•°å­—è¯ä¹¦çš„æ ¼å¼ã€‚       &lt;br /&gt;
å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;ç‰ˆæœ¬å·
åºåˆ—å·
ç­¾åç®—æ³•
é¢å‘è€…
è¯ä¹¦æœ‰æ•ˆæœŸ
  å¼€å§‹æ—¥æœŸ
  ç»ˆæ­¢æ—¥æœŸ
ä¸»é¢˜
ä¸»é¢˜å…¬é’¥ä¿¡æ¯
  å…¬é’¥ç®—æ³•
  ä¸»ä½“å…¬é’¥
é¢å‘è€…å”¯ä¸€èº«ä»½ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
ä¸»é¢˜å”¯ä¸€èº«ä»½ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
æ‰©å±•ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
ç­¾å&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;span id=&quot;3.2.2&quot;&gt;&lt;strong&gt;3.2.2 æ‰©å±•å&lt;/strong&gt;&lt;/span&gt;         &lt;br /&gt;
X.509æœ‰å¤šç§å¸¸ç”¨çš„æ‰©å±•åã€‚ä¸è¿‡å…¶ä¸­çš„ä¸€äº›è¿˜ç”¨äºŽå…¶å®ƒç”¨é€”ï¼Œå°±æ˜¯è¯´å…·æœ‰è¿™ä¸ªæ‰©å±•åçš„æ–‡ä»¶å¯èƒ½å¹¶ä¸æ˜¯è¯ä¹¦ï¼Œæ¯”å¦‚è¯´å¯èƒ½åªæ˜¯ä¿å­˜äº†ç§é’¥ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;æ‰©å±•å&lt;/th&gt;
      &lt;th&gt;è¯´æ˜Ž&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;.pem(éšç§å¢žå¼ºåž‹ç”µå­é‚®ä»¶)&lt;/td&gt;
      &lt;td&gt;DERç¼–ç çš„è¯ä¹¦å†è¿›è¡ŒBase64ç¼–ç çš„æ•°æ®å­˜æ”¾åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-----BEGIN CERTIFICATE-----&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-----END CERTIFICATE-----&lt;/code&gt;ä¹‹ä¸­&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;.cer/.crt/.der&lt;/td&gt;
      &lt;td&gt;é€šå¸¸æ˜¯DERäºŒè¿›åˆ¶æ ¼å¼çš„ï¼Œä½†Base64ç¼–ç åŽä¹Ÿå¾ˆå¸¸è§ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;p7b/.p7c&lt;/td&gt;
      &lt;td&gt;PKCS&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;.p12&lt;/td&gt;
      &lt;td&gt;PKCS#12æ ¼å¼ï¼ŒåŒ…å«è¯ä¹¦çš„åŒæ—¶å¯èƒ½è¿˜æœ‰å¸¦å¯†ç ä¿æŠ¤çš„ç§é’¥ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;.pfx&lt;/td&gt;
      &lt;td&gt;PKCS#12ä¹‹å‰çš„æ ¼å¼ï¼ˆé€šå¸¸ç”¨PKCS#12æ ¼å¼ï¼Œæ¯”å¦‚é‚£äº›ç”±IISäº§ç”Ÿçš„PFXæ–‡ä»¶ï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;12&quot;&gt;3.3 SSLè¯ä¹¦&lt;/h3&gt;

&lt;p&gt;ç¬¦åˆX.509æ ¼å¼çš„è¯ä¹¦æœ‰å¤šç§ï¼Œè¿™é‡Œä»¥SSLè¯ä¹¦ä¸ºä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;å¸¸è§çš„åœºæ™¯ä¼šæ˜¯ä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;å®¢æˆ·ç«¯ï¼Œæ¯”å¦‚æµè§ˆå™¨ä¼šå‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¸ºäº†è¯æ˜Žè‡ªå·±çš„èº«ä»½ï¼Œä¼šå‘é€è¯ä¹¦ç»™å¯¹æ–¹ã€‚&lt;/li&gt;
    &lt;li&gt;æµè§ˆå™¨è¯»å–è¯ä¹¦çš„æ•°å­—ç­¾åéƒ¨åˆ†ï¼Œç”¨è‡ªèº«æ ¹è¯ä¹¦åˆ—è¡¨ä¸­å¯¹åº”çš„å…¬é’¥è¯ä¹¦å¯¹å…¶è¿›è¡Œè§£å¯†ã€‚å¦‚æžœè§£å¯†æˆåŠŸï¼Œå¹¶ä¸”è¯ä¹¦å“ˆå¸Œå€¼ä¸Žç­¾åå†…çš„å“ˆå¸Œå€¼åŒ¹é…ä¸€è‡´ï¼Œå¯è¯æ˜Žç«™ç‚¹æä¾›çš„è¯ä¹¦ç¡®å®žæ˜¯è¯¥CAæ ¹è¯ä¹¦ç­¾å‘çš„ï¼Œå¦åˆ™ç»™å‡ºé£Žé™©æç¤ºã€‚&lt;/li&gt;
    &lt;li&gt;éªŒè¯é€šè¿‡ä¹‹åŽï¼Œä½¿ç”¨è¯ä¹¦ä¸­çš„å…¬é’¥å¯¹éšæœºæ•°å’Œå¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†ï¼Œå‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ç”¨ç§é’¥è¿›è¡Œè§£å¯†ï¼ŒèŽ·å¾—å¯†é’¥å’ŒåŠ å¯†ç®—æ³•ã€‚&lt;/li&gt;
    &lt;li&gt;æœåŠ¡ç«¯ä¸Žæµè§ˆå™¨åŽç»­é€šä¿¡å°†ä¼šä½¿ç”¨æ–°çš„å¯¹ç§°åŠ å¯†ç®—æ³•å’Œéšæœºå¯†é’¥åŠ å¯†ä¿¡æ¯ã€‚&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;SSLè¯ä¹¦ä»Žç”Ÿæˆåˆ°ä½¿ç”¨æ¶‰åŠåˆ°äº†ä¸‰æ¬¡åŠ è§£å¯†è¿‡ç¨‹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è¯ä¹¦ç”Ÿæˆçš„æ—¶å€™åˆ©ç”¨ç§é’¥ç­¾åï¼ŒéªŒè¯è¯ä¹¦çš„æ—¶å€™åˆ©ç”¨å…¬é’¥è§£å¯†ã€‚&lt;/li&gt;
  &lt;li&gt;ç¡®è®¤è¯ä¹¦æœ‰æ•ˆåŽï¼Œåˆ©ç”¨è¯ä¹¦ä¸­çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼ŒæœåŠ¡ç«¯åˆ©ç”¨ç§é’¥è§£å¯†ã€‚&lt;/li&gt;
  &lt;li&gt;åŒæ–¹ä½¿ç”¨æ–°ç”Ÿæˆçš„éšæœºå¯†é’¥è¿›è¡Œæ•°æ®åŠ è§£å¯†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç”¨ä¸€å¼ ç»“æž„å›¾è¡¨ç¤ºä¸‹HTTPSå’ŒX.509çš„å…³ç³»ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-plaintext&quot; data-lang=&quot;plaintext&quot;&gt;    HTTPS
  /       \
HTTP    TLS/SSL
        /      \
   é€šä¿¡å†…å®¹    ç¡®è®¤èº«ä»½
   å¯¹ç§°åŠ å¯†    SSLè¯ä¹¦ â€”â€” X.509 æ ¼å¼ï¼Œéžå¯¹ç§°åŠ å¯†&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;13&quot;&gt;3.4 æ•°å­—ç­¾ååº”ç”¨&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ç½‘ç«™è®¤è¯&lt;/strong&gt; &lt;br /&gt;
æœ€å¸¸è§çš„ç”¨å¤„å°±æ˜¯ç”¨æ¥è®¤è¯ä¸€ä¸ªç½‘ç«™çš„èº«ä»½,ç”¨æµè§ˆå™¨æ‰“å¼€ä»»ä½•ä¸€ä¸ªç½‘ç«™ï¼Œç„¶åŽç‚¹å‡»åœ°å€æ å‰é¢çš„ ðŸ”’ï¼Œç‚¹å‡»æŸ¥çœ‹è¯ä¹¦ï¼Œå°±å¯ä»¥çœ‹åˆ°ç½‘ç«™çš„æ•°å­—ç­¾åè¯ä¹¦äº†ã€‚çœ‹è¿‡ä¹‹å‰çš„å†…å®¹æˆ‘ä»¬å°±çŸ¥é“æ•°å­—è¯ä¹¦å…¶å®žæ˜¯å¯¹å…¬é’¥çš„å°è£…ï¼Œåœ¨å…¬é’¥çš„åŸºç¡€ä¸Šæ·»åŠ äº†è¯¸å¦‚é¢å‘è€…ä¹‹ç±»çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/daviddong.github.io/assets/image/others-sign-02.png&quot; alt=&quot;sign-process&quot; class=&quot;center-image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç­¾åç®—æ³•&lt;/code&gt;ä¸€æ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä½¿ç”¨çš„æ˜¯sha256RSAï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨SHA-256è®¡ç®—æ‘˜è¦ï¼Œç„¶åŽä½¿ç”¨RSAå¯¹æ‘˜è¦è¿›è¡Œç­¾åã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ä»£ç ç­¾å&lt;/strong&gt; &lt;br /&gt;
è€Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸ªåœ°æ–¹æˆ‘ä»¬ç»å¸¸ç¢°åˆ°æ•°å­—ç­¾åçš„â€”â€”ä»£ç ç­¾åã€‚&lt;br /&gt; 
ä»£ç ç­¾åç”¨äºŽç¡®ä¿å…¶æ¥æºå¯é ä¸”æœªè¢«ç¯¡æ”¹ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;æ¯”ç‰¹å¸&lt;/strong&gt; &lt;br /&gt;
æ¯”ç‰¹å¸æ˜¯ä¸€ç§å®Œå…¨åŒ¿åçš„æ•°å­—è´§å¸ï¼Œå®ƒçš„èº«ä»½è®¤è¯æ˜¯åŸºäºŽECDSAã€‚æ¯”ç‰¹å¸çš„è´¦æˆ·åœ°å€å°±æ˜¯å¯¹å…¬é’¥è®¡ç®—æ‘˜è¦å¾—åˆ°çš„ï¼Œå‘å…¨ä¸–ç•Œå…¬å¸ƒã€‚è€Œç¡®è®¤ä½ æ˜¯è´¦æˆ·æ‹¥æœ‰è€…çš„å”¯ä¸€åŠžæ³•å°±æ˜¯çœ‹ä½ æœ‰æ²¡æœ‰è´¦æˆ·å¯¹åº”çš„ç§é’¥ã€‚å¯¹äºŽæ¯”ç‰¹å¸ä¸­çš„ä»»æ„ä¸€ä¸ªäº¤æ˜“è®°å½•ï¼Œåªæœ‰å½“å…¶ä¸­ä»˜æ¬¾æ–¹çš„ç­¾åæ˜¯æœ‰æ•ˆçš„ï¼Œå®ƒæ‰æ˜¯æœ‰æ•ˆçš„ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;14&quot;&gt;3.5 ç”Ÿæˆæ•°å­—ç­¾å&lt;/h3&gt;
&lt;p&gt;åœ¨Windowså¹³å°ä¸‹ï¼ŒMicrosoftæä¾›äº†ä¸€ç»„å·¥å…·ç”¨äºŽç”Ÿæˆå’Œæ ¡éªŒæ•°å­—ç­¾åã€‚å…³äºŽè¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘ä¼šå¦å¤–å†™ä¸€ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•åˆ©ç”¨ Microsoft WDK å·¥å…·æ¥ç”Ÿæˆæ•°å­—ç­¾åã€‚&lt;/p&gt;

&lt;p&gt;æœ€åŽæŽ¨èä¸€ç¯‡æ–‡ç« ï¼Œè®²çš„æ¯”æˆ‘å¥½ï¼Œå¦‚æžœçœ‹äº†ä»¥ä¸Šå†…å®¹è¿˜æœ‰ä¸æ˜Žç™½çš„åœ°æ–¹ï¼Œå¯ä»¥ç»§ç»­é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html&quot;&gt;æ•°å­—ç­¾åæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/a&gt;
æ¥è‡ªï¼š&lt;a href=&quot;http://www.ruanyifeng.com/blog/&quot;&gt;é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—&lt;/a&gt;&lt;/p&gt;</content><author><name>david.dong</name></author><category term="Security" /><category term="Security" /><summary type="html">è¿‘æ—¥ï¼Œè…¾è®¯å…¬å¸çŠ¶å‘Šè´µå·žè€å¹²å¦ˆçš„æ–°é—»åœ¨äº’è”ç½‘ä¸Šé—¹å¾—æ²¸æ²¸æ‰¬æ‰¬ï¼ŒðŸ’¥ å¤§å®¶ä¹Ÿåº”è¯¥æœ‰æ‰€è€³é—»ã€‚è…¾è®¯èµ·è¯‰è€å¹²å¦ˆåˆä½œæŽ¨å¹¿åŽæ²¡æœ‰ä»˜å¹¿å‘Šè´¹ï¼Œä½†éšåŽè€å¹²å¦ˆå¦è®¤äº†æ­¤äº‹ï¼Œç§°å®Œå…¨ä¸çŸ¥é“è¿™ä¸ªåˆä½œã€‚ ðŸ˜• åŽæ¥ç»è°ƒæŸ¥å‘çŽ°ï¼Œè¿™æ˜¯ä¸‰ä¸ªäººå†’å……è€å¹²å¦ˆå¸‚åœºéƒ¨ç»ç†ï¼Œç„¶åŽåˆ»äº†ä¸ªå‡å…¬ç« ï¼Œå°±ä¸ºäº†èŽ·å¾—åˆä½œåŽçš„æ¸¸æˆç¤¼åŒ…å¹¶ä»Žä¸­ç‰Ÿåˆ©ã€‚</summary></entry></feed>